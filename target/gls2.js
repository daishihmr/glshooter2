/*
 bulletml.js v0.5.0-SNAPSHOT

 License
 http://daishihmr.mit-license.org/
*/
function h(c){throw c;}var i=void 0,k=!0,l=null,w=!1;function K(){return function(){}}var M={Nj:this};
(function(){function c(b,c){for(var d=0,j=b.length;d<j;d++)if(b[d].label==c)return b[d]}M.ia=function(b){this.type="none";this.root=this;this.rb=[];this.Ff=[];this.Lf=[];if(b!==i){for(var c in b)b.hasOwnProperty(c)&&(b[c].label=c,b[c]instanceof M.Xb?this.rb.push(b[c]):b[c]instanceof M.Oa?this.Ff.push(b[c]):b[c]instanceof M.Zd&&this.Lf.push(b[c]));b=0;for(c=this.rb.length;b<c;b++)this.rb[b].ic(this);b=0;for(c=this.Ff.length;b<c;b++)this.Ff[b].ic(this);b=0;for(c=this.Lf.length;b<c;b++)this.Lf[b].ic(this)}};
M.ia.prototype.Si=function(b){return c(this.rb,b)};M.ia.prototype.Tk=function(){for(var b=[],c=0,d=this.rb.length;c<d;c++){var j=this.rb[c];j.label&&0===j.label.indexOf("top")&&(b[b.length]=j.label)}return b};M.ia.prototype.Ik=function(b){var c;if(c=this.Si(b))return c;h(Error("action labeled '"+b+"' is undefined."))};M.ia.prototype.Jk=function(b){return c(this.Ff,b)};M.ia.prototype.Kk=function(b){var c;if(c=this.Jk(b))return c;h(Error("bullet labeled '"+b+"' is undefined."))};M.ia.prototype.Lk=function(b){return c(this.Lf,
b)};M.ia.prototype.Mk=function(b){var c;if(c=this.Lk(b))return c;h(Error("fire labeled '"+b+"' is undefined."))};M.Oa=function(){this.root=this.label=l;this.direction=new M.Mc(0);this.speed=new M.Sc(1);this.rb=[];this.$a={};this.Fa={}};M.Oa.prototype.clone=function(b){var c=new M.Oa;c.label=this.label;c.root=this.root;c.rb=this.rb;c.direction=new M.Mc(b.lb(this.direction.value));c.direction.type=this.direction.type;c.speed=new M.Sc(b.lb(this.speed.value));c.speed.type=this.speed.type;c.$a=this.$a;
c.Fa=b.Fa;return c};M.Oa.prototype.ic=function(b){this.root=b;for(var c=0,d=this.rb.length;c<d;c++)this.rb[c].ic(b)};M.nf=function(b){this.root=l;this.label=b;this.nb=[]};M.nf.prototype.clone=function(b){var c=b.Fa;b.Fa=b.Rg(this.nb);var d=this.root.Kk(this.label).clone(b);b.Fa=c;return d};M.nf.prototype.ic=function(b){this.root=b};M.qb=function(){this.Mb=""};M.qb.prototype.ic=function(b){this.root=b};M.Xb=function(){this.Mb="action";this.root=this.label=l;this.oc=[];this.nb=[]};M.Xb.prototype=new M.qb;
M.Xb.prototype.ic=function(b){this.root=b;for(var c=0,d=this.oc.length;c<d;c++)this.oc[c].ic(b)};M.Xb.prototype.clone=function(){var b=new M.Xb;b.label=this.label;b.root=this.root;b.oc=this.oc;return b};M.Yd=function(b){this.Mb="actionRef";this.label=b;this.root=l;this.nb=[]};M.Yd.prototype=new M.qb;M.Yd.prototype.clone=function(){var b=new M.Xb;b.root=this.root;b.oc.push(this);return b};M.Zd=function(){this.Mb="fire";this.Ia=this.speed=this.direction=this.root=this.label=l;this.$a=new M.rf};M.Zd.prototype=
new M.qb;M.Zd.prototype.ic=function(b){this.root=b;this.Ia&&this.Ia.ic(b)};M.jg=function(b){this.Mb="fireRef";this.label=b;this.nb=[]};M.jg.prototype=new M.qb;M.pf=function(){this.Mb="changeDirection";this.direction=new M.Mc;this.Ib=0};M.pf.prototype=new M.qb;M.qf=function(){this.Mb="changeSpeed";this.speed=new M.Sc;this.Ib=0};M.qf.prototype=new M.qb;M.lf=function(){this.Mb="accel";this.Ic=new M.og;this.Lc=new M.Pg;this.Ib=0};M.lf.prototype=new M.qb;M.xf=function(b){this.Mb="wait";this.value=b||0};
M.xf.prototype=new M.qb;M.Og=function(){this.Mb="vanish"};M.Og.prototype=new M.qb;M.vf=function(){this.Mb="repeat";this.xj=0;this.action=l;this.nb=[]};M.vf.prototype=new M.qb;M.vf.prototype.ic=function(b){this.root=b;this.action&&this.action.ic(b)};M.fg=function(b,c){this.Mb="bind";this.Pl=b;this.Hk=c};M.fg.prototype=new M.qb;M.Eg=function(b,c){this.Mb="notify";this.Ek=b;this.nb=c||l};M.Eg.prototype=new M.qb;M.Lj=new M.qb;M.Mc=function(b){this.type="aim";this.value=b||0};M.Sc=function(b){this.type=
"absolute";this.value=b===i?1:b};M.og=function(b){this.type="absolute";this.value=b||0};M.Pg=function(b){this.type="absolute";this.value=b||0};M.rf=function(b){b=b||{};this.offsetX=b.offsetX||0;this.offsetY=b.offsetY||0;this.qa=k;b.qa!==i&&(this.qa=!!b.qa)};M.ri=function(b){this.value=b||0};M.si=function(b){this.value=b||0};M.ai=function(b){this.value=!!b}})();M.Ua=function(c){this.Ci=c;this.yf=[];this.dd=-1;this.zb=l;this.Fa={}};
M.Ua.prototype.next=function(){this.dd+=1;if(this.zb!==l){var c=this.zb.oc[this.dd];if(c!==i){if(c instanceof M.Xb)return this.Fe(),this.zb=c,this.Fa=this.Qg(),this.next();if(c instanceof M.Yd)return this.Fe(),this.zb=this.Ci.Ik(c.label),this.Fa=this.Rg(c.nb),this.next();if(c instanceof M.vf)return this.Fa.pe=0,this.Fa.hj=this.lb(c.xj)|0,this.Fe(),this.zb=c.action.clone(),this.Fa=this.Qg(),this.next();if(c instanceof M.Zd){var b=new M.Zd;b.Ia=c.Ia.clone(this);c.direction!==l&&(b.direction=new M.Mc(this.lb(c.direction.value)),
b.direction.type=c.direction.type);c.speed!==l&&(b.speed=new M.Sc(this.lb(c.speed.value)),b.speed.type=c.speed.type);b.$a=new M.rf;b.$a.offsetX=this.lb(c.$a.offsetX);b.$a.offsetY=this.lb(c.$a.offsetY);b.$a.qa=c.$a.qa;return b}return c instanceof M.jg?(this.Fe(),this.zb=new M.Xb,this.zb.oc=[this.Ci.Mk(c.label)],this.Fa=this.Rg(c.nb),this.next()):c instanceof M.pf?(b=new M.pf,b.direction.type=c.direction.type,b.direction.value=this.lb(c.direction.value),b.Ib=this.lb(c.Ib),b):c instanceof M.qf?(b=new M.qf,
b.speed.type=c.speed.type,b.speed.value=this.lb(c.speed.value),b.Ib=this.lb(c.Ib),b):c instanceof M.lf?(b=new M.lf,b.Ic.type=c.Ic.type,b.Ic.value=this.lb(c.Ic.value),b.Lc.type=c.Lc.type,b.Lc.value=this.lb(c.Lc.value),b.Ib=this.lb(c.Ib),b):c instanceof M.xf?new M.xf(this.lb(c.value)):c instanceof M.Og?c:c instanceof M.fg?(this.Fa["$"+c.Pl]=this.lb(c.Hk),M.Lj):c instanceof M.Eg?c:l}this.rk();if(this.zb===l)return l;if((c=this.zb.oc[this.dd])&&"repeat"==c.Mb)this.Fa.pe++,this.Fa.pe<this.Fa.hj&&(this.Fe(),
this.zb=c.action.clone(),this.Fa=this.Qg());return this.next()}return l};M.Ua.prototype.Fe=function(){this.yf.push({action:this.zb,cursor:this.dd,scope:this.Fa});this.dd=-1};M.Ua.prototype.rk=function(){var c=this.yf.pop();c?(this.dd=c.cursor,this.zb=c.action,this.Fa=c.scope):(this.dd=-1,this.zb=l,this.Fa={})};
M.Ua.prototype.lb=function(c){var b;if("boolean"===typeof c||"number"===typeof c)return c;if(isNaN(b=Number(c))){if((b=this.Fa[c])||(b=M.Ua.Bb[c]))return b;if("$rand"===c)return Math.random()}else return b;b={};for(var f in M.Ua.Bb)M.Ua.Bb.hasOwnProperty(f)&&(b[f]=M.Ua.Bb[f]);for(f in this.Fa)this.Fa.hasOwnProperty(f)&&(b[f]=this.Fa[f]);b.$rand=Math.random();(f=this.yf[this.yf.length-1])&&(b.$loop={index:f.scope.pe,count:f.scope.pe+1,first:0===f.scope.pe,last:f.scope.pe+1>=f.scope.hj});return(new Function("return "+
c.split("$").join("this.$"))).apply(b)};M.Ua.prototype.Rg=function(c){var b={};if(c)for(var f=0,d=c.length;f<d;f++)b["$"+(f+1)]=this.lb(c[f]);else for(f in this.Fa)this.Fa.hasOwnProperty(f)&&(b[f]=this.Fa[f]);return b};M.Ua.prototype.Qg=function(){var c={},b;for(b in this.Fa)this.Fa.hasOwnProperty(b)&&(c[b]=this.Fa[b]);return c};M.ia.prototype.jh=function(c){var b=new M.Ua(this);if(c=this.Si(c))b.zb=c;return b};
M.Oa.prototype.jh=function(){var c=new M.Ua(this.root),b=new M.Xb;b.root=this.root;b.oc=this.rb;c.zb=b;c.Fa=this.Fa;return c};M.Ua.Bb={};M.La=function(c){c=c||"";for(var b in M.La)M.La.hasOwnProperty(b)&&(M.Nj[c+b]=M.La[b])};
M.La.action=function(c){if(0<arguments.length)for(var b=0,f=arguments.length;b<f;b++)arguments[b]instanceof Function&&(arguments[b]=arguments[b]());if(c instanceof Array){b=0;for(f=c.length;b<f;b++)c[b]instanceof Function&&(c[b]=c[b]())}var d=new M.Xb;if(c instanceof Array)c.some(function(b){return!(b instanceof M.qb)})&&h(Error("argument type error.")),d.oc=c;else{b=0;for(f=arguments.length;b<f;b++)arguments[b]instanceof M.qb?d.oc[b]=arguments[b]:h(Error("argument type error."))}return d};
M.La.fa=function(c,b){for(var f=0,d=arguments.length;f<d;f++)arguments[f]instanceof Function&&(arguments[f]=arguments[f]());c===i&&h(Error("label is required."));d=new M.Yd(c);if(b instanceof Array)d.nb=b;else for(f=1;f<arguments.length;f++)d.nb.push(arguments[f]);return d};
M.La.Ia=function(c,b,f,d){for(var j=0,p=arguments.length;j<p;j++)arguments[j]instanceof Function&&(arguments[j]=arguments[j]());p=new M.Oa;for(j=0;j<arguments.length;j++)arguments[j]instanceof M.Mc?p.direction=arguments[j]:arguments[j]instanceof M.Sc?p.speed=arguments[j]:arguments[j]instanceof M.Xb?p.rb.push(arguments[j]):arguments[j]instanceof M.Yd?p.rb.push(arguments[j]):arguments[j]instanceof Array?p.rb.push(M.La.action(arguments[j])):arguments[j]instanceof Object?p.$a=arguments[j]:"string"===
typeof arguments[j]&&(p.label=arguments[j]);return p};M.La.Sl=function(c,b){for(var f=0,d=arguments.length;f<d;f++)arguments[f]instanceof Function&&(arguments[f]=arguments[f]());c===i&&h(Error("label is required."));d=new M.nf(c);if(b instanceof Array)d.nb=b;else for(f=1;f<arguments.length;f++)d.nb.push(arguments[f]);return d};
M.La.fire=function(c,b,f,d){for(var j=0,p=arguments.length;j<p;j++)arguments[j]instanceof Function&&(arguments[j]=arguments[j]());p=new M.Zd;for(j=0;j<arguments.length;j++)arguments[j]instanceof M.Mc?p.direction=arguments[j]:arguments[j]instanceof M.Sc?p.speed=arguments[j]:arguments[j]instanceof M.Oa?p.Ia=arguments[j]:arguments[j]instanceof M.nf?p.Ia=arguments[j]:arguments[j]instanceof M.rf?p.$a=arguments[j]:arguments[j]instanceof M.ri?p.$a.offsetX=arguments[j].value:arguments[j]instanceof M.si?p.$a.offsetY=
arguments[j].value:arguments[j]instanceof M.ai&&(p.$a.qa=arguments[j].value);p.Ia===i&&h(Error("bullet (or bulletRef) is required."));return p};M.La.Xl=function(c,b){for(var f=0,d=arguments.length;f<d;f++)arguments[f]instanceof Function&&(arguments[f]=arguments[f]());c===i&&h(Error("label is required."));d=new M.jg(c);if(b instanceof Array)d.nb=b;else for(f=1;f<arguments.length;f++)d.nb.push(arguments[f]);return d};
M.La.Tl=function(c,b){for(var f=0,d=arguments.length;f<d;f++)arguments[f]instanceof Function&&(arguments[f]=arguments[f]());c===i&&h(Error("direction is required."));b===i&&h(Error("term is required."));f=new M.pf;f.direction=c instanceof M.Mc?c:new M.Mc(c);f.Ib=b;return f};
M.La.Jd=function(c,b){for(var f=0,d=arguments.length;f<d;f++)arguments[f]instanceof Function&&(arguments[f]=arguments[f]());c===i&&h(Error("speed is required."));b===i&&h(Error("term is required."));f=new M.qf;f.speed=c instanceof M.Sc?c:new M.Sc(c);f.Ib=b;return f};
M.La.Rl=function(c,b,f){for(var d=0,j=arguments.length;d<j;d++)arguments[d]instanceof Function&&(arguments[d]=arguments[d]());j=new M.lf;for(d=0;d<arguments.length;d++)arguments[d]instanceof M.og?j.Ic=c:arguments[d]instanceof M.Pg?j.Lc=b:j.Ib=arguments[d];j.Ic===i&&j.Lc===i&&h(Error("horizontal or vertical is required."));j.Ib===i&&h(Error("term is required."));return j};
M.La.wait=function(c){for(var b=0,f=arguments.length;b<f;b++)arguments[b]instanceof Function&&(arguments[b]=arguments[b]());c===i&&h(Error("value is required."));return new M.xf(c)};M.La.wa=function(){return new M.Og};
M.La.repeat=function(c,b){for(var f=0,d=arguments.length;f<d;f++)arguments[f]instanceof Function&&(arguments[f]=arguments[f]());c===i&&h(Error("times is required."));b===i&&h(Error("action is required."));d=new M.vf;d.xj=c;if(b instanceof M.Xb||b instanceof M.Yd)d.action=b;else if(b instanceof Array)d.action=M.La.action(b);else{for(var j=[],f=1;f<arguments.length;f++)j.push(arguments[f]);d.action=M.La.action(j)}return d};M.La.ma=function(c,b){return new M.fg(c,b)};
M.La.bm=function(c,b){return new M.Eg(c,b)};M.La.direction=function(c,b){for(var f=0,d=arguments.length;f<d;f++)arguments[f]instanceof Function&&(arguments[f]=arguments[f]());c===i&&h(Error("value is required."));f=new M.Mc(c);b!==i&&(f.type=b);return f};M.La.speed=function(c,b){for(var f=0,d=arguments.length;f<d;f++)arguments[f]instanceof Function&&(arguments[f]=arguments[f]());c===i&&h(Error("value is required."));f=new M.Sc(c);b&&(f.type=b);return f};
M.La.Ic=function(c,b){for(var f=0,d=arguments.length;f<d;f++)arguments[f]instanceof Function&&(arguments[f]=arguments[f]());c===i&&h(Error("value is required."));f=new M.og(c);b&&(f.type=b);return f};M.La.Lc=function(c,b){for(var f=0,d=arguments.length;f<d;f++)arguments[f]instanceof Function&&(arguments[f]=arguments[f]());c===i&&h(Error("value is required."));f=new M.Pg(c);b&&(f.type=b);return f};M.La.Wl=function(c){return new M.rf(c)};M.La.offsetX=function(c){return new M.ri(c)};M.La.offsetY=function(c){return new M.si(c)};
M.La.qa=function(c){return new M.ai(c)};tm.Lb=tm.Lb||{};
(function(){function c(b){for(;b<=-Math.PI;)b+=2*Math.PI;for(;Math.PI<b;)b-=2*Math.PI;return b}function b(b,c){return Math.atan2(c.y-b.y,c.x-b.x)}tm.Lb.vd=tm.createClass({init:function(b){b||h(Error("argument is invalid.",b));this.zi=b},Hf:function(b,c){var d=this.zi.Tk();if(c===i&&0<d.length){for(var f=[],r=0,n=d.length;r<n;r++)f[f.length]=this.Ai(b,d[r]);for(var q=function(){if(!q.stop){for(var b=f.length;b--;)f[b].call(this);q.ah==f.length&&(q.Le=k,this.dispatchEvent(tm.event.Event("completeattack")))}},r=
f.length;r--;)f[r].Yf=q;q.ah=0;q.Ki=function(){this.ah++};q.ah=0;q.Le=w;q.Sf=k;q.stop=w;return q}return this.Ai(b,c)},Ai:function(b,c){function d(){if(!d.stop){d.oa+=1;this.oa=d.oa;var b=d.Gf,c=d.qk;if(c)if(d.oa<d.Zg?d.direction+=d.ke:d.oa===d.Zg&&(d.direction=d.jd),d.oa<d.$g?d.speed+=d.jf:d.oa===d.$g&&(d.speed=d.we),d.oa<d.Ug?(d.Ud+=d.Bf,d.Wd+=d.Cf):d.oa===d.Ug&&(d.Ud=d.zf,d.Wd=d.Af),this.x+=Math.cos(d.direction)*d.speed*b.Vd,this.y+=Math.sin(d.direction)*d.speed*b.Vd,this.x+=d.Ud*b.Vd,this.y+=d.Wd*
b.Vd,b.oh(this)){if(b.sd||this.sd)this.rotation=(d.direction+0.5*Math.PI)*Math.RAD_TO_DEG,this.speed=d.speed;if(!(d.oa<d.Fj||d.Le)){for(var f;f=d.Gj.next();)switch(f.Mb){case "fire":c.nk.call(this,f,b,d,c);break;case "wait":b=0;d.Fj="number"===typeof f.value?d.oa+f.value:0!==(b=~~f.value)?d.oa+b:d.oa+eval(f.value);return;case "changeDirection":c.ik.call(this,f,b,d);break;case "changeSpeed":c.jk.call(this,f,d);break;case "accel":c.gk.call(this,f,d);break;case "vanish":this.remove();break;case "notify":c.ok.call(this,
f)}d.Le=k;d.Yf?d.Yf.Ki():this.dispatchEvent(tm.event.Event("completeattack"))}}else this.remove(),d.Le=k,d.Yf?d.Yf.Ki():this.dispatchEvent(tm.event.Event("completeattack"))}}b=function(b){var c={},d=tm.Lb.vd.Ne,f;for(f in d)d.hasOwnProperty(f)&&(c[f]=d[f]);for(f in b)b.hasOwnProperty(f)&&(c[f]=b[f]);return c}(b);b.target||h(Error("target is undefined in config."));c=c||"top";"string"===typeof c?d.Gj=this.zi.jh(c):c instanceof M.Oa?d.Gj=c.jh():(window.console.error(b,c),h(Error("\u5f15\u6570\u304c\u4e0d\u6b63")));
d.qk=this;d.Gf=b;d.Fj=-1;d.Le=w;d.direction=0;d.cj=0;d.speed=0;d.ej=0;d.Ud=0;d.Wd=0;d.ke=0;d.jd=0;d.Zg=-1;d.jf=0;d.we=0;d.$g=-1;d.Bf=0;d.zf=0;d.Cf=0;d.Af=0;d.Ug=-1;d.oa=-1;d.stop=w;d.Sf=k;return d},mk:function(b){function c(){c.stop||(this.x+=c.Oi,this.y+=c.Pi,c.Gf.oh(this)||this.remove())}b=function(b){var c={},d=tm.Lb.vd.Ne,f;for(f in d)d.hasOwnProperty(f)&&(c[f]=d[f]);for(f in b)b.hasOwnProperty(f)&&(c[f]=b[f]);return c}(b);b.target||h(Error("target is undefined in config."));c.Gf=b;c.direction=
0;c.speed=0;c.Oi=0;c.Pi=0;c.stop=w;c.Sf=k;return c},nk:function(c,d,f,A){if(this.rl===i||this.Nb){var r={label:c.Ia.label},n;for(n in c.Ia.$a)r[n]=c.Ia.$a[n];if(r=d.Gi(r)){A=(n=0===c.Ia.rb.length)?A.mk(d):A.Hf(d,c.Ia);var q=this,m={x:this.x+c.$a.offsetX,y:this.y+c.$a.offsetY};f.cj=A.direction=function(n){var g=eval(n.value)*Math.DEG_TO_RAD;switch(n.type){case "aim":return d.target?c.$a.qa?b(m,d.target)+g:b(q,d.target)+g:g-Math.PI/2;case "absolute":return g-Math.PI/2;case "relative":return f.direction+
g;default:return f.cj+g}}(c.direction||c.Ia.direction);f.ej=A.speed=function(b){var c=eval(b.value);switch(b.type){case "relative":return f.speed+c;case "sequence":return f.ej+c;default:return c}}(c.speed||c.Ia.speed);r.x=m.x;r.y=m.y;n&&(A.Oi=Math.cos(A.direction)*A.speed*d.Vd,A.Pi=Math.sin(A.direction)*A.speed*d.Vd);r.sd=!!r.sd;if(d.sd||r.sd)r.rotation=(A.direction+0.5*Math.PI)*Math.RAD_TO_DEG,r.speed=A.speed;r.addEventListener("enterframe",A);d.fe?d.fe.addChild(r):this.parent&&this.parent.addChild(r)}}},
ik:function(d,f,s){var A=eval(d.direction.value)*Math.DEG_TO_RAD,r=eval(d.Ib);switch(d.direction.type){case "aim":d=f.target;if(!d)return;s.jd=b(this,d)+A;s.ke=c(s.jd-s.direction)/r;break;case "absolute":s.jd=A-Math.PI/2;s.ke=c(s.jd-s.direction)/r;break;case "relative":s.jd=s.direction+A;s.ke=c(s.jd-s.direction)/r;break;case "sequence":s.ke=A,s.jd=s.direction+s.ke*(r-1)}s.Zg=s.oa+r},jk:function(b,c){var d=eval(b.speed.value),f=eval(b.Ib);switch(b.speed.type){case "absolute":c.we=d;c.jf=(c.we-c.speed)/
f;break;case "relative":c.we=d+c.speed;c.jf=(c.we-c.speed)/f;break;case "sequence":c.jf=d,c.we=c.speed+c.jf*f}c.$g=c.oa+f},gk:function(b,c){var d=eval(b.Ib);c.Ug=c.oa+d;if(b.Ic){var f=eval(b.Ic.value);switch(b.Ic.type){case "absolute":case "sequence":c.Bf=(f-c.Ud)/d;c.zf=f;break;case "relative":c.Bf=f,c.zf=(f-c.Ud)*d}}else c.Bf=0,c.zf=c.Ud;if(b.Lc)switch(f=eval(b.Lc.value),b.Lc.type){case "absolute":case "sequence":c.Cf=(f-c.Wd)/d;c.Af=f;break;case "relative":c.Cf=f,c.Af=(f-c.Wd)*d}else c.Cf=0,c.Af=
c.Wd},ok:function(b){var c=tm.event.Event(b.Ek);if(b.nb)for(var d in b.nb)c[d]=b.nb[d];this.dispatchEvent(c)}});var f=function(){var b=tm.graphics.Canvas();b.resize(8,8);b.setTransformCenter();b.setLineStyle(0).setStrokeStyle("rgba(0,0,0,0)");b.setFillStyle(tm.graphics.RadialGradient(0,0,0,0,0,4).addColorStopList([{offset:0,color:"white"},{offset:0.5,color:"white"},{offset:1,color:"red"}]).toStyle()).fillCircle(0,0,4);return tm.asset.Texture(b.canvas.toDataURL())}();tm.Lb.Ak=function(b){var c=tm.app.Sprite(f,
8,8);c.label=b.label;return c};var d=l;tm.Lb.Ni=function(b){if(d===l){if(!b.getRoot().app)return k;d=b.getRoot().app;console.log(d instanceof tm.app.BaseApp)}return 0<=b.x&&b.x<d.width&&0<=b.y&&b.y<d.height};tm.Lb.Ul=function(){return k};tm.Lb.vd.Ne={Gi:tm.Lb.Ak,oh:tm.Lb.Ni,fm:0,sd:w,Vd:2,target:l};M.ia.prototype.Hf=function(b){return tm.Lb.vd(this).Hf(b)}})();/*
 TM-Shooter

 License
 http://daishihmr.mit-license.org/
*/
tm.preload(K());tm.main(function(){gls2.Oj("#canvas2d");gls2.core.run()});gls2.Oj=tm.createClass({superClass:tm.display.CanvasApp,mode:0,pj:0,Ue:0,Xk:0,Zk:0,Yk:0,Vk:0,Wk:l,gd:3,uc:3,Kc:0,Ab:w,ba:l,init:function(c){gls2.core!==l&&h(Error("class 'gls2.GlShooter2' is singleton!!"));this.superInit(c);gls2.core=this;this.resize(480,640).fitWindow();this.fps=FPS;this.background="rgba(0,0,0,0)";this.Zh=[];this.keyboard=tm.input.Keyboard(window);c=tm.ui.LoadingScene({assets:{achevements:"assets/achevements.json",tex0:"assets/tex0.png",tex_bit:"assets/tex_bit.png",tex1:"assets/tex1.png",
tex2:"assets/tex2.png",tex3:"assets/tex3.png",tex4:"assets/tex4.png",tex5:"assets/tex5.png",tex_tank1:"assets/tex_tank1.png",yotsubaLeaf:"assets/tex_yotsubaLeaf.png","kanade-cannon":"assets/kanade-cannon.png",fighter:"assets/fighters.png",laserR:"assets/laser_r.png",laserG:"assets/laser_g.png",laserB:"assets/laser_b.png",laserH:"assets/laser_h.png",laserHead:"assets/laser_head.png",laserFoot:"assets/laser_foot.png",aura:"assets/aura.png",explode0:"assets/explode0.png",explode1:"assets/explode1.png",
explode2:"assets/explode2.png",shotbullet:"assets/shotbullet.png",bomb:"assets/bomb.png",bombIcon:"assets/bomb_icon.png",result_bg:"assets/result_bg.png",bgmShipSelect:"assets2/nc44200.mp3",bgm1:"assets2/nc54073.mp3",bgmLoopInfo:"assets2/loop.json","sound/explode":"assets2/sen_ge_taihou03.mp3","sound/explode2":"assets2/sen_ge_bom13.mp3","sound/explode3":"assets2/sen_ge_bom02.mp3","sound/explode4":"assets2/sen_ge_bom14.mp3","sound/explode5":"assets2/sen_ge_bom17.mp3","sound/explode6":"assets2/nc17909.mp3",
"sound/star":"assets2/se_maoudamashii_system24.mp3","sound/bomb":"assets2/sen_ge_bom17.mp3","sound/warning":"assets2/meka_ge_keihou06.mp3","sound/select":"assets2/se_maoudamashii_system36.mp3","sound/decision":"assets2/se_maoudamashii_system03.mp3","sound/achevement":"assets2/se_maoudamashii_system46.mp3","sound/voHyperStandBy":"assets/vo_hyper_standby.mp3","sound/voHyperReady":"assets/vo_hyper_ready.mp3","sound/voHyperStart0":"assets/vo_hyper_start.mp3","sound/voHyperStart1":"assets/vo_hyper_start2.mp3",
"sound/voBomb":"assets/vo_bomb.mp3","sound/voExtend":"assets/vo_extend.mp3","sound/voGetBomb":"assets/vo_getbomb.mp3","sound/voJacms":"assets/vo_jacms.mp3","sound/voLetsGo":"assets/vo_letsgo.mp3","sound/voSelectShip":"assets/vo_select_your_machine.mp3","sound/voWarning":"assets/vo_warning.mp3"},width:480,height:640,nextScene:function(){this.pk();return gls2.TitleScene()}.bind(this)});c.bg.canvas.clearColor("black");this.replaceScene(c);if(c=localStorage.getItem("tmshooter.config"))c=JSON.parse(c),
this.gd=c.bgmVolume,this.uc=c.seVolume,this.Kc=c.particleEffectLevel,this.Ab=c.bulletBig},Hi:function(){var c=window.achevements,b=tm.asset.AssetManager.get("achevements").data;return!c?0:Math.floor(c.reduce(function(c,d){return b[d]?c+N[b[d].grade]:c},0))},update:function(){for(var c=[].concat(this.Zh),b=0;b<c.length;b++)c[b].frame===this.frame?c[b].fn():this.Zh.erase(c[b])},draw:function(){this.canvas.globalCompositeOperation="copy"},pk:function(){gls2.Ba.setup(12345);"tex1 tex2 tex3 tex4 tex5 tex_tank1 yotsubaLeaf kanade-cannon".split(" ").forEach(function(c){var b=
tm.asset.AssetManager.get(c),f=tm.graphics.Canvas();f.resize(b.width,b.height);f.drawTexture(b,0,0);f=f.getBitmap();f.filter({calc:function(b,c,d,f,r){r.setPixelIndex(c,b[0],0,0)}});var d=tm.graphics.Canvas();d.resize(b.width,b.height);d.drawBitmap(f,0,0);tm.asset.AssetManager.set(c+"Red",d)});gls2.ga.setup();gls2.pa.setup();this.ba=gls2.bb();tm.asset.Loader().load({bgm2:"assets2/nc28687.mp3",bgm3:"assets2/nc80728.mp3",bgm4:"assets2/nc67876.mp3",bgm5:"assets2/nc60627.mp3",bgmBoss:"assets2/nc29206.mp3",
bgmResult:"assets2/nc54077.mp3",bgmEnding:"assets2/Blue_Moon_MIKU_Append.mp3"})},Vl:function(){this.stop()},gj:w,Lh:function(c,b){if(0===this.mode){var f=this.ba.Re.slice(0,this.ba.ya+1).average(),f={score:Math.floor(this.ba.score),stage:this.ba.ya+1,continueCount:this.ba.Uc,shipType:this.ba.ea.type,shipStyle:this.ba.ea.style,fps:f,screenShot:this.ba.Td,scoreByStage:this.ba.ad,fpsAvgByStage:this.ba.Re,missCountByStage:this.ba.$e,continueCountByStage:this.ba.Me,bombCountByStage:this.ba.ge,autoBombCountByStage:this.ba.fd,
hyperCountByStage:this.ba.Nd,hyperLevelHistory:this.ba.nh};c?(f.userName=c,this.gj=w):this.gj=k;tm.util.Ajax.load({url:"/api/ranking/post",data:f,type:"POST",dataType:"json",success:function(c){if(c)if(c.success)b(l,k,c.scoreId);else if(c.confirmLogin)if(window.confirm("login (or sign up) ?\n\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u307e\u305b\u3093\u3002\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u304b\uff1f"))window.onchildclose=function(){this.Lh(l,b);window.onchildclose=i}.bind(this),window.open("/loginByPopup",
"login","menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=400,height=400");else if(window.confirm("try anonymous submit?\n\u533f\u540d\u3067\u30b9\u30b3\u30a2\u767b\u9332\u3057\u307e\u3059\u304b\uff1f")){for(c="";""===c;)c=window.prompt("user name\n\u4eee\u306e\u30e6\u30fc\u30b6\u30fc\u540d:",this.Sk());c!==l&&(c=c.substring(0,10),this.Lh(c+" (\u533f\u540d)",b))}else b(l,w);else b("\u30b9\u30b3\u30a2\u767b\u9332\u306b\u5931\u6557\u3057\u307e\u3057\u305f\uff01\uff1e\uff1c");else b("\u30b9\u30b3\u30a2\u767b\u9332\u306b\u5931\u6557\u3057\u307e\u3057\u305f\uff01\uff1e\uff1c")}.bind(this),
error:function(){b("\u30b9\u30b3\u30a2\u767b\u9332\u306b\u5931\u6557\u3057\u307e\u3057\u305f\uff01\uff1e\uff1c")}})}},Sk:function(){return"\u540d\u7121\u3057\u30b7\u30e5\u30fc\u30bf\u30fc \u540d\u7121\u3057\u5927\u4f50 \u540d\u7121\u3057\u306b\u3083\u3093 \u540d\u7121\u3057\u305f\u305d \u540d\u7121\u3057\u2606 \u80fd\u767b\u540d\u7121\u3057 \u540d\u7121\u3057(30) \u540d\u7121\u3057\u7dcf\u7406".split(" ").pickup()},Zh:l,setTimeoutF:function(c,b){timeoutTasks.push({frame:this.frame+b,fn:c})},ta:function(c){if(0===
this.mode&&window.achevements&&-1===window.achevements.indexOf(c)){var b=tm.asset.AssetManager.get("achevements").data;if(b[c]){var f=window.achevements;-1==f.indexOf(c)&&(f.push(c),tm.util.Ajax.load({url:"/api/achevement/"+c,type:"POST",dataType:"json",success:function(){b[c]&&(gls2.va("achevement"),this.ba.$i.addChild(gls2.ki(b[c].title)))}.bind(this),error:function(){console.warn("error!")}}))}}}});
tm.display.AnimationSprite.prototype.clone=function(){return tm.app.AnimationSprite(this.ss,this.width,this.height)};gls2.Xc=function(c,b){return(c.x-b.x)*(c.x-b.x)+(c.y-b.y)*(c.y-b.y)};gls2.pause=function(){gls2.core&&gls2.core.currentScene===gls2.bb.Ce&&gls2.bb.Ce.cf(0)};var FPS=60,S=[1E9,1E10],T=[3,2,1,5],V=[6,4,2,99],W=[1,3,5,10,18,26,42,66,90,130,200],X=[1,1,2,3,4,8,16,20,24,32,40],N=[0.1,0.4,1];(function(){var c=l,b={"0":{x:1,y:0},45:{x:0.7,y:-0.7},90:{x:0,y:-1},135:{x:-0.7,y:-0.7},180:{x:-1,y:0},225:{x:-0.7,y:0.7},270:{x:0,y:1},315:{x:0.7,y:0.7}};gls2.ti=tm.createClass({superClass:tm.display.Sprite,type:0,style:0,Za:0,Gc:k,Ie:k,eb:w,ba:l,speed:0,Rb:l,je:l,kj:l,Pf:l,Ub:l,kh:l,Ec:l,lh:l,mh:l,frame:0,init:function(b,d,j){this.superInit("fighter",64,64);this.ba=b;this.type=d;this.style=j;tm.Lb.vd.Ne.target=this;this.speed=[6,5,4.5][d];this.boundingRadius=2===j||3===j?2:7;this.altitude=10;this.je=
this.kj=gls2.xi(d,100);this.Pf=gls2.xi(3,100);this.Ub=gls2.pi(this,{redBody:"laserR",greenBody:"laserG",blueBody:"laserB",hyperBody:"laserH",head:"laserHead",foot:"laserFoot",aura:"aura"});this.Ub.visible=w;this.lk();this.Rb=this.kk();1===this.style&&(this.Rb=[this.Rb[1],this.Rb[2]]);this.Ec=tm.display.CanvasElement().addChildTo(this);d=0;for(j=this.Rb.length;d<j;d++){var p=this.Rb[d];gls2.Hj(this,p).setPosition(p.x,p.y).addChildTo(this.Ec)}this.fl=tm.display.CircleShape(140,140,{strokeStyle:"rgba(0,0,0,0)",
fillStyle:tm.graphics.RadialGradient(70,70,0,70,70,70).addColorStopList([{offset:0,color:"rgba(255,255,255,0.1)"},{offset:0.5,color:"rgba(255,255,255,0.1)"},{offset:1,color:"rgba(255,255,255,0.0)"}]).toStyle()}).addChildTo(this);this.fl.blendMode="lighter";this.lh=tm.display.CircleShape(80,80,{fillStyle:"rgba(0,0,0,0)",strokeStyle:tm.graphics.LinearGradient(0,0,0,80).addColorStopList([{offset:0,color:"rgba(255,255,100,0.0)"},{offset:0.4,color:"rgba(255,255,100,0.1)"},{offset:0.5,color:"rgba(255,255,255,1.0)"},
{offset:0.6,color:"rgba(255,255,100,0.1)"},{offset:1,color:"rgba(255,255,100,0.0)"}]).toStyle(),lineWidth:4}).addChildTo(this);this.lh.blendMode="lighter";this.lh.update=function(){this.rotation+=2;this.visible=0<b.Wa&&!b.Ma};this.mh=tm.display.CircleShape(80,80,{fillStyle:"rgba(0,0,0,0)",strokeStyle:tm.graphics.LinearGradient(0,0,0,80).addColorStopList([{offset:0,color:"rgba(255,255,100,0.0)"},{offset:0.4,color:"rgba(255,255,100,0.1)"},{offset:0.5,color:"rgba(255,255,255,1.0)"},{offset:0.6,color:"rgba(255,255,100,0.1)"},
{offset:1,color:"rgba(255,255,100,0.0)"}]).toStyle(),lineWidth:4}).addChildTo(this);this.mh.blendMode="lighter";this.mh.update=function(){this.rotation-=2;this.visible=0<b.Wa&&!b.Ma};this.Ve=tm.display.CanvasElement(80,80).addChildTo(this);this.Ve.blendMode="lighter";this.Ve.rotation=-90;this.Ve.strokeStyle="rgba(180,180,255,0.4)";this.Ve.update=function(){this.visible=b.Ma};this.Ve.draw=function(c){c.lineCap="round";var d=b.ne/800;c.strokeStyle="rgba(50,50,255,0.4)";c.lineWidth="12";c.strokeArc(0,
0,40,0,2*d*Math.PI,w);c.strokeStyle="rgba(100,100,255,0.4)";c.lineWidth="8";c.strokeArc(0,0,40,0,2*d*Math.PI,w);c.strokeStyle="rgba(180,180,255,0.4)";c.lineWidth="4";c.strokeArc(0,0,40,0,2*d*Math.PI,w)};this.$k=tm.display.CircleShape(80,80,{fillStyle:tm.graphics.RadialGradient(40,40,0,40,40,35).addColorStopList([{offset:0,color:"rgba(0,0,50,0.0)"},{offset:0.9,color:"rgba(0,0,50,0.8)"},{offset:1,color:"rgba(0,0,50,0.0)"}]).toStyle(),strokeStyle:"rgba(0,0,0,0)"}).addChildTo(this);this.$k.update=function(){this.visible=
b.Ma};c===l&&(c=gls2.bi(this.ba.ka))},kk:function(){if(0===this.type)return[{x:0,Id:0,y:40,d:0,jc:k,cc:-0.7,v:k},{x:0,Id:0,y:40,d:0,jc:k,cc:0.5,v:k},{x:0,Id:0,y:40,d:0,jc:k,cc:-0.5,v:k},{x:0,Id:0,y:40,d:0,jc:k,cc:0.7,v:k}];if(1===this.type)return[{x:-70,y:20,d:0.1,jc:w,cc:-0.7,v:k},{x:-40,y:40,d:0.1,jc:w,cc:-0.5,v:k},{x:40,y:40,d:0.1,jc:k,cc:0.5,v:k},{x:70,y:20,d:0.1,jc:k,cc:0.7,v:k}];if(2===this.type)return[{x:-60,y:40,d:0.6,jc:w,cc:-0.7,v:k},{x:-30,y:20,d:0.4,jc:w,cc:-0.5,v:k},{x:30,y:20,d:0.4,
jc:k,cc:0.5,v:k},{x:60,y:40,d:0.6,jc:k,cc:0.7,v:k}]},lk:function(){this.kh=tm.display.Sprite("tex0",20,20).addChildTo(this);this.kh.setFrameIndex(5);this.kh.update=function(b){b=1.2+0.15*Math.sin(0.2*b.frame);this.scale.set(b,b)}},pd:-1,Ld:w,Tb:w,update:function(f){this.visible=this.eb?0===f.frame/2%2:k;var d=f.keyboard;if(this.Gc){var j=d.getKeyAngle();j!==l&&(j=b[j],this.x+=j.x*this.speed*(this.Tb?0.5:1),this.y+=j.y*this.speed*(this.Tb?0.5:1));this.x=gls2.la.clamp(this.x,15,465);this.y=gls2.la.clamp(this.y,
15,625);var p=d.getKey("c")&&this.Ie;if(j=d.getKey("z")&&this.Ie)this.ba.Nh=k;this.pd=p?this.pd+1:this.pd-1;this.pd=gls2.la.clamp(this.pd,-1,10);this.Tb=j&&p||10===this.pd;p=this.ba.Ma?3:5;this.Ld=!this.Tb&&(0<=this.pd||j)&&0===f.frame%p;j&&(this.pd=0);3===this.style&&this.Tb&&(this.Ld=0===f.frame%p);this.Ub.x=this.x;this.Ub.y=this.y-40;if(d.getKeyDown("x")&&this.Ie)if(0<this.ba.Wa&&!this.ba.Ma)this.ba.Hl(),gls2.fk(this).addChildTo(this.ba);else if(!this.ba.Od&&0<this.ba.Sb){this.Ob=gls2.la.clamp(this.Ob-
2,0,1);this.ba.Ge(-0.02);gls2.di(this,this.ba).setPosition(gls2.la.clamp(this.x,96,384),Math.max(this.y-320,192)).addChildTo(this.ba);gls2.core.ta("bomb1");for(j=0;j<gls2.Oa.fb.length;j++)p=gls2.Oa.fb[j],p.visible!==w&&225>(this.x-p.x)*(this.x-p.x)+(this.y-p.y)*(this.y-p.y)&&gls2.core.ta("nicebomb");this.ba.ge[this.ba.ya]+=1}}else this.Tb=this.Ld=w;this.Ld&&(j=Math.sin(0.2*f.frame),p=this.je.fire(this.x-7-6*j,this.y-5,-90),p!==l&&p.addChildTo(this.ba),p=this.je.fire(this.x+7+6*j,this.y-5,-90),p!==
l&&p.addChildTo(this.ba));if(this.Tb&&3!==this.style){j=0;for(p=this.Rb.length;j<p;j++)this.Rb[j].v=w;this.Ec.rotation=0}else{j=0;for(p=this.Rb.length;j<p;j++)this.Rb[j].v=k}this.zk(d);this.hk(d,f.frame);0===f.frame%2&&(c.clone(20).setPosition(this.x-5,this.y+20).addChildTo(this.ba),c.clone(20).setPosition(this.x+5,this.y+20).addChildTo(this.ba));this.frame=f.frame},Wc:function(){this.Tb=this.Ld=w;this.ba.If();this.ba.tb=0;this.ba.mb=0;this.ba.Va=0},zk:function(b){if(0===this.type)for(b=this.Rb.length;this.Rb[--b]!==
i;){var c=this.Rb[b];0===b?c.x=c.Id+60*Math.cos(0.1*this.frame):1===b?c.x=c.Id+-60*Math.cos(0.1*this.frame):2===b?c.x=c.Id+60*Math.sin(0.1*this.frame):3===b&&(c.x=c.Id+-60*Math.sin(0.1*this.frame))}else 1===this.type&&(c=this.Ec,c.rotation=!this.Tb||3!==this.style?this.Gc&&b.getKey("left")?Math.max(c.rotation-3,-50):this.Gc&&b.getKey("right")?Math.min(c.rotation+3,50):3<c.rotation?c.rotation-3:-3>c.rotation?c.rotation+3:0:0)},hk:function(b,c){this.Gc&&b.getKey("left")?this.Za=gls2.la.clamp(this.Za-
0.2,-3,3):this.Gc&&b.getKey("right")?this.Za=gls2.la.clamp(this.Za+0.2,-3,3):0>this.Za?this.Za=gls2.la.clamp(this.Za+0.2,-3,3):0<this.Za&&(this.Za=gls2.la.clamp(this.Za-0.2,-3,3));0===this.type?this.setFrameIndex(3+~~this.Za):1===this.type?this.setFrameIndex(10+7*(~~(c/2)%3)+~~this.Za):2===this.type&&this.setFrameIndex(31+~~this.Za);return c}});gls2.Hj=tm.createClass({superClass:tm.display.AnimationSprite,Fd:l,ea:l,init:function(b,c){this.superInit(tm.asset.SpriteSheet({image:"tex_bit",frame:{width:32,
height:32},animations:{anim0:{frames:[0,1,2,3,4,5],next:"anim0",frequency:3},anim1:{frames:[1,2,3,4,5,0].reverse(),next:"anim1",frequency:3}}}),32,32);this.Fd=c;this.ea=b;this.altitude=10;this.gotoAndPlay(c.jc?"anim0":"anim1")},update:function(b){if(this.Fd.v){this.x=this.Fd.x*(this.ea.ba.Ma?1.5:1);this.y=this.Fd.y*(this.ea.ba.Ma?1.5:1);this.rotation=Math.radToDeg(this.Fd.d*this.Fd.cc);var d=this.parent.localToGlobal(this);this.Fd.v&&0===b.frame%2&&c.clone(40).setPosition(d.x,d.y).addChildTo(this.ea.ba);
this.ea.Ld&&(d=this.ea.je.fire(d.x,d.y,this.parent.rotation+this.rotation-90),d!==l&&d.addChildTo(b.ba))}else this.x=0,this.y=-40,this.currentFrameIndex=3}})})();(function(){var c=l;gls2.de=tm.createClass({superClass:tm.display.Sprite,speed:0,Cd:0,vk:1,Zi:0,jb:k,init:function(b){this.superInit("shotbullet",64,64);this.blendMode="lighter";this.alpha=0.5;this.Cd=1;c===l&&(c=gls2.Ra(16,1,0.9,tm.graphics.Canvas().resize(16,16).setFillStyle(tm.graphics.RadialGradient(8,8,0,8,8,8).addColorStopList([{offset:0,color:"rgba(255,255,255,1.0)"},{offset:1,color:"rgba(255,128,  0,0.0)"}]).toStyle()).fillRect(0,0,16,16).element));b!==i&&this.hf(b)},update:function(){this.x+=
this.bd;this.y+=this.wc;(-60>this.x||540<this.x||-60>this.y||700<this.y)&&this.remove()},hf:function(b){this.setFrameIndex(b,64,64);3===b?(this.speed=45,this.boundingRadius=52):(this.speed=30,this.boundingRadius=36)},Mf:function(b){for(var d=0;d<b;d++){var j=c.clone().setPosition(this.x,this.y).addChildTo(this.parent),p=gls2.la.randf(2,8),s=2*Math.random()*Math.PI;j.Da=Math.cos(s)*p;j.Ea=Math.sin(s)*p;j.scaleX=j.scaleY=(gls2.la.randf(0.1,0.5)+gls2.la.randf(0.1,0.5))/2;j.addEventListener("enterframe",
function(){this.x+=this.Da;this.y+=this.Ea;this.Da*=0.9;this.Ea*=0.9})}}});gls2.de.Ke=function(){for(var c=[].concat(b),d=0,j=c.length;d<j;d++)c[d].remove()};var b=gls2.de.fb=[];gls2.xi=tm.createClass({od:l,Xi:w,init:function(c,d){this.Xi=3===c;this.od=[];for(var j=0;j<d;j++){var p=gls2.de(c),s=this;p.addEventListener("added",function(){this.ra=10;b.push(this)});p.addEventListener("removed",function(){var c=b.indexOf(this);-1!==c&&b.splice(c,1);s.od.push(this)});this.Xi&&p.addEventListener("enterframe",
function(b){this.setScale((this.vk+this.Zi)*(0===b.app.frame%2?1:1.2))});this.od.push(p)}},fire:function(b,c,j){var p=this.od.pop();if(p===i)return l;var s=gls2.la.degToRad(j);p.bd=Math.cos(s)*p.speed;p.wc=Math.sin(s)*p.speed;p.setPosition(b,c);p.rotation=j+90;return p},ue:function(b){for(var c=this.od.length;this.od[--c]!==i;)this.od[c].Cd=1+0.1*b,this.od[c].Zi=0.2*b}})})();gls2.pi=tm.createClass({superClass:tm.display.Sprite,ea:l,ba:l,Dc:0,frame:0,wj:l,color:l,Ei:0,Vg:0,wk:w,head:l,Ti:l,sb:l,jb:k,Cd:1,qe:l,init:function(c,b){this.ea=c;this.ba=c.ba;this.Ei=0===this.ea.style?1:1.2;this.Vg=0===this.ea.style?50:75;var f=this;this.wj=b;this.superInit(b.redBody,this.Vg,100);this.boundingHeightBottom=1;this.hm=0;this.origin.y=1;var d=this.sb=tm.display.AnimationSprite(tm.asset.SpriteSheet({image:b.aura,frame:{width:100,height:100},animations:{red:{frames:[0,1,2,3],next:"red",
frequency:2},green:{frames:[4,5,6,7],next:"green",frequency:2},blue:{frames:[8,9,10,11],next:"blue",frequency:2},hyper:{frames:[12,13,14,15],next:"hyper",frequency:2}}}),140,140);d.y=60;d.addChildTo(this);(this.Ti=tm.display.AnimationSprite(tm.asset.SpriteSheet({image:b.foot,frame:{width:120,height:80},animations:{red:{frames:[0,1,2,3],next:"red",frequency:2},green:{frames:[4,5,6,7],next:"green",frequency:2},blue:{frames:[8,9,10,11],next:"blue",frequency:2},hyper:{frames:[12,13,14,15],next:"hyper",
frequency:2}}}),140,80)).addChildTo(this);d=this.head=tm.display.AnimationSprite(tm.asset.SpriteSheet({image:b.head,frame:{width:80,height:80},animations:{red:{frames:[0,1,2,3],next:"red",frequency:2},green:{frames:[4,5,6,7],next:"green",frequency:2},blue:{frames:[8,9,10,11],next:"blue",frequency:2},hyper:{frames:[12,13,14,15],next:"hyper",frequency:2}}}),130,130);d.addChildTo(this);d.update=function(){this.y=f.Dc-f.y;-10<this.y&&(this.y=-10);this.visible=0<f.Dc};this.hf(["red","green","blue"][this.ea.type]);
this.ue(0)},hf:function(c){this.color=c;this.image=tm.asset.AssetManager.get(this.wj[this.color+"Body"]);this.srcRect.x=0;this.srcRect.y=0;this.srcRect.width=this.image.width/16;this.sb.gotoAndPlay(this.color);this.Ti.gotoAndPlay(this.color);this.head.gotoAndPlay(this.color);this.qe=l;return this},ue:function(c){this.boundingWidth=this.width=this.Vg+30*c/10;this.head.setScale(0.02*this.width,0.02*this.width);this.Cd=1*this.Ei+0.25*c;0===c?this.hf(["red","green","blue"][this.ea.type]):this.hf("hyper")},
Mf:function(c,b){this.qe===l&&this.Li();b=b||this.Dc;for(var f=0;f<c;f++){var d=this.qe.clone().setPosition(this.x,b).addChildTo(this.ba),j=gls2.la.randf(8,14),p=gls2.la.randf(0,Math.PI);d.Da=Math.cos(p)*j;d.Ea=Math.sin(p)*j;d.scaleX=d.scaleY=(gls2.la.randf(0.5,1.5)+gls2.la.randf(0.5,1.5))/2;d.addEventListener("enterframe",function(){this.x+=this.Da;this.y+=this.Ea;this.Da*=0.95;this.Ea*=0.95})}},Ok:function(c,b,f){this.qe===l&&this.Li();for(var d=0;d<c;d++){var j=this.qe.clone().setPosition(b,f).addChildTo(this.ba),
p=gls2.la.randf(12,20),s=gls2.la.randf(0,Math.PI);j.Da=Math.cos(s)*p;j.Ea=Math.sin(s)*p;j.scaleX=j.scaleY=(gls2.la.randf(1,3)+gls2.la.randf(1,3))/2;j.addEventListener("enterframe",function(){this.x+=this.Da;this.y+=this.Ea;this.Da*=0.95;this.Ea*=0.95})}},Li:function(){this.qe="hyper"===this.color?gls2.Ra(16,1,0.9,tm.graphics.Canvas().resize(16,16).setFillStyle(tm.graphics.RadialGradient(8,8,0,8,8,8).addColorStopList([{offset:0,color:"rgba(255,255,255,1.0)"},{offset:1,color:"rgba(255,255,0,0.0)"}]).toStyle()).fillRect(0,
0,16,16).element):gls2.Ra(16,1,0.9,tm.graphics.Canvas().resize(16,16).setFillStyle(tm.graphics.RadialGradient(8,8,0,8,8,8).addColorStopList([{offset:0,color:"rgba(255,255,255,1.0)"},{offset:1,color:["rgba(255,0,0,0.0)","rgba(0,255,0,0.0)","rgba(0,0,255,0.0)"][this.ea.type]}]).toStyle()).fillRect(0,0,16,16).element)},update:function(c){(this.visible=this.ea.Tb)?(this.Dc=Math.max(0,this.Dc-40),this.height=this.y-this.Dc,0===c.frame%3&&(this.frame=(this.frame+1)%16)):this.Dc=this.y-40;this.wk=this.visible},
draw:function(c){var b=this.srcRect,f=this._image.element;b.x=b.width*this.frame;c.context.drawImage(f,b.x,b.height-this.height,b.width,this.height,-this.width*this.origin.x,-this.height*this.origin.y,this.width,this.height)},Yl:function(){return this.Dc},Bl:function(c){this.Dc=c;this.head.update()}});gls2.pi.prototype.getter("boundingHeightTop",function(){return this.position.y-this.Dc});(function(){gls2.di=tm.createClass({superClass:tm.app.Object2D,jb:k,ba:l,init:function(b,f){this.superInit();this.ea=b;this.ba=f;this.rj=tm.display.CircleShape(300,300,{strokeStyle:"rgba(0,0,0,0)",fillStyle:tm.graphics.RadialGradient(150,150,0,150,150,150).addColorStopList([{offset:0,color:"rgba(255,255,255,0)"},{offset:0.5,color:"rgba(255,255,255,0)"},{offset:0.9,color:"rgba(255,255,255,1)"},{offset:1,color:"rgba(255,255,255,0)"}]).toStyle()}).setScale(0.1,0.1).addChildTo(this);this.rj.tweener.clear().to({scaleX:5,
scaleY:5,alpha:0},500,"easeOutQuad").call(function(){this.remove()}.bind(this.rj));this.Di();c===l&&(c=gls2.Ra(60,1,0.92,tm.graphics.Canvas().resize(10,10).setFillStyle(tm.graphics.RadialGradient(5,5,0,5,5,5).addColorStopList([{offset:0,color:"rgba(255,255,255,1.0)"},{offset:1,color:"rgba(  0,  0,255,0.0)"}]).toStyle()).fillRect(0,0,10,10).element));this.r=this.a=0;this.b=8;this.oa=0;this.df=1;this.addEventListener("added",function(){this.ba.Od=k;this.ea.eb=k;this.ba.Sb-=1;this.ba.Rf=w;this.ba.If();
this.ba.Fb("drop BOMBER!!",k);gls2.va("bomb");gls2.va("voBomb")});this.addEventListener("removed",function(){this.ba.Od=w;this.ea.eb=w})},Di:function(){this.core=tm.display.AnimationSprite(tm.asset.SpriteSheet({image:"bomb",frame:{width:280,height:280},animations:{animation:{frames:Array.range(0,8),next:"animation",frequency:3}}}),400,400).addChildTo(this);this.core.gotoAndPlay("animation");this.core.blendMode="lighter";this.core.setScale(0.1,0.1);this.core.tweener.clear().to({scaleX:1,scaleY:1},
200,"easeOutBack").call(function(){this.update=function(){this.scaleX=this.scaleY=gls2.la.randf(0.9,1.1)}}.bind(this.core))},update:function(){for(var b=0;b<this.b;b++){var f=this.a*this.df+2*b*Math.PI/this.b;c.clone().setPosition(Math.cos(f)*this.r+this.x,Math.sin(f)*this.r+this.y).addChildTo(this.parent)}this.a+=0.04;b=0.015*this.oa;this.r=250*Math.sin(b);2*Math.PI<b?this.remove():Math.PI<b?(this.b=16,this.oa+=3.6,this.df=-1):(this.b=8,this.oa+=1.8,this.df=1)}});gls2.qi=tm.createClass({superClass:gls2.di,
init:function(b,c){this.superInit(b,c);this.addEventListener("added",function(){this.ba.Sb=0})},Di:function(){this.core=tm.display.AnimationSprite(tm.asset.SpriteSheet({image:"bomb",frame:{width:280,height:280},animations:{animation:{frames:Array.range(0,8),next:"animation",frequency:3}}}),400,400).addChildTo(this);this.core.gotoAndPlay("animation");this.core.blendMode="lighter";this.core.setScale(0.1,0.1);this.core.tweener.clear().to({scaleX:0.5,scaleY:0.5},200,"easeOutBack").call(function(){this.update=
function(){this.scaleX=this.scaleY=gls2.la.randf(0.4,0.6)}}.bind(this.core))},update:function(){for(var b=0;b<this.b;b++){var f=this.a*this.df+2*b*Math.PI/this.b;c.clone().setPosition(Math.cos(f)*this.r+this.x,Math.sin(f)*this.r+this.y).setScale(0.7,0.7).addChildTo(this.parent)}this.a+=0.04;b=0.04*this.oa;this.r=100*Math.sin(b);Math.PI<b?this.remove():(this.b=8,this.oa+=1.8,this.df=1)}});var c=l})();gls2.ei=tm.createClass({superClass:tm.display.Sprite,bd:0,wc:0,ea:l,oa:0,init:function(c,b,f){this.superInit("tex3",64,64);this.setFrameIndex(1,64,64);this.setPosition(c,b);this.ea=f;this.wc=1;this.bd=0.5>gls2.Ba.random()?-1:1;this.oa=0},update:function(){this.x+=this.bd;this.y+=2*this.wc;if(2025>gls2.Xc(this,this.ea))this.ea.ba.tk(1),this.remove();else if(3E3>this.oa){if(30>this.x||450<this.x)this.bd*=-1;if(30>this.y||610<this.y)this.wc*=-1}else(-20>this.x||500<this.x||-20>this.y||660<this.y)&&this.remove();
this.oa+=1}});
gls2.ii=tm.createClass({superClass:tm.display.Sprite,bd:0,wc:0,ea:l,oa:0,labels:l,init:function(c,b,f){this.superInit("tex3",64,64);this.setFrameIndex(8,64,64);this.labels=[];for(var d=-1;1>=d;d++)for(var j=-1;1>=j;j++)this.labels.push(tm.display.Label("1 up",30).setFillStyle("hsla(180, 60%, 60%, 0.2)").setPosition(d,j).addChildTo(this));this.setPosition(c,b);this.ea=f},update:function(c){this.y+=0.5;4096>gls2.Xc(this,this.ea)&&(this.ea.ba.Qi(),gls2.core.ta("extend3"),this.remove());704<this.y&&this.remove();
this.labels.forEach(function(b){b.setScale(1+0.3*Math.sin(0.2*c.frame))})}});gls2.pa={};
gls2.pa.setup=function(){gls2.Dk={};gls2.pa.explosion=Array.range(0,3).map(function(c){return tm.display.AnimationSprite(tm.asset.SpriteSheet({image:"explode"+c,frame:{width:100,height:100},animations:{"default":{frame:Array.range(0,64),next:l}}},100,100))});gls2.Dk.explodeL=tm.display.AnimationSprite(tm.asset.SpriteSheet({image:"explode0",frame:{width:100,height:100},animations:{"default":{frame:Array.range(0,64),next:l,frequency:3}}},100,100));gls2.pa.shockwaveImage=tm.graphics.Canvas().resize(100,100).setStrokeStyle("rgba(0,0,0,0)").setFillStyle(tm.graphics.RadialGradient(50,
50,0,50,50,50).addColorStopList([{offset:0,color:"rgba(255,255,255,0)"},{offset:0.7,color:"rgba(255,255,255,0)"},{offset:0.95,color:"rgba(255,255,255,1)"},{offset:1,color:"rgba(255,255,255,0)"}]).toStyle()).fillCircle(50,50,50);gls2.pa.shockwaveImage=tm.graphics.Canvas().resize(100,100).setStrokeStyle("rgba(0,0,0,0)").setFillStyle(tm.graphics.RadialGradient(50,50,0,50,50,50).addColorStopList([{offset:0,color:"rgba(255,255,255,0)"},{offset:0.7,color:"rgba(255,255,255,0)"},{offset:0.95,color:"rgba(255,255,255,1)"},
{offset:1,color:"rgba(255,255,255,0)"}]).toStyle()).fillCircle(50,50,50);gls2.pa.particle16=gls2.Ra(16,1,0.9,tm.graphics.Canvas().resize(16,16).setFillStyle(tm.graphics.RadialGradient(8,8,0,8,8,8).addColorStopList([{offset:0,color:"rgba(255,255,255,1.0)"},{offset:1,color:"rgba(255,128,  0,0.0)"}]).toStyle()).fillRect(0,0,16,16).element)};
gls2.pa.Mf=function(c,b,f){c=gls2.pa.particle16.clone().setPosition(c,b);c.jb=k;c.addChildTo(f);f=gls2.la.randf(5,20);b=gls2.la.randf(Math.PI,2*Math.PI);c.Da=Math.cos(b)*f;c.Ea=Math.sin(b)*f;c.scaleX=c.scaleY=(gls2.la.randf(0.1,0.5)+gls2.la.randf(0.1,0.5))/2;c.addEventListener("enterframe",function(){this.x+=this.Da;this.y+=this.Ea;this.Da*=0.9;this.Ea*=0.9})};
gls2.pa.ih=function(c,b,f,d){d=d||1.8;var j=tm.display.Sprite().setPosition(c,b).setScale(0.1).setBlendMode("lighter");j.jb=k;j.addChildTo(f);j.image=gls2.pa.shockwaveImage;j.tweener.clear().to({scaleX:d,scaleY:d,alpha:0},800,"easeOutQuad").call(function(){j.remove()})};gls2.pa.Qk=function(c,b,f){var d=tm.display.Sprite().setPosition(c,b).setScale(3).setBlendMode("lighter");d.jb=k;d.addChildTo(f);d.image=gls2.pa.shockwaveImage;d.tweener.clear().to({scaleX:0.1,scaleY:0.1,alpha:0},800,"easeOutQuad").call(function(){d.remove()})};
gls2.pa.Pk=function(c,b,f){c=tm.display.CircleShape(300,300,{strokeStyle:"rgba(0,0,0,0)",fillStyle:tm.graphics.RadialGradient(150,150,0,150,150,150).addColorStopList([{offset:0,color:"rgba(255,255,255,0)"},{offset:0.5,color:"rgba(255,255,255,0)"},{offset:0.9,color:"rgba(255,255,255,1)"},{offset:1,color:"rgba(255,255,255,0)"}]).toStyle()}).setPosition(c,b).setScale(0.1,0.1);c.jb=k;c.addChildTo(f);c.tweener.clear().to({scaleX:5,scaleY:5,alpha:0},500,"easeOutQuad").call(function(){this.remove()}.bind(c))};
gls2.pa.Jf=function(c,b,f,d){gls2.va("explode");var j=gls2.pa.explosion.random().clone().addEventListener("animationend",function(){this.remove()}).setScale(0.75).setPosition(c,b).setRotation(360*Math.random()).gotoAndPlay();j.jb=k;if(d!==i){var p=d.x,s=d.y;j.addEventListener("enterframe",function(){this.x+=p;this.y+=s;p*=0.99;s*=0.99})}j.addChildTo(f);gls2.pa.ih(c,b,f)};
gls2.pa.Gk=function(c,b,f){gls2.va("explode");var d=gls2.pa.explosion.random().clone().addEventListener("animationend",function(){this.remove()}).addEventListener("enterframe",function(){this.scaleX+=0.01;this.scaleY+=0.01}).setScale(0.5).setPosition(c,b).setRotation(360*Math.random()).gotoAndPlay();d.jb=k;d.addChildTo(f);d=gls2.pa.explosion.random().clone().addEventListener("animationend",function(){this.remove()}).addEventListener("enterframe",function(){this.rotation+=2;this.x+=0.7;this.y-=0.3;
this.scaleX+=0.01;this.scaleY+=0.01}).setScale(0.5).setPosition(c+12,b).setRotation(360*Math.random()).gotoAndPlay();d.jb=k;d.addChildTo(f);d=gls2.pa.explosion.random().clone().addEventListener("animationend",function(){this.remove()}).addEventListener("enterframe",function(){this.rotation-=2;this.x-=0.7;this.y-=0.3;this.scaleX+=0.01;this.scaleY+=0.01}).setScale(0.5).setPosition(c-12,b).setRotation(360*Math.random()).gotoAndPlay();d.jb=k;d.addChildTo(f)};
gls2.pa.ib=function(c,b,f){gls2.va("explode2");gls2.va("explode3");for(var d=~~(Math.random()*gls2.bc.noise.length),j=0;20>j;j++){var p=gls2.pa.explosion.random().clone().addEventListener("animationend",function(){this.remove()}).addEventListener("enterframe",function(){this.x+=Math.cos(this.a)*this.v;this.y+=Math.sin(this.a)*this.v;this.scaleX+=0.01;this.scaleY+=0.01}).setScale(0.7).setPosition(c,b).setRotation(360*Math.random()).gotoAndPlay();p.a=2*Math.PI*Math.random();p.v=10*Math.pow(gls2.bc.noise.at(~~(gls2.bc.noise.length*
j/20)+d),2);p.jb=k;p.addChildTo(f)}gls2.pa.ih(c,b,f,5)};
gls2.pa.kd=function(c,b,f){gls2.va("explode2");gls2.va("explode3");for(var d=~~(Math.random()*gls2.bc.noise.length),j=0;20>j;j++)for(var p=2*Math.PI*j/20,s=Math.pow(gls2.bc.noise.at(~~(gls2.bc.noise.length*j/20)+d),2),A=0;3>A;A++){var r=4*s*(A+1),n=gls2.pa.explosion.random().clone().addEventListener("animationend",function(){this.remove()}).addEventListener("enterframe",function(){this.x+=Math.cos(this.a)*this.v;this.y+=Math.sin(this.a)*this.v;this.scaleX+=0.01;this.scaleY+=0.01;this.oa+=1}).setScale(0.3*
(3-A)).setPosition(c,b).setRotation(360*Math.random()).gotoAndPlay();n.rotation=2*Math.random()*Math.PI;n.jb=k;n.oa=0;n.a=p;n.v=r;n.addChildTo(f)}};
gls2.xd=tm.createClass({superClass:tm.app.Object2D,target:l,tc:0,angle:0,jb:k,alpha:1,reverse:w,init:function(c,b){this.superInit();this.target=c;this.reverse=b;this.angle=0;this.tc=b?0:200;this.alpha=b?1:0;this.on("added",function(){gls2.xd.hh?this.remove():gls2.xd.hh=k});this.on("removed",function(){gls2.xd.hh=w})},update:function(c){if(this.target.parent===l)this.remove();else{if(0===c.frame%3)for(c=0;8>c;c++){var b=this.angle+2*c/6*Math.PI;gls2.Ra(120,this.alpha,0.9).setPosition(Math.cos(b)*this.tc+
this.target.x,Math.sin(b)*this.tc+this.target.y).addChildTo(this.target.parent)}this.angle+=0.05;this.tc+=4*(this.reverse?1:-1);this.alpha+=0.02*(this.reverse?-1:1);(0>this.tc||600<this.tc)&&this.remove()}}});gls2.xd.hh=w;
gls2.fk=tm.createClass({superClass:tm.app.Object2D,target:l,angle:0,jb:k,init:function(c){this.superInit();this.target=c;this.angle=0},update:function(){if(this.target.parent===l)this.remove();else{for(var c=0;5>c;c++){var b=gls2.Ra(80,1,0.9).setPosition(40*Math.cos(this.angle-0.5*Math.PI)+this.target.x+gls2.la.rand(-2,2),40*Math.sin(this.angle-0.5*Math.PI)+this.target.y+gls2.la.rand(-2,2)).on("enterframe",function(){this.x+=this.Da;this.y+=this.Ea}).addChildTo(this.target.parent);b.Da=3*Math.cos(this.angle);
b.Ea=3*Math.sin(this.angle)}this.angle+=0.2;2*Math.PI<this.angle&&this.remove()}}});
gls2.ki=tm.createClass({superClass:tm.display.RectangleShape,label:l,init:function(c){this.superInit(480,40,{fillStyle:"rgba(0, 0, 0, 0.3)",strokeStyle:"transparent"});this.setPosition(0.5*this.width,640-0.5*this.height);this.label=tm.display.Label("\u30c8\u30ed\u30d5\u30a3\u30fc\u300c"+c+"\u300d\u3092\u7372\u5f97\uff01",20).setFontWeight("bold").setAlign("left").setBaseline("middle").setPosition(480,0).setFillStyle("rgba(255, 255, 255, 0.5)").addChildTo(this);this.star=tm.display.Sprite("tex3",64,
64).setScale(0.3).setFrameIndex(0).setPosition(-20,0).addChildTo(this.label)},onadded:function(){if(this.parent instanceof tm.app.Scene)this.parent.one("exit",function(){this.parent&&this.remove()}.bind(this))},update:function(){this.alpha=576<gls2.core.ba.ea.y?0.1:1;this.label.x-=2;-960>this.label.x&&this.remove()}});
gls2.tf=tm.createClass({superClass:tm.app.Object2D,jb:k,fe:l,oa:0,init:function(c,b,f){this.superInit();this.fe=f;this.setPosition(c,b);this.addChildTo(f)},onadded:function(){for(var c=w,b=0;30>b;b++){var f=360*Math.random(),d=50*gls2.bc.noise[Math.floor(gls2.bc.noise.length*f/360)];tm.geom.Vector2(this.x,this.y);f=tm.geom.Vector2().setAngle(f,d);for(d=0;7>d;d++){var j=tm.display.Sprite("explode"+Math.floor(3*Math.random()),100,100).setPosition(this.x,this.y).setScale(1+3*Math.random()).setRotation(360*
Math.random());j.Da=0.02*f.x*(8-d);j.Ea=0.02*f.y*(8-d);j.me=3*-d+Math.floor(-10*Math.random()-7);j.update=function(){this.me+=0.3;0>this.me?this.visible=w:64<=this.me?this.remove():(c||(c=k,gls2.va("explode6")),this.setFrameIndex(Math.floor(this.me)),this.visible=k,this.x+=this.Da,this.y+=this.Ea,this.blendMode=10>this.me?"lighter":"source-over")};j.jb=k;j.addChildTo(this.fe)}}j=gls2.Ra(500,0.001,1.003);for(b=0;80>b;b++){var f=360*Math.random(),d=15*gls2.bc.noise[Math.floor(gls2.bc.noise.length*f/
360)],p=j.clone().setPosition(this.x,this.y).addChildTo(this.fe);p.Xd=tm.geom.Vector2().setAngle(f,d);p.position.add(tm.geom.Vector2.mul(p.Xd,-40));p.setScale(0.1,0.1);p.oa=0;p.on("enterframe",function(){this.oa+=1;this.position.add(this.Xd);this.scaleX+=0.01;this.scaleY+=0.01;80<this.oa&&(this.ed=0.99)})}this.remove()}});gls2.Yj=tm.createClass({superClass:tm.graphics.Canvas,ba:l,ie:l,Hb:l,frame:0,init:function(c){this.superInit("#scoreLabel");this.ba=c;this.resize(480,640).fitWindow();this.setText("20px Orbitron","left","top");this.fillStyle="rgba(255,255,255,0.01)";this.ie=gls2.Ij(200);this.Hb=gls2.vi(this)},update:function(){this.clear();this.ba.Hd!==l&&(this.fillStyle=tm.graphics.LinearGradient(0,0,480,0).addColorStopList([{offset:0,color:"rgba(255,255,0,0.4)"},{offset:1,color:"rgba(0,255,255,0.4)"}]).toStyle(),
this.strokeStyle="rgba(255,255,255,0.8)",this.lineWidth=2,this.fillRect(5,this.Hb.Hc-20,470*this.ba.Hd.ra/this.ba.Hd.ld,20),this.strokeRect(5,this.Hb.Hc-20,470,20),this.clear(263.5,this.Hb.Hc-20+2,2,16),this.clear(52,this.Hb.Hc-20+2,2,16));this.strokeStyle=this.fillStyle="rgba(255,255,255,0.4)";this.lineWidth=1;var c;this.setText("20px 'Ubuntu Mono'","right","top");score=(""+Math.floor(this.ba.score)).padding(16," ");c="";for(var b=0;b<score.length;b+=4)c+=score.substring(b,b+4)+" ";this.fillText(c,
192,this.Hb.Hc+5);this.setText("18px 'Ubuntu Mono'","right","top");score=("+"+Math.floor(this.ba.tb)).padding(8," ");c="";for(b=0;b<score.length;b+=4)c+=score.substring(b,b+4)+" ";this.fillText(c+"x "+(~~(this.ba.Va/1E3)+1),this.Hb.Te+192,22);c=[0,1,4][this.ba.ea.type];for(b=0;b<this.ba.td-1;b++)this.drawTexture(tm.asset.AssetManager.get("fighter"),192,64*c,64,64,5+32*b,40,32,32);this.setText("bold 18px Orbitron","left","top");this.strokeText("rank "+~~(100*M.Ua.Bb.$rank),10,75);this.setText("bold 18px Orbitron",
"left","top");this.strokeText("max "+~~this.ba.Ye+" hit",this.Hb.Te+10,95);0<~~this.ba.Va&&(this.setText("bold 45px Orbitron","left","top"),this.strokeText(~~this.ba.Va+" HIT!!",10,0.5*-this.Hb.Hc+115));0===this.frame%2&&(!this.ba.Ma&&0<this.ba.Wa?(this.strokeStyle="rgba(255,255,100,0.5)",this.setText("bold 24px Orbitron","left","bottom"),this.strokeText("HYPER LV "+this.ba.Wa,5,637)):this.ba.Ma&&(this.strokeStyle="rgba(255,255,100,0.5)",this.setText("bold 28px Orbitron","left","bottom"),this.strokeText("HYPER LV "+
this.ba.Vc,5,637)));for(b=0;b<this.ba.Sb;b++)this.drawTexture(tm.asset.AssetManager.get("bombIcon"),480-25*(b+1)-20,615,20,20);0===this.frame%2&&this.ba.Rf&&(this.strokeStyle="rgba(255,255,255,0.5)",this.setText("bold 28px Orbitron","right","bottom"),this.strokeText("MAXIMUM",460,637));this.ie.update();this.ie.Jh=this.Hb.Hc+5;this.ie.draw(this);this.frame+=1}});gls2.vi=tm.createClass({superClass:tm.app.Object2D,Wb:l,Te:0,Hc:0,init:function(c){this.superInit();this.Wb=c}});(function(){var c=Array.range(0,5).map(function(b){return Math.pow(0.9,b+1)});gls2.Pj=tm.createClass({superClass:tm.graphics.Canvas,Ga:l,Vb:l,gc:l,init:function(){this.superInit("#background");this.resize(480,640).fitWindow();this.Ga=gls2.Qj();this.Ga.ka=this;this.Ga.update=function(b){this.update(b.frame)}.bind(this);this.blendMode="lighter";this.Vb=[];this.gc=[];for(var b=0;5>b;b++)this.Vb[b]=40*c[b],this.gc[b]=this.Vb[b]/2*Math.sqrt(3)},update:function(b){this.Ga.Da=Math.cos(this.Ga.direction)*
this.Ga.speed;this.Ga.Ea=Math.sin(this.Ga.direction)*this.Ga.speed;for(var c=0;5>c;c++){for(this.Ga.qc[c]+=this.Ga.Da*Math.pow(0.8,c);3*this.Vb[c]<this.Ga.qc[c];)this.Ga.qc[c]-=3*this.Vb[c];for(;this.Ga.qc[c]<3*-this.Vb[c];)this.Ga.qc[c]+=3*this.Vb[c];for(this.Ga.rc[c]+=this.Ga.Ea*Math.pow(0.8,c);2*this.gc[c]<this.Ga.rc[c];)this.Ga.rc[c]-=2*this.gc[c];for(;this.Ga.rc[c]<2*-this.gc[c];)this.Ga.rc[c]+=2*this.gc[c]}0===b%2&&this.draw()},draw:function(){this.Ga.background!==l?this.clearColor(this.Ga.background,
0,0):this.clear();for(var b=0;5>b;b++){this.lineWidth=0.3*Math.pow(0.8,b);this.strokeStyle=tm.graphics.LinearGradient(0,0,0,640).addColorStopList([{offset:0,color:"rgba(255,255,255,"+0.8*c[b]+")"},{offset:1,color:"rgba(255,255,255,"+0.6*c[b]+")"}]).toStyle();this.beginPath();for(var f=0,d=this.Ga.qc[b]-3*this.Vb[b];d<480+3*this.Vb[b];d+=1.5*this.Vb[b])for(var f=0===f?this.gc[b]:0,j=this.Ga.rc[b]-2*this.gc[b]+f;j<640+2*this.gc[b];j+=2*this.gc[b])this.line(d,j,d+this.Vb[b],j),this.line(d,j,d-this.Vb[b]/
2,j+this.gc[b]),this.line(d,j,d-this.Vb[b]/2,j-this.gc[b]);this.stroke()}}});gls2.Qj=tm.createClass({superClass:tm.app.Object2D,qc:0,rc:0,direction:0,speed:0,Da:0,Ea:0,background:l,init:function(){this.superInit();this.qc=[];this.rc=[];for(var b=0;5>b;b++)this.qc[b]=240,this.rc[b]=320;this.direction=0.5*Math.PI;this.speed=1;this.Ea=this.Da=0}})})();gls2.Ng=tm.createClass({superClass:tm.display.Sprite,bj:w,ba:l,ea:l,Yc:w,Md:w,Sh:w,Da:0,Ea:0,init:function(c){this.superInit("tex3",20,20);this.setFrameIndex(0,64,64);(this.bj=c)&&this.setScale(2,2);this.ba=gls2.bb.Ce;this.ea=this.ba.ea;this.addChildTo(this.ba);c=0.5*gls2.Ba.random()*Math.PI-0.75*Math.PI;var b=10+30*Math.random();this.Da=Math.cos(c)*b;this.Ea=Math.sin(c)*b},update:function(){this.ea.Tb&&(this.Md=k);if(this.ea.parent===l)this.Md=w;else{if(100>gls2.Xc(this,this.ea)){this.ba.hl(this);
this.remove();return}1E4>gls2.Xc(this,this.ea)&&(this.Md=k);if(this.Sh&&this.Md){var c=Math.atan2(this.ea.y-this.y,this.ea.x-this.x);this.x+=8*Math.cos(c);this.y+=8*Math.sin(c)}else this.Sh||(this.x+=this.Da,this.y+=this.Ea,this.Da*=0.8,this.Ea*=0.8,-1<this.Da&&(1>this.Da&&-1<this.Ea&&1>this.Ea)&&(this.Sh=k))}(-200>this.x||680<this.x||-200>this.y||690<this.y)&&this.remove()}});
gls2.yi=tm.createClass({superClass:gls2.Ng,Yc:w,init:function(c){this.superInit(c)},update:function(){this.y+=4;this.rotation+=10;this.superClass.prototype.update.call(this)}});gls2.ek=tm.createClass({superClass:gls2.Ng,Yc:k,init:function(c){this.superInit(c)},update:function(){this.Md||(this.x+=this.ba.ka.Da,this.y+=this.ba.ka.Ea);this.superClass.prototype.update.call(this)}});gls2.zd=tm.createClass({ea:l,ba:l,$:l,frame:0,init:function(c){this.ba=c;this.ea=c.ea;this.ve();this.$=gls2.dk();this.frame=0},ve:K(),update:function(){this.Fk(this.frame);this.frame+=1},Fk:function(c){c=this.$.get(c);if(c!==l)if("function"===typeof c.value)c.value.call(this);else if(gls2.hi[c.value]!==i){var b=gls2.hi[c.value];if(b!==l)if(b[0].Hd===k)this.Na(b[0]);else for(var f=0;f<b.length;f++){var d=this.Na(b[f]);c.stop&&d.addEventListener("enemyconsumed",function(){this.$.xe=w}.bind(this))}}},
Na:function(c){this.ba.le+=1;c=c.hard(this.ba,c.soft).setPosition(c.x,c.y).addChildTo(this.ba);c.Ha=this;c.bf();return c},He:function(c){gls2.Kf();this.ba.Oe=k;for(var b=tm.app.Object2D().setPosition(240,320),f=-4;4>=f;f++)for(var d=-4;4>=d;d++){var j=tm.display.Label("WARNING!!",75).setFillStyle(tm.graphics.LinearGradient(0,0,0,20).addColorStopList([{offset:0,color:"hsla( 0, 100%, 50%, 0.07)"},{offset:1,color:"hsla(50, 100%, 50%, 0.07)"}]).toStyle()).setBlendMode("lighter").setPosition(f,d);j.oa=
0;j.update=function(){this.alpha=-0.5*Math.cos(0.08*this.oa)+0.5;this.oa+=1};j.addChildTo(b)}b.tweener.wait(3E3).call(c).wait(2E3).call(function(){this.execChildren(function(){this.update=K();this.tweener.clear().fadeOut(500)})}.bind(b)).wait(1E3).call(function(){this.remove()}.bind(b));b.addChildTo(this.ba.fh);gls2.va("warning");gls2.va("voWarning")}});
gls2.zd.create=function(c,b){switch(b){case 0:return gls2.Zj(c);case 1:return gls2.$j(c);case 2:return gls2.ak(c);case 3:return gls2.bk(c);case 4:return gls2.ck(c);default:h(Error("stageNumber = "+b))}};gls2.dk=tm.createClass({index:0,data:l,xe:w,init:function(){this.data={}},add:function(c,b,f){this.index+=c;this.data[this.index]={stop:f,value:b}},get:function(c){c=this.data[c];return c===i?l:c.stop===k?(this.xe=k,c):this.xe?l:c}});gls2.Zj=tm.createClass({superClass:gls2.zd,init:function(c){this.superInit(c);this.$.add(0,function(){gls2.Pb("bgm1",k);this.ba.ka.direction=0.5*Math.PI;this.ba.ka.speed=8;this.ba.ka.tweener.clear().to({speed:1},4E3,"easeInOutQuad")});this.$.add(200,"tankRD-center");this.$.add(200,"tankRD-left");this.$.add(20,"heri1-right");this.$.add(60,"heri1-center");this.$.add(10,"cannon-0");this.$.add(30,"heri1-left");this.$.add(10,"cannon-1");this.$.add(30,"tankL-top");this.$.add(50,"heri1-right");this.$.add(20,
"tankRD-center");this.$.add(80,"heri1-center");this.$.add(150,"komachi-1");this.$.add(230,"heri1-right");this.$.add(20,"heri1-center");this.$.add(20,"heri1-left");this.$.add(20,"tankL-top");this.$.add(20,"tankRD-left");this.$.add(50,"heri1-right");this.$.add(50,"heri1-center");this.$.add(50,"heri1-center");this.$.add(20,"tankRD-center");this.$.add(20,"tankRD-left");this.$.add(50,"heri1-right");this.$.add(10,"cannon-7");this.$.add(30,"heri1-center");this.$.add(50,"heri1-left");this.$.add(20,"tankL-top");
this.$.add(50,"heri1-right");this.$.add(50,"fighter-m-1");this.$.add(50,"fighter-m-5");this.$.add(1,function(){this.ba.ka.tweener.clear().to({speed:5},5E3,"easeInOutQuad")});this.$.add(150,"yukishiro",k);this.$.add(25,"heri2-left");this.$.add(25,"heri2-center");this.$.add(25,"heri2-right");this.$.add(25,"heri2-right");this.$.add(25,"heri2-left");this.$.add(25,"heri2-center");this.$.add(25,"heri2-right");this.$.add(25,"heri2-left");this.$.add(25,"heri2-center");this.$.add(25,"heri2-right");this.$.add(25,
"heri2-right");this.$.add(25,"heri2-left");this.$.add(25,"heri2-center");this.$.add(25,"heri2-right");this.$.add(50,"fighter-m-0");this.$.add(50,"fighter-m-2");this.$.add(50,"fighter-m-4");this.$.add(50,"heri1-center");this.$.add(50,"heri1-right");this.$.add(50,"heri1-left");this.$.add(50,"heri2-center");this.$.add(50,"heri2-right");this.$.add(50,"heri2-left");this.$.add(1,"cannon-6");this.$.add(30,"heri1-left");this.$.add(50,"heri1-right");this.$.add(50,"heri1-center");this.$.add(50,"fighter-m-6");
this.$.add(50,"fighter-m-4");this.$.add(50,"fighter-m-2");this.$.add(50,"heri1-center");this.$.add(50,"heri1-right2");this.$.add(50,"heri1-left2");this.$.add(60,"heri1-center2");this.$.add(50,"heri1-center");this.$.add(50,"heri1-right");this.$.add(50,"fighter-m-0");this.$.add(50,"fighter-m-1");this.$.add(50,"fighter-m-2");this.$.add(50,"heri1-center");this.$.add(50,"heri1-right");this.$.add(50,"heri1-left");this.$.add(50,"heri1-center");this.$.add(50,"heri1-right");this.$.add(50,"heri1-left");this.$.add(1,
"cannon-1");this.$.add(30,"heri1-center");this.$.add(50,"heri1-left");this.$.add(50,"heri1-right");this.$.add(30,"heri1-center");this.$.add(50,"heri1-left");this.$.add(50,"heri1-right");this.$.add(50,"fighter-m-6");this.$.add(50,"fighter-m-5");this.$.add(50,"fighter-m-4");this.$.add(50,"heri1-center");this.$.add(50,"heri1-right");this.$.add(50,"heri1-left2");this.$.add(50,"heri1-center2");this.$.add(50,"heri1-center");this.$.add(50,"heri1-right2");this.$.add(50,"heri1-center");this.$.add(1,function(){this.ba.ka.tweener.clear().to({speed:10},
5E3,"easeInOutQuad")});this.$.add(100,"komachi-0");this.$.add(160,"komachi-1");this.$.add(600,function(){this.He(function(){gls2.Pb("bgmBoss",k)})});this.$.add(600,"misumi")},ve:function(){this.ba.ka.background=tm.graphics.LinearGradient(0,0,0,640).addColorStopList([{offset:0,color:"hsl(230,50%,20%)"},{offset:1,color:"hsl(230,50%,10%)"}]).toStyle()}});gls2.$j=tm.createClass({superClass:gls2.zd,init:function(c){this.superInit(c);this.$.add(0,function(){gls2.Pb("bgm2",k);this.ba.ka.direction=0.5*Math.PI;this.ba.ka.speed=0.3});this.$.add(200,"tank25-top");this.$.add(160,"heri1-left");this.$.add(100,"heri1-right");this.$.add(190,"komachi2-0");this.$.add(10,"itsuki-1");this.$.add(400,"tank15-top");this.$.add(1,function(){this.ba.ka.tweener.clear().to({speed:1},5E3,"easeInOutQuad").to({direction:Math.PI},5E3,"easeInOutQuad")});this.$.add(60,"heri2-left");
this.$.add(60,"heri2-center");this.$.add(60,"heri2-right");this.$.add(20,"tankRD-center");this.$.add(20,"tankL-top");this.$.add(20,"yayoi-R0");this.$.add(1,"yayoi-R2");this.$.add(40,"heri2-left");this.$.add(60,"heri2-center");this.$.add(60,"heri2-right");this.$.add(60,"yayoi-R1");this.$.add(1,"heri2-center");this.$.add(1,"heri2-left");this.$.add(1,"heri2-right");this.$.add(30,"makoto-R0");this.$.add(1,function(){this.ba.ka.tweener.clear().to({speed:0.3},6E3,"easeInOutQuad").to({direction:0.25*Math.PI,
speed:1},12E3,"easeInOutQuad")});this.$.add(600,"tank5-center");this.$.add(1,"yayoi-3");this.$.add(90,"heri2-left");this.$.add(1,"yayoi-2");this.$.add(90,"tank5-left");this.$.add(1,"yayoi-1");this.$.add(90,"heri2-right");this.$.add(1,"yayoi-0");this.$.add(90,"heri2-left");this.$.add(60,"tank5-left");this.$.add(1,function(){this.ba.ka.tweener.clear().to({direction:0.5*Math.PI},1E4,"easeInOutQuad")});this.$.add(40,"tank5-left");this.$.add(40,"heri1-left2");this.$.add(40,"tank5-center");this.$.add(40,
"heri2-right");this.$.add(40,"tank5-left");this.$.add(40,"heri2-left");this.$.add(40,"tank5-center");this.$.add(40,"heri2-right");this.$.add(40,"tank5-left");this.$.add(40,"heri1-left2");this.$.add(40,"tank5-left");this.$.add(40,"heri2-left");this.$.add(40,"tank5-center");this.$.add(40,"heri2-right");this.$.add(40,"tank5-left");this.$.add(40,"heri2-left");this.$.add(90,"makoto-4");this.$.add(1,"tsubomi-0");this.$.add(1,"tsubomi-2");this.$.add(1,function(){this.ba.ka.tweener.clear().to({speed:0.5},
3E3,"easeInOutQuad")});this.$.add(400,function(){this.ba.ka.tweener.clear().to({direction:0,speed:1},5E3,"easeInOutQuad")});this.$.add(430,function(){this.ba.ka.tweener.clear().to({speed:3},5E3,"easeInOutQuad")});this.$.add(1,"mai",k);this.$.add(300,"heri2-left");for(c=0;12>c;c++)this.$.add(30,"heri2-center"),this.$.add(30,"heri2-right"),this.$.add(30,"heri2-center"),this.$.add(30,"heri2-left");this.$.add(1,function(){this.ba.ka.tweener.clear().to({direction:0.5*Math.PI,speed:0.8},5E3,"easeInOutQuad")});
this.$.add(60,"tank5-left");this.$.add(60,"tank5-left");this.$.add(60,"tank5-left");this.$.add(120,"itsuki-2");this.$.add(1,"komachi2-0");this.$.add(380,"tsubomi-0");this.$.add(1,"komachi2-1");this.$.add(380,"itsuki-1");this.$.add(380,"makoto-4");this.$.add(1,"komachi2-0");this.$.add(380,"makoto-1");this.$.add(580,"erika");this.$.add(520,function(){this.He(function(){gls2.Pb("bgmBoss",k)})});this.$.add(300,function(){this.ba.ka.tweener.clear().to({speed:5},5E3,"easeInOutQuad")});this.$.add(300,"hyuga")},
ve:function(){this.ba.ka.background=tm.graphics.LinearGradient(0,0,0,640).addColorStopList([{offset:0,color:"hsl(130,30%,20%)"},{offset:1,color:"hsl(130,30%, 5%)"}]).toStyle()}});gls2.ak=tm.createClass({superClass:gls2.zd,init:function(c){this.superInit(c);this.$.add(0,function(){gls2.Pb("bgm3",k);this.ba.ka.direction=0.5*Math.PI;this.ba.ka.speed=2;this.ba.ka.tweener.clear().to({speed:6},5E3,"easeInOutQuad")});this.$.add(150,"nao2-center");this.$.add(30,"nao2-left");this.$.add(30,"nao2-right");this.$.add(30,"nao2-center");this.$.add(30,"nao2-left");this.$.add(30,"nao2-right");for(c=0;6>c;c++)this.$.add(30,"nao1-center"),this.$.add(30,"nao1-right"),this.$.add(30,"nao1-left");
this.$.add(60,function(){this.ba.ka.tweener.clear().to({speed:3},1E3,"easeInOutQuad")});this.$.add(120,"akane-center");this.$.add(60,"nao2-center");this.$.add(60,"nao2-center");this.$.add(120,"akane-right");this.$.add(60,"akane-left");this.$.add(60,"reika1-left");this.$.add(120,"reika1-left");this.$.add(120,"akane-center");this.$.add(60,"akane-left");this.$.add(60,"reika1-left");this.$.add(120,"reika1-left");this.$.add(240,"akane-center");this.$.add(60,"reika1-right");this.$.add(120,"reika1-right");
this.$.add(60,"nao2-center");this.$.add(60,"nao2-center");this.$.add(60,function(){this.ba.ka.tweener.clear().to({speed:4,direction:0.2*Math.PI},3E3,"easeInOutQuad")});this.$.add(120,"akane-center");this.$.add(60,"akane-right");this.$.add(60,"akane-left");for(c=0;3>c;c++)this.$.add(60,"nao2-center"),this.$.add(60,"nao2-left"),this.$.add(60,"nao2-right");this.$.add(1,function(){this.ba.ka.tweener.clear().to({speed:4,direction:0},3E3,"easeInOutQuad")});this.$.add(60,"miyuki-1");this.$.add(60,"reika1-right");
this.$.add(180,"reika1-right");this.$.add(120,"nao2-right");this.$.add(120,"nao2-left");this.$.add(60,function(){this.ba.ka.tweener.clear().to({speed:5,direction:0.2*-Math.PI},5E3,"easeInOutQuad")});this.$.add(120,"komachi3-0");this.$.add(60,"reika1-left");this.$.add(60,"reika1-left");this.$.add(60,"nao2-center");this.$.add(60,"nao2-center");this.$.add(120,"madoka-1");this.$.add(120,"reika1-left");this.$.add(60,"nao2-center");this.$.add(60,"nao2-left");this.$.add(120,"reika1-left");this.$.add(120,
"reika1-left");this.$.add(1,function(){this.ba.ka.tweener.clear().to({speed:2,direction:0.2*Math.PI},4E3,"easeInOutQuad")});this.$.add(60,"komachi3-1");this.$.add(120,"reika1-right");this.$.add(60,"nao2-center");this.$.add(60,"nao2-right");this.$.add(60,"madoka-0");this.$.add(120,"reika1-right");this.$.add(120,"reika1-right");this.$.add(60,"madoka-0");this.$.add(60,"nao2-center");this.$.add(60,"nao2-center");this.$.add(180,"madoka-1");this.$.add(60,"nao2-left");this.$.add(60,"nao2-right");this.$.add(120,
"erika");this.$.add(1,function(){this.ba.ka.tweener.clear().to({speed:7,direction:0.5*Math.PI},3E3,"easeInOutQuad")});this.$.add(300,"higashi",k);this.$.add(900,K());for(c=0;6>c;c++)this.$.add(90,"nao1-center"),this.$.add(60,"nao1-right"),this.$.add(60,"nao1-left");this.$.add(1,function(){this.ba.ka.tweener.clear().to({speed:2,direction:0.5*Math.PI},3E3,"easeInOutQuad")});this.$.add(60,"miyuki-2");this.$.add(60,"nao2-center");this.$.add(60,"nao2-center");this.$.add(60,"nao2-left");this.$.add(60,"nao2-right");
this.$.add(120,"reika1-left");this.$.add(120,"reika1-left");this.$.add(120,"heri1-left");this.$.add(60,"heri1-right");this.$.add(40,"heri1-right2");this.$.add(40,"heri1-left2");this.$.add(60,"komachi3-0");this.$.add(120,"akane-right");this.$.add(60,"nao2-center");this.$.add(60,"nao2-left");this.$.add(60,"nao2-right");this.$.add(1,function(){this.ba.ka.tweener.clear().to({speed:4,direction:0.5*Math.PI},3E3,"easeInOutQuad")});this.$.add(120,"reika1-left");this.$.add(120,"reika1-left");this.$.add(160,
"heri1-left");this.$.add(100,"heri1-right");this.$.add(40,"heri1-right2");this.$.add(40,"heri1-left2");this.$.add(60,"madoka-1");this.$.add(120,"akane-left");this.$.add(60,"nao2-center");this.$.add(60,"nao2-left");this.$.add(60,"nao2-right");this.$.add(60,"komachi3-1");this.$.add(240,"komachi3-0");this.$.add(120,"alice");this.$.add(300,K());this.$.add(180,"madoka-0");for(c=0;5>c;c++)this.$.add(60,"nao2-center"),this.$.add(60,"nao2-left"),this.$.add(60,"nao2-right");this.$.add(160,"heri1-left");this.$.add(100,
"heri1-right");this.$.add(180,"madoka-1");this.$.add(40,"heri1-right2");this.$.add(40,"heri1-left2");this.$.add(1,function(){this.ba.ka.tweener.clear().to({speed:5,direction:0.5*Math.PI},5E3,"easeInOutQuad")});this.$.add(120,"reika1-right");this.$.add(120,"reika1-right");this.$.add(120,"akane-left");this.$.add(120,"heri1-left");this.$.add(60,"heri1-right");this.$.add(40,"heri1-right2");this.$.add(40,"heri1-left2");this.$.add(180,"komachi3-1");this.$.add(60,"nao2-center");this.$.add(60,"nao2-left");
this.$.add(60,"nao2-right");this.$.add(1,function(){this.ba.ka.tweener.clear().to({speed:7,direction:0.5*Math.PI},5E3,"easeInOutQuad")});this.$.add(120,"reika1-right");this.$.add(120,"reika1-right");this.$.add(120,"akane-right");this.$.add(120,"heri1-left");this.$.add(60,"heri1-right");this.$.add(40,"heri1-right2");this.$.add(40,"heri1-left2");this.$.add(180,"madoka-0");this.$.add(60,"nao2-center");this.$.add(60,"nao2-left");this.$.add(60,"nao2-right");this.$.add(80,"erika");this.$.add(300,function(){this.He(function(){gls2.Pb("bgmBoss",
k)})});this.$.add(1,function(){this.ba.ka.tweener.clear().to({speed:8,direction:0.5*Math.PI},8E3,"easeInOutQuad")});this.$.add(480,"momozono")},ve:function(){this.ba.ka.background=tm.graphics.LinearGradient(0,0,0,640).addColorStopList([{offset:0,color:"hsl(30,50%,30%)"},{offset:1,color:"hsl(30,50%,15%)"}]).toStyle()}});gls2.bk=tm.createClass({superClass:gls2.zd,init:function(c){this.superInit(c);this.$.add(0,function(){gls2.Pb("bgm4",k);this.ba.ka.direction=0.5*Math.PI;this.ba.ka.speed=1});this.$.add(200,"tsukikage-r");this.$.add(100,"tsukikage-l");this.$.add(170,"bukky-4-r");this.$.add(150,"heri1-4-left");this.$.add(10,"heri1-4-center");this.$.add(10,"heri1-4-left");this.$.add(10,"heri1-4-center");this.$.add(100,"komachi4-0");this.$.add(120,"heri1-4-right");this.$.add(10,"heri1-4-center");this.$.add(10,"heri1-4-right");
this.$.add(10,"heri1-4-center");this.$.add(80,"bukky-4-l");this.$.add(200,"bukky-4-r");this.$.add(200,"tankRD-center");this.$.add(10,"heri1-4-right");this.$.add(10,"heri1-4-center");this.$.add(10,"heri1-4-right");this.$.add(10,"heri1-4-center");this.$.add(20,"tankRD-left");this.$.add(20,"tank5-left");this.$.add(20,"tank5-center");this.$.add(20,"tankRD-left");this.$.add(20,"tank5-left");this.$.add(20,"tank5-center");this.$.add(100,"tsukikage-r");this.$.add(10,"tankL-top");this.$.add(100,"tankL-top");
this.$.add(50,"tankL-top");this.$.add(50,"tankL-top");this.$.add(150,"komachi4-0");this.$.add(50,"komachi4-1");this.$.add(500,"heri2-left");this.$.add(1,function(){this.ba.ka.tweener.clear().to({speed:5,direction:0.5*-Math.PI},1E4).to({speed:3,direction:1.5*-Math.PI},9E3)});for(c=0;6>c;c++)this.$.add(20,"heri2-center"),this.$.add(20,"heri2-right"),this.$.add(20,"heri2-left"),this.$.add(1,"tank5-center"),this.$.add(15,"heri1-4-center"),this.$.add(15,"heri1-4-right"),this.$.add(15,"heri1-4-left"),this.$.add(1,
"tank5-left"),this.$.add(90,"tank25-top");this.$.add(1,function(){this.ba.ka.speed=3;this.ba.ka.tweener.clear().to({speed:0.3},5E3)});this.$.add(180,"karen-3-2");this.$.add(300,"karen-3-8");this.$.add(75,"heri1-4-center");this.$.add(25,"heri1-4-right");this.$.add(25,"heri1-4-center");this.$.add(25,"heri1-4-right");this.$.add(25,"heri1-4-center");this.$.add(25,"heri1-4-right");this.$.add(25,"heri1-4-center");this.$.add(25,"heri1-4-right");this.$.add(100,"karen-3-2");this.$.add(75,"heri1-4-center");
this.$.add(25,"heri1-4-left");this.$.add(25,"heri1-4-center");this.$.add(25,"heri1-4-left");this.$.add(25,"heri1-4-center");this.$.add(25,"heri1-4-left");this.$.add(25,"heri1-4-center");this.$.add(25,"heri1-4-left");this.$.add(100,"karen-3-8");this.$.add(75,"heri1-4-center");this.$.add(25,"heri1-4-right");this.$.add(25,"heri1-4-center");this.$.add(25,"heri1-4-right");this.$.add(25,"heri1-4-center");this.$.add(25,"heri1-4-right");this.$.add(25,"heri1-4-center");this.$.add(25,"heri1-4-right");this.$.add(100,
"karen-3-2");this.$.add(75,"heri1-4-center");this.$.add(25,"heri1-4-left");this.$.add(25,"heri1-4-center");this.$.add(25,"heri1-4-left");this.$.add(25,"heri1-4-center");this.$.add(25,"heri1-4-left");this.$.add(25,"heri1-4-center");this.$.add(25,"heri1-4-left");this.$.add(200,"karen-3-8");this.$.add(60,"karen-3-2");this.$.add(52,"heri1-4-left");this.$.add(12,"heri1-4-right");this.$.add(12,"heri1-4-left");this.$.add(12,"heri1-4-right");this.$.add(12,"heri1-4-left");this.$.add(12,"heri1-4-right");this.$.add(12,
"heri1-4-left");this.$.add(12,"heri1-4-right");this.$.add(12,"heri1-4-left2");this.$.add(12,"heri1-4-right2");this.$.add(12,"heri1-4-left2");this.$.add(12,"heri1-4-right2");this.$.add(12,"heri1-4-left2");this.$.add(12,"heri1-4-right2");this.$.add(12,"heri1-4-left2");this.$.add(12,"heri1-4-right2");this.$.add(102,"heri1-4-left2");this.$.add(12,"heri1-4-right2");this.$.add(12,"heri1-4-left2");this.$.add(12,"heri1-4-right2");this.$.add(12,"heri1-4-left2");this.$.add(12,"heri1-4-right2");this.$.add(12,
"heri1-4-left2");this.$.add(12,"heri1-4-right2");this.$.add(400,function(){this.ba.ka.tweener.clear().to({speed:3},5E3)});this.$.add(250,function(){this.ba.ka.direction=0.5*Math.PI;this.ba.ka.tweener.clear().to({speed:9},2E3)});this.$.add(1,"rikka",k);this.$.add(1200,K());for(c=0;9>c;c++)this.$.add(50,0===c%2?"komachi4-0":"komachi4-1"),this.$.add(35,"heri1-4-left2"),this.$.add(35,"heri1-4-center2"),this.$.add(35,"heri1-4-right2"),this.$.add(35,"heri1-4-left"),this.$.add(35,"heri1-4-center"),this.$.add(35,
"heri1-4-right");this.$.add(80,"erika");this.$.add(1,function(){this.ba.ka.tweener.clear().to({speed:0.6},3E3)});this.$.add(200,"nozomi4-0");this.$.add(20,"tankRD-center");this.$.add(90,"tankRD-center");this.$.add(90,"tankRD-center");this.$.add(200,"nozomi4-2");this.$.add(90,"tankRD-center");this.$.add(300,"bukky-4-l");this.$.add(90,"bukky-4-r");this.$.add(100,"heri1-4-left2");this.$.add(30,"heri1-4-left1");this.$.add(100,"heri1-4-left2");this.$.add(30,"heri1-4-left1");this.$.add(100,"heri1-4-left2");
this.$.add(30,"heri1-4-left1");this.$.add(150,"tsukikage-r");this.$.add(15,"tsukikage-l");this.$.add(1,"heri2-center");this.$.add(1,"heri2-right");this.$.add(1,"heri2-left");this.$.add(60,"heri2-center");this.$.add(60,"heri2-right");this.$.add(60,"heri2-left");this.$.add(250,"nozomi4-0");this.$.add(100,"nozomi4-2");this.$.add(100,"heri1-4-left2");this.$.add(30,"heri1-4-left1");this.$.add(100,"heri1-4-left2");this.$.add(30,"heri1-4-left1");this.$.add(100,"heri1-4-left2");this.$.add(30,"heri1-4-left1");
this.$.add(80,"erika");this.$.add(200,function(){this.He(function(){gls2.Pb("bgmBoss",k)})});this.$.add(1,function(){this.ba.ka.tweener.clear().to({speed:9},2E3)});this.$.add(600,"mana")},ve:function(){this.ba.ka.background=tm.graphics.LinearGradient(0,0,0,640).addColorStopList([{offset:0,color:"hsl(30,30%,15%)"},{offset:1,color:"hsl(30,50%, 5%)"}]).toStyle()}});gls2.ck=tm.createClass({superClass:gls2.zd,init:function(c){this.superInit(c);this.$.add(0,function(){gls2.Pb("bgm5",k);this.ba.ka.direction=0.5*Math.PI;this.ba.ka.speed=1;this.ba.ka.jm=k});this.$.add(150,"urara5-0");this.$.add(260,"urara5-7");this.$.add(260,"urara5-6");this.$.add(380,"nozomi5-1");this.$.add(100,"nozomi5-0");this.$.add(175,"nozomi5-2");this.$.add(325,"tank5-left");this.$.add(25,"tank5-center");this.$.add(25,"heri2-left");this.$.add(25,"heri2-center");this.$.add(25,"heri2-left");this.$.add(25,
"tank5-left");this.$.add(25,"tank5-center");this.$.add(260,"mktn5-0");this.$.add(60,"heri1-4-left2");this.$.add(10,"heri1-4-left");this.$.add(10,"heri1-4-left2");this.$.add(10,"heri1-4-left");this.$.add(10,"heri1-4-left");this.$.add(10,"heri1-4-left2");this.$.add(10,"heri1-4-left");this.$.add(300,"mktn5-1");this.$.add(60,"heri1-4-right2");this.$.add(10,"heri1-4-right");this.$.add(10,"heri1-4-right2");this.$.add(10,"heri1-4-right");this.$.add(10,"heri1-4-right");this.$.add(10,"heri1-4-right2");this.$.add(10,
"heri1-4-right");this.$.add(300,"tank5-left");for(c=0;2>c;c++)this.$.add(33,"heri2-5-left"),this.$.add(33,"heri2-5-center"),this.$.add(33,"heri2-5-right"),this.$.add(33,"heri2-5-left"),this.$.add(33,"heri2-5-center"),this.$.add(33,"heri2-5-right"),this.$.add(2,"DUMMY+"+c);this.$.add(25,"tank5-left");for(c=0;2>c;c++)this.$.add(33,"heri2-5-left"),this.$.add(33,"heri2-5-center"),this.$.add(33,"heri2-5-right"),this.$.add(33,"heri2-5-left"),this.$.add(33,"heri2-5-center"),this.$.add(33,"heri2-5-right"),
this.$.add(2,"DUMMY+"+c);this.$.add(25,"tank5-center");this.$.add(180,"bukky-5-l");this.$.add(60,"heri1-4-center2");this.$.add(60,"heri1-4-center");this.$.add(180,"bukky-5-r");this.$.add(60,"heri1-4-center2");this.$.add(60,"heri1-4-center");this.$.add(180,"bukky-5-l");this.$.add(60,"heri1-4-center2");this.$.add(60,"heri1-4-center");this.$.add(180,"bukky-5-r");this.$.add(60,"heri1-4-center2");this.$.add(60,"heri1-4-center");this.$.add(60,"heri1-4-center2");this.$.add(60,"heri1-4-center");this.$.add(300,
"urara5-0");this.$.add(300,"urara5-7");this.$.add(260,"urara5-6");this.$.add(260,"urara5-1");this.$.add(260,"urara5-0");this.$.add(260,"urara5-5");this.$.add(1,"kanade");this.$.add(300,"milk5-1");this.$.add(200,"milk5-0");this.$.add(200,"milk5-1");this.$.add(450,"komachi5-0");this.$.add(30,"heri1-4-right2");this.$.add(30,"heri1-4-right");this.$.add(30,"heri1-4-right2");this.$.add(30,"heri1-4-right");this.$.add(80,"komachi5-2");this.$.add(30,"heri1-4-left2");this.$.add(30,"heri1-4-left");this.$.add(30,
"heri1-4-left2");this.$.add(30,"heri1-4-left");this.$.add(80,"komachi5-1");this.$.add(30,"heri1-4-center2");this.$.add(30,"heri1-4-center");this.$.add(30,"heri1-4-center2");this.$.add(30,"heri1-4-center");this.$.add(100,"komachi5-0");this.$.add(30,"heri1-4-right2");this.$.add(30,"heri1-4-right");this.$.add(30,"heri1-4-right2");this.$.add(30,"heri1-4-right");this.$.add(120,"komachi5-2");this.$.add(30,"heri1-4-left2");this.$.add(30,"heri1-4-left");this.$.add(30,"heri1-4-left2");this.$.add(30,"heri1-4-left");
this.$.add(160,"komachi5-1");this.$.add(10,"heri1-4-center2");this.$.add(10,"heri1-4-center");this.$.add(10,"heri1-4-center2");this.$.add(10,"heri1-4-center");this.$.add(400,"ako5-0");this.$.add(250,"ako5-1");this.$.add(1200,K());for(c=0;22>c;c++)this.$.add(33,"heri2-5-left"),this.$.add(33,"heri2-5-center"),this.$.add(33,"heri2-5-right"),this.$.add(33,"heri2-5-left"),this.$.add(33,"heri2-5-center"),this.$.add(33,"heri2-5-right"),this.$.add(2,"DUMMY+"+c);this.$.add(260,"urara5-0");this.$.add(300,"urara5-1");
this.$.add(300,"urara5-6");this.$.add(300,"urara5-7");this.$.add(300,"urara5-2");this.$.add(300,"urara5-5");this.$.add(200,"ako5-0");this.$.add(200,"komachi5-1");this.$.add(200,"milk5-1");this.$.add(200,"komachi5-1");this.$.add(200,"milk5-2");this.$.add(200,"komachi5-0");this.$.add(200,"mktn5-0");this.$.add(200,"mktn5-1");this.$.add(10,"heri1-4-left2");this.$.add(10,"heri1-4-center2");this.$.add(10,"heri1-4-left2");this.$.add(10,"heri1-4-center2");this.$.add(10,"heri1-4-right2");this.$.add(10,"heri1-4-left2");
this.$.add(10,"heri1-4-center2");this.$.add(380,"nozomi5-1");this.$.add(100,"nozomi5-0");this.$.add(175,"nozomi5-2");this.$.add(200,"nozomi5-0");this.$.add(80,"erika");this.$.add(600,function(){this.He(function(){gls2.Pb("bgmBoss",k)})});this.$.add(1,function(){this.ba.ka.tweener.clear().to({speed:9},2E3)});this.$.add(600,"hibiki")},ve:function(){this.ba.ka.background=tm.graphics.RadialGradient(240,0,0,240,384,640).addColorStopList([{offset:0,color:"hsl(200, 20%, 25%)"},{offset:0.33,color:"hsl(240, 10%,  5%)"},
{offset:0.66,color:"hsl(280, 10%,  5%)"},{offset:1,color:"hsl(340, 10%,  5%)"}]).toStyle()}});gls2.Collision={oe:function(c,b){if(c.parent===l||b.parent===l)return w;var f=c.x+c.boundingWidthRight,d=c.y-c.boundingHeightTop,j=c.y+c.boundingHeightBottom,p=b.x-b.boundingWidthLeft,s=b.y-b.boundingHeightTop,A=b.y+b.boundingHeightBottom;return c.x-c.boundingWidthLeft<b.x+b.boundingWidthRight&&f>p&&d<A&&j>s}};gls2.Scene=tm.createClass({superClass:tm.app.Scene,_sceneResultCallback:l,init:function(){this.superInit()},Jl:function(c,b){"function"===typeof c?this.app.pushScene(c()):c instanceof tm.app.Scene&&this.app.pushScene(c);this._sceneResultCallback=b},draw:function(c){c.globalCompositeOperation="source-over";this.Kd(c)},finish:function(c){var b=this.app;b.popScene();(b=b.currentScene)&&b._sceneResultCallback&&b._sceneResultCallback.bind(b)(c)}});gls2.Kj=tm.createClass({superClass:gls2.Scene,titleText:l,menu:l,descriptions:l,showExit:w,title:l,selections:[],description:l,box:l,cursor:l,wh:l,_selected:0,_opened:w,_finished:w,init:function(c,b,f){this.superInit();this.titleText=c;this.menu=b;this._selected=~~f.defaultValue;this.showExit=f.showExit;this.descriptions=f.menuDescriptions;this.showExit&&(b.push("back"),this.descriptions.push("\u524d\u306e\u753b\u9762\u3078\u623b\u308a\u307e\u3059"));this.wh=f.onCursorMove;c=Math.max(50*(1+b.length),
50)+40;this.box=tm.display.RectangleShape(384,c,{strokeStyle:"rgba(0,0,0,0)",fillStyle:"hsla(220,50%,30%,0.8)"}).setPosition(240,320);this.box.width=1;this.box.height=1;this.box.tweener.to({width:384,height:c},200,"easeOutExpo").call(this._onOpen.bind(this));this.box.addChildTo(this);this.description=tm.display.Label("",14).setPosition(240,630).addChildTo(this)},_onOpen:function(){var c=320-25*this.menu.length;this.title=tm.display.Label(this.titleText,30).setPosition(240,c).addChildTo(this);this.selections=
this.menu.map(function(b,f){var d=this;c+=50;var j=tm.display.Label(b).setPosition(240,c).addChildTo(this);j.interactive=k;j.addEventListener("touchend",function(){d._selected===f?d.closeDialog(d._selected):d._selected=f});j.width=336;return j}.bind(this));this._createCursor();this._opened=k},_createCursor:function(){this.cursor=tm.display.RectangleShape(336,10,{strokeStyle:"rgba(0,0,0,0)",fillStyle:tm.graphics.LinearGradient(0,0,336,0).addColorStopList([{offset:0,color:"rgba(  0,255,100,0.0)"},{offset:0.2,
color:"rgba(  0,255,100,0.3)"},{offset:0.5,color:"rgba(  0,255,255,0.5)"},{offset:0.8,color:"rgba(  0,255,100,0.3)"},{offset:1,color:"rgba(  0,255,100,0.0)"}]).toStyle()}).addChildTo(this);this.cursor.blendMode="lighter";this.cursor.x=240;this.cursor.s=this._selected;this.cursor.y=this.selections[this._selected].y;this.cursor.update=function(){this.s!==this.parent._selected&&(this.s=this.parent._selected,this.tweener.clear(),this.tweener.to({y:this.parent.selections[this.parent._selected].y},200,
"easeOutExpo"),this.parent.wh!==l&&this.parent.wh(this.s))}},update:function(c){this.description.text=this.descriptions[this._selected];this._opened&&(this._finished?this.cursor.visible=0===~~(c.frame/2)%2:this.showExit&&c.keyboard.getKeyDown("x")?(this._selected=this.selections.length-1,this.closeDialog(this._selected)):c.keyboard.getKeyDown("z")||c.keyboard.getKeyDown("c")||c.keyboard.getKeyDown("space")?(this.closeDialog(this._selected),gls2.va("decision")):c.keyboard.getKeyDown("down")?(this._selected+=
1,this._selected=gls2.la.clamp(this._selected,0,this.selections.length-1),gls2.va("select")):c.keyboard.getKeyDown("up")&&(this._selected-=1,this._selected=gls2.la.clamp(this._selected,0,this.selections.length-1),gls2.va("select")))},closeDialog:function(c){this._finished=k;this.tweener.clear().wait(200).call(function(){this.cursor.remove();this.title.remove();this.selections.each(function(b){b.remove()});this.box.tweener.clear();this.box.tweener.to({width:1,height:1},200,"easeInExpo").call(function(){this.finish(c)}.bind(this))}.bind(this))},
Kd:function(c){c.fillStyle="rgba(0,0,0,0.8)";c.fillRect(0,0,480,640)}});function Y(c,b,f,d,j){j={}.$extend({menuDescriptions:[].concat(f),showExit:k,defaultValue:0,onCursorMove:K()},j);c.Jl(gls2.Kj(b,f,j),d)};gls2.Ra=tm.createClass({superClass:tm.display.CanvasElement,alpha:1,ed:0.85,size:0,image:l,jb:k,init:function(c,b,f,d){this.superInit();b===i&&(b=1);f===i&&(f=0.85);1===gls2.core.Kc&&(this.size*=0.7,this.ed*=0.9);this.width=this.height=this.size=c;this.alpha=b;this.ed=f;this.blendMode="lighter";1===gls2.core.Kc&&(this.ed*=0.9);this.image=d?d:tm.graphics.Canvas().resize(c,c).setFillStyle(tm.graphics.RadialGradient(0.5*c,0.5*c,0,0.5*c,0.5*c,0.5*c).addColorStopList([{offset:0,color:"rgba(255,255,255,0.1)"},
{offset:1,color:"rgba(  0,  0,  0,0.0)"}]).toStyle()).fillRect(0,0,c,c).element;if(2===gls2.core.Kc)this.on("added",function(){this.remove()})},update:function(){this.alpha*=this.ed;0.01>this.alpha?this.remove():1<this.alpha&&(this.alpha=1)},draw:function(c){c.context.drawImage(this.image,-this.width*this.origin.x,-this.height*this.origin.y,this.width,this.height)},clone:function(){return gls2.Ra(this.size,this.am,this.ed,this.image)}});
gls2.bi=tm.createClass({superClass:gls2.Ra,ka:l,init:function(c,b){b=b||20;this.superInit(b,1,0.82,tm.graphics.Canvas().resize(b,b).setFillStyle(tm.graphics.RadialGradient(0.5*b,0.5*b,0,0.5*b,0.5*b,0.5*b).addColorStopList([{offset:0,color:"rgba(255,255,255,0.5)"},{offset:1,color:"rgba(  0,  0,  0,0.0)"}]).toStyle()).fillRect(0,0,b,b).element);this.ka=c},update:function(c){this.superClass.prototype.update.apply(this,c);this.x+=this.ka.Da;this.y+=this.ka.Ea+0.3},clone:function(c){return gls2.bi(this.ka,
c)}});gls2.Ij=tm.createClass({width:0,label:l,Kb:l,oa:0,nj:0,Jh:0,init:function(c){this.width=c;this.label=tm.display.Label("_",10).setAlign("left").setBaseline("top").setPosition(-this.width/2+4,-this.height/2+4).setFillStyle("rgba(255,255,255,0.5)");this.Kb=[];this.nj=480-this.width-5;this.Jh=5},uk:function(c,b){b===k&&(this.Kb.clear(),this.Kb.push(""));5<this.Kb.length&&this.Kb.splice(1,this.Kb.length-4);this.Kb.push(c);return this},xk:function(){this.Kb.clear();return this},clear:function(){this.label.text=
"_";return this},update:function(){var c=this.label.text,c=c.substring(0,c.length-1);if(0!==this.Kb.length)if(""!==this.Kb[0]){var b=this.Kb[0][0];this.Kb[0]=this.Kb[0].substring(1);c+=b}else this.Kb.shift(),b=c.split("\n"),3<b.length&&(b.shift(),c=b.join("\n")),c+="\n";this.label.text=c+(0===this.oa%2?"_":" ");this.oa+=1},draw:function(c){c.save();c.context.globalCompositeOperation="source-over";c.translate(this.nj,this.Jh);c.fillStyle="rgba(1,2,48,0.5)";c.fillRect(0,0,this.width,64);c.translate(5,
5);c.fillStyle="rgba(255,255,255,0.5)";c.setText(this.label.fontStyle,this.label.align,this.label.baseline);this.label._lines.each(function(b,f){c.fillText(b,0,this.label.textSize*f)}.bind(this));c.restore()}});gls2.bc={noise:l,Rk:function(c){function b(b){if(1>b)return l;var d=[],j=Math.random(),p,s;for(s=0;s<c;s+=~~b){p=Math.random();for(var g=0;g<b;g++)d[s+g]=f(j,p,g/b);j=p}j=d[c-~~b];p=d[0];for(g=0;g<b;g++)d[c-~~b+g]=f(j,p,g/b);return d}function f(b,c,d){d=0.5*(1-Math.cos(d*Math.PI));return b*(1-d)+c*d}for(var d=[],j=0,p=Math.pow(2,4);8>j;j++,p*=2){var s=b(c/p);if(s===l)break;d.push(s)}s=[].concat(d[0]);j=1;for(p=0.5;j<d.length;j++,p*=0.5)for(var A=0;A<c;A++)s[A]+=d[j][A]*p;for(j=0;j<s.length;j++)s[j]/=
2;return s}};gls2.bc.noise=gls2.bc.Rk(512);gls2.Ba={index:-1,data:l,setup:function(c){this.data=[];c=new MersenneTwister(c);for(var b=0;1E3>b;b++)this.data[b]=c.next()},random:function(){this.index+=1;1E3<=this.index&&(this.index%=1E3);return this.data[this.index]},rand:function(c,b){return Math.floor(this.random()*(b-c+1))+c},randf:function(c,b){return this.random()*(b-c)+c}};gls2.hb=l;gls2.Pb=function(c,b,f){b||gls2.kf();b=tm.asset.AssetManager.get(c);var d=tm.asset.AssetManager.get("bgmLoopInfo");b&&(gls2.hb=b.clone(),gls2.hb.volume=0.1*gls2.core.gd,gls2.hb.loop=!f,gls2.hb.play(),d.data[c]&&(gls2.hb.source.loopStart=d.data[c].start,gls2.hb.source.loopEnd=d.data[c].end))};gls2.kf=function(){gls2.hb!==l&&gls2.hb.source.playbackState===AudioBufferSourceNode.PLAYING_STATE&&gls2.hb.stop()};
gls2.Kf=function(){if(gls2.hb!==l){var c=gls2.hb;gls2.hb=l;c.loop=w;var b=function(){c.volume-=0.001;0>=c.volume?c.em===AudioBufferSourceNode.PLAYING_STATE&&c.stop():setTimeout(b,10)};setTimeout(b,10)}};
gls2.va=function(c){if(0!==gls2.core.uc&&gls2.va.played[c]!==gls2.core.frame){var b=tm.asset.AssetManager.get("sound/"+c);b&&(b=b.clone().play(),"vo"===c.substring(0,2)?(b.volume=0.5*gls2.core.uc,gls2.va.$h!==l&&gls2.va.$h.stop(),gls2.va.$h=b):b.volume="explode6"===c?0.2*gls2.core.uc:0.1*gls2.core.uc);gls2.va.played[c]=gls2.core.frame}};gls2.va.played={};gls2.va.$h=l;(function(){var c=l,b=l;gls2.TitleScene=tm.createClass({superClass:gls2.Scene,result:l,oa:0,Qd:[],Se:w,Wi:l,dj:0,Tf:0,init:function(){this.superInit();tm.display.Label("TM-Shooter",50).setPosition(240,160).addChildTo(this);tm.display.Label("version 1.4",22).setPosition(432,192).setAlign("right").addChildTo(this);tm.display.Label("1st ",22).setPosition(72,448).setAlign("left").addChildTo(this);tm.display.Label(S[0]+" PTS",22).setPosition(408,448).setAlign("right").addChildTo(this);tm.display.Label("2nd ",
22).setPosition(72,480).setAlign("left").addChildTo(this);tm.display.Label(S[1]+" PTS",22).setPosition(408,480).setAlign("right").addChildTo(this);this.Wi=tm.display.Label().setPosition(240,256);tm.display.Label("press button").setPosition(240,576).addChildTo(this);this.addEventListener("enter",function(){gls2.core.fps=FPS;this.Se=w;this.Nl()})},Nl:function(){for(var b=(""+Math.floor(gls2.core.Ue)).padding(16," "),c="",j=0;j<b.length;j+=4)c+=b.substring(j,j+4)+" ";this.Wi.text="HIGH SCORE: "+c.trim()},
Kd:function(b){b.fillStyle="black";b.fillRect(0,0,480,640)},update:function(b){this.Bi(80*Math.cos(0.01*this.oa)+240,80*Math.sin(0.01*this.oa)+320,0);this.Bi(80*Math.cos(0.01*this.oa+Math.PI)+240,80*Math.sin(0.01*this.oa+Math.PI)+320,1);(b.keyboard.getKeyDown("z")||b.keyboard.getKeyDown("c")||b.keyboard.getKeyDown("space"))&&!this.Se&&this.Fh();this.oa+=1},Bi:function(f,d,j){if(!this.Se){c===l&&(c=gls2.Ra(80,1,0.8,tm.graphics.Canvas().resize(80,80).setFillStyle(tm.graphics.RadialGradient(40,40,0,
40,40,40).addColorStopList([{offset:0,color:"rgba(255,255,255,0.1)"},{offset:1,color:"rgba(155,  0,  0,0.0)"}]).toStyle()).fillRect(0,0,80,80).element));b===l&&(b=gls2.Ra(80,1,0.8,tm.graphics.Canvas().resize(80,80).setFillStyle(tm.graphics.RadialGradient(40,40,0,40,40,40).addColorStopList([{offset:0,color:"rgba(255,255,255,0.1)"},{offset:1,color:"rgba(  0,  0,155,0.0)"}]).toStyle()).fillRect(0,0,80,80).element));j=0===j?c.clone().addChildTo(this):b.clone().addChildTo(this);j.speed=0.6;var p=gls2.la.randf(0,
2*Math.PI),s=gls2.la.rand(0,20);j.setPosition(Math.cos(p)*s+f,Math.sin(p)*s+d);var A=this;j.update=function(){this.x+=Math.cos(p)*this.speed;this.y+=Math.sin(p)*this.speed;if(-50>this.x||530<this.x||-50>this.y||690<this.y){this.remove();var b=A.Qd.indexOf(this);-1!==b&&A.Qd.splice(b,1)}};this.Qd.push(j)}},Fh:function(){Y(this,"MAIN MENU",["arcade mode","training mode","setting"],this.ml,{defaultValue:this.dj,menuDescriptions:["\u30b2\u30fc\u30e0\u3092\u958b\u59cb\u3057\u307e\u3059","\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u3092\u958b\u59cb\u3057\u307e\u3059",
"\u8a2d\u5b9a\u3092\u5909\u66f4\u3057\u307e\u3059"]})},ml:function(b){2!==b&&(this.dj=b);switch(b){case 0:gls2.core.mode=0;this.tweener.clear().call(function(){this.Se=k;for(var b=0,c=this.Qd.length;b<c;b++)this.Qd[b].speed=8}.bind(this)).wait(1E3).call(function(){gls2.core.replaceScene(gls2.wi())}.bind(this));break;case 1:this.vl();break;case 2:this.sc()}},vl:function(){Y(this,"STAGE",["stage 1","stage 2","stage 3","stage 4","stage 5"],this.pl,{})},pl:function(b){5===b?this.Fh():(gls2.core.mode=
1,gls2.core.pj=b,this.tweener.clear().call(function(){this.Se=k;for(var b=0,c=this.Qd.length;b<c;b++)this.Qd[b].speed=8}.bind(this)).wait(1E3).call(function(){gls2.core.replaceScene(gls2.wi())}.bind(this)))},sc:function(){Y(this,"SETTING",["bgm volume","sound volume","particle","bullet appearance"],this.Ch,{defaultValue:this.Tf,menuDescriptions:["BGM\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u8a2d\u5b9a\u3057\u307e\u3059","\u52b9\u679c\u97f3\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u8a2d\u5b9a\u3057\u307e\u3059",
"\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u306eON/OFF\u3092\u8a2d\u5b9a\u3057\u307e\u3059","\u6575\u5f3e\u306e\u898b\u305f\u76ee\u306b\u95a2\u3059\u308b\u8a2d\u5b9a\u3067\u3059"]})},Ch:function(b){4!==b&&(this.Tf=b);switch(b){case 0:this.Dh();break;case 1:this.Hh();break;case 2:this.Gh();break;case 3:this.Eh();break;default:this.Fh()}},Dh:function(){Y(this,"BGM VOLUME","012345".split(""),this.yh,{defaultValue:gls2.core.gd,onCursorMove:function(b){gls2.hb!==l&&"exit"!==b&&(gls2.hb.volume=0.1*b)},showExit:w})},
yh:function(b){6!==b&&(gls2.core.gd=b);this.$c();this.sc()},Hh:function(){Y(this,"SE VOLUME","012345".split(""),this.Bh,{defaultValue:gls2.core.uc,showExit:w})},Bh:function(b){6!==b&&(gls2.core.uc=b);this.$c();this.sc()},Gh:function(){Y(this,"PARTICLES",["ON","LITE","OFF"],this.Ah,{defaultValue:gls2.core.Kc,showExit:w})},Ah:function(b){gls2.core.Kc=b;this.$c();this.sc()},Eh:function(){Y(this,"BULLET",["NORMAL","LARGE"],this.zh,{defaultValue:gls2.core.Ab,showExit:w,menuDescriptions:["\u901a\u5e38\u30b5\u30a4\u30ba\u3067\u8868\u793a\u3057\u307e\u3059",
"\u5927\u304d\u3081\u306b\u8868\u793a\u3057\u307e\u3059"]})},zh:function(b){gls2.core.Ab=b;this.$c();this.sc()},$c:function(){localStorage.setItem("tmshooter.config",JSON.stringify({bgmVolume:gls2.core.gd,seVolume:gls2.core.uc,particleEffectLevel:gls2.core.Kc,bulletBig:gls2.core.Ab}))},toString:function(){return"gls2.TitleScene"}})})();(function(){gls2.wi=tm.createClass({superClass:gls2.Scene,mode:0,types:l,dg:l,kc:l,lc:l,mc:l,rh:l,ph:l,type:0,style:0,Dd:w,Wf:w,init:function(){this.superInit();tm.display.Sprite("result_bg",528,704).setPosition(240,320).addChildTo(this);tm.display.Label("PLAYER SELECT",40).setPosition(240,64).addChildTo(this);this.types=this.Dl();this.dg=this.Cl();var b=tm.display.TriangleShape(20,20,{fillStyle:"rgba(255,255,255,0.7)",strokeStyle:"transparent"}).setPosition(48,320).setRotation(-90);b.update=function(b){this.setScale(b.keyboard.getKey("left")?
2:1);this.alpha=1+0.5*Math.sin(0.1*b)};b.addChildTo(this);b=tm.display.TriangleShape(20,20,{fillStyle:"rgba(255,255,255,0.7)",strokeStyle:"transparent"}).setPosition(432,320).setRotation(90);b.update=function(b){this.setScale(b.keyboard.getKey("right")?2:1);this.alpha=1+0.5*Math.sin(0.1*b)};b.addChildTo(this);this.mode=0;this.dg.visible=w;this.vh(-1,k);this.kc.update();this.lc.update();this.mc.update();gls2.va("voSelectShip");gls2.Pb("bgmShipSelect",k)},Dl:function(){var b=tm.display.CanvasElement();
b.addChildTo(this);this.rh=tm.display.Label("Type-A").setPosition(240,150);this.rh.addChildTo(b);var c=["\u4e00\u70b9\u96c6\u4e2d\u578b\n\u30b9\u30d4\u30fc\u30c9\uff1a\u6700\u901f\n\n\u7d76\u5927\u306a\u5a01\u529b\u3092\u8a87\u308b\n\u6b63\u9762\u706b\u529b\u3068\n\u30b9\u30d4\u30fc\u30c9\u3067\n\u6575\u3092\u8e42\u8e99\u3059\u308b","\u53ef\u5909\u578b\n\u30b9\u30d4\u30fc\u30c9\uff1a\u4e2d\n\n\u6b63\u9762\u3068\u4e21\u30b5\u30a4\u30c9\u306b\n\u6483\u3061\u5206\u3051\u3067\u304d\u308b\n\u53ef\u5909\u578b\u30d3\u30c3\u30c8\u3092\u6301\u3064\n\u30c6\u30af\u30cb\u30ab\u30eb\u306a\u6a5f\u4f53",
"\u5e83\u7bc4\u56f2\u578b\n\u30b9\u30d4\u30fc\u30c9\uff1a\u9045\n\n\u5e83\u7bc4\u56f2\u306b\u653b\u6483\u53ef\u80fd\u306a\n\u30ef\u30a4\u30c9\u30b7\u30e7\u30c3\u30c8\u3092\n\u6301\u3064\u6a5f\u4f53\n\u9ad8\u3044\u6383\u8a0e\u80fd\u529b"];this.sh=tm.display.Label(c[0],16).setPosition(240,500);this.sh.update=function(){this.sh.text=c[this.type]}.bind(this);this.sh.addChildTo(b);var d=tm.asset.SpriteSheet({image:"fighter",frame:{width:64,height:64},animations:{typeB:{frames:[10,17,24],next:"typeB",frequency:2}}});
this.kc=tm.display.Sprite("fighter",64,64).setFrameIndex(3);this.lc=tm.display.AnimationSprite(d,64,64).gotoAndPlay("typeB");this.mc=tm.display.Sprite("fighter",64,64).setFrameIndex(31);this.kc.pb=0;this.lc.pb=1;this.mc.pb=2;this.kc.setScale(3).setPosition(0,320).addChildTo(b);this.lc.setPosition(0,320).addChildTo(b);this.mc.setPosition(0,320).addChildTo(b);this.kc.update=function(){this.x=240+90*Math.sin(2*this.pb/3*Math.PI)};this.lc.update=function(){this.x=240+90*Math.sin(2*this.pb/3*Math.PI)};
this.mc.update=function(){this.x=240+90*Math.sin(2*this.pb/3*Math.PI)};return b},Cl:function(){var b=tm.display.CanvasElement();b.addChildTo(this);this.ph=tm.display.Label("Shot Style").setPosition(240,150);this.ph.addChildTo(b);this.rd=tm.display.TriangleShape(40,40,{fillStyle:"hsla(180, 80%, 80%, 0.5)",strokeStyle:"transparent"}).setPosition(240,384).addChildTo(b);this.Ec=tm.app.Object2D();this.Ec.addChildTo(this.rd);this.Ec.update=function(b){this.Ec.rotation=1===this.type?45*Math.sin(0.1*b.frame):
0}.bind(this);this.Aa=[];this.Aa[0]=tm.display.TriangleShape(20,20,{fillStyle:"hsla(180, 80%, 80%, 0.5)",strokeStyle:"transparent"});this.Aa[0].update=function(){0===this.type?this.Aa[0].setPosition(-30,20).setRotation(0):1===this.type?this.Aa[0].setPosition(-30,20).setRotation(-5):2===this.type&&this.Aa[0].setPosition(-30,10).setRotation(-10)}.bind(this);this.Aa[1]=tm.display.TriangleShape(20,20,{fillStyle:"hsla(180, 80%, 80%, 0.5)",strokeStyle:"transparent"});this.Aa[1].update=function(){0===this.type?
this.Aa[1].setPosition(30,20).setRotation(0):1===this.type?this.Aa[1].setPosition(30,20).setRotation(5):2===this.type&&this.Aa[1].setPosition(30,10).setRotation(10)}.bind(this);this.Aa[2]=tm.display.TriangleShape(20,20,{fillStyle:"hsla(180, 80%, 80%, 0.5)",strokeStyle:"transparent"});this.Aa[2].update=function(){0===this.type?this.Aa[2].setPosition(-50,10).setRotation(0):1===this.type?this.Aa[2].setPosition(-50,10).setRotation(-10):2===this.type&&this.Aa[2].setPosition(-50,20).setRotation(-20)}.bind(this);
this.Aa[3]=tm.display.TriangleShape(20,20,{fillStyle:"hsla(180, 80%, 80%, 0.5)",strokeStyle:"transparent"});this.Aa[3].update=function(){0===this.type?this.Aa[3].setPosition(50,10).setRotation(0):1===this.type?this.Aa[3].setPosition(50,10).setRotation(10):2===this.type&&this.Aa[3].setPosition(50,20).setRotation(20)}.bind(this);this.rd.line=c(0,0,0,130,8);this.rd.line.addChildTo(this.rd);this.Aa.each(function(b){b.line=c(0,0,0,130,5);b.line.addChildTo(b);b.addChildTo(this.Ec)}.bind(this));var f=["\u30b7\u30e7\u30c3\u30c8\u5f37\u5316\u578b\n\n\u30d3\u30c3\u30c8\u3092\uff14\u3064\u88c5\u5099\u3057\u305f\n\u30b7\u30e7\u30c3\u30c8\u91cd\u8996\u306e\u30b9\u30bf\u30a4\u30eb",
"\u30ec\u30fc\u30b6\u30fc\u5f37\u5316\u578b\n\n\u30ec\u30fc\u30b6\u30fc\u306e\u5a01\u529b\u306b\u512a\u308c\n\u5bfe\u5927\u578b\u6a5f\u6226\u3067\n\u6709\u5229\u306a\u30b9\u30bf\u30a4\u30eb","\u30a8\u30ad\u30b9\u30d1\u30fc\u30c8\u5f37\u5316\u578b\n\n\u30b7\u30e7\u30c3\u30c8\u3068\u30ec\u30fc\u30b6\u30fc\u306e\n\u4e21\u65b9\u304c\u5f37\u5316\u3055\u308c\u305f\u30b9\u30bf\u30a4\u30eb\n\n<<\u30b2\u30fc\u30e0\u96e3\u6613\u5ea6\u304c\u4e0a\u6607\u3057\u307e\u3059\uff01>>\n<<\u4e0a\u7d1a\u8005\u5411\u3051>>",
"\u30d3\u30ae\u30ca\u30fc\u990a\u6210\u578b\n\n\u30b7\u30e7\u30c3\u30c8\u3068\u30ec\u30fc\u30b6\u30fc\u306e\u4e21\u65b9\u3092\n\u540c\u6642\u306b\u767a\u5c04\u3067\u304d\u308b\u30b9\u30bf\u30a4\u30eb\n\n<<\u30b9\u30b3\u30a2\u304c1/10\u306b\u306a\u308a\u307e\u3059\uff01>>\n<<\u521d\u5fc3\u8005\u5411\u3051>>"];this.qh=tm.display.Label(f[0],16).setPosition(240,500);this.qh.update=function(){this.qh.text=f[this.style]}.bind(this);this.qh.addChildTo(b);return b},update:function(b){if(0===this.mode)if(this.types.alpha=
1,this.dg.visible=w,!this.Wf&&b.keyboard.getKeyDown("left"))this.vh(-1,w),gls2.va("select");else if(!this.Wf&&b.keyboard.getKeyDown("right"))this.vh(1,w),gls2.va("select");else{if(b.keyboard.getKeyDown("z")||b.keyboard.getKeyDown("c")||b.keyboard.getKeyDown("space"))this.mode=1,gls2.va("decision")}else 1===this.mode&&(this.types.alpha=0.1,this.dg.visible=k,b.keyboard.getKeyDown("left")?(this.style=(this.style-1+4)%4,gls2.va("select")):b.keyboard.getKeyDown("right")?(this.style=(this.style+1+4)%4,
gls2.va("select")):b.keyboard.getKeyDown("z")||b.keyboard.getKeyDown("c")||b.keyboard.getKeyDown("space")?(this.Dd=k,this.lj(),gls2.va("decision")):b.keyboard.getKeyDown("x")&&(this.mode=0),this.Ol(0===~~(b.frame/60)%2))},dm:function(){Y(this,"AUTO BOMB",["on","off"],this.il,{defaultValue:0,menuDescriptions:["\u88ab\u5f3e\u6642\u306b\u81ea\u52d5\u3067\u30dc\u30f3\u30d0\u30fc\u3092\u6295\u4e0b\u3057\u307e\u3059","\u30dc\u30f3\u30d0\u30fc\u306e\u6295\u4e0b\u306f\u624b\u52d5\u3067\u306e\u307f\u884c\u3044\u307e\u3059\u3002\u30df\u30b9\u6642\u306b\u6700\u5927\u30dc\u30e0\u6570\u304c\u5897\u52a0\u3057\u307e\u3059"],
showExit:k})},il:function(b){2!==b&&(this.Dd=0===b,this.lj())},lj:function(){Y(this,"ARE YOU READY?",["ok"],this.jl,{defaultValue:0,menuDescriptions:["\u51fa\u6483\u3057\u307e\u3059"],showExit:k})},jl:function(b){0===b&&this.Gl()},vh:function(b,c){this.type=(this.type+b+3)%3;[this.kc,this.lc,this.mc][this.type].remove().addChildTo(this.types);c?(this.kc.pb-=b,this.kc.scaleX=0===this.type?5:1,this.kc.scaleY=0===this.type?5:1,this.lc.pb-=b,this.lc.scaleX=1===this.type?5:1,this.lc.scaleY=1===this.type?
5:1,this.mc.pb-=b,this.mc.scaleX=2===this.type?5:1,this.mc.scaleY=2===this.type?5:1):(this.Wf=k,this.kc.tweener.clear().to({pb:this.kc.pb-b,scaleX:0===this.type?5:1,scaleY:0===this.type?5:1},300),this.lc.tweener.clear().to({pb:this.lc.pb-b,scaleX:1===this.type?5:1,scaleY:1===this.type?5:1},300),this.mc.tweener.clear().to({pb:this.mc.pb-b,scaleX:2===this.type?5:1,scaleY:2===this.type?5:1},300),this.tweener.clear().wait(310).call(function(){this.Wf=w}.bind(this)));this.rh.text=["Type-A","Type-B","Type-C"][this.type]},
Gl:function(){gls2.core.ba.Dd=this.Dd;gls2.core.replaceScene(gls2.core.ba);gls2.core.ba.start(this.type,this.style);gls2.Kf()},Ol:function(b){this.ph.text=["Shot","Laser","Expert","Beginner"][this.style]+" Style";1===this.style?(this.rd.line.vc=w,this.Aa[0].line.vc=w,this.Aa[1].line.vc=w,this.Aa[2].line.vc=w,this.Aa[3].line.vc=w):(this.rd.line.vc=k,this.Aa[0].line.vc=k,this.Aa[1].line.vc=k,this.Aa[2].line.vc=k,this.Aa[3].line.vc=k);b?(this.Aa[0].visible=k,this.Aa[1].visible=k,1===this.style?(this.Aa[2].visible=
w,this.Aa[3].visible=w):(this.Aa[2].visible=k,this.Aa[3].visible=k),this.rd.line.lineWidth=5):(3!==this.style&&this.Aa.each(function(b){b.visible=w}),this.rd.line.lineWidth=0===this.style?10:25)},Kd:K()});var c=tm.createClass({superClass:tm.display.CanvasElement,vc:k,init:function(b,c,d,j,p){this.superInit();this.angle=d-0.5*Math.PI;this.x=b+10*Math.cos(this.angle);this.y=c+10*Math.sin(this.angle);this.length=j;this.fillStyle=this.strokeStyle="hsla(180, 80%, 80%, 1.0)";this.i=0;this.lineWidth=p},
update:function(b){this.i=b.frame%20/20},draw:function(b){b.lineWidth=this.lineWidth;if(this.vc&&5===this.lineWidth){var c=5*Math.cos(this.angle-Math.PI/2),d=5*Math.sin(this.angle-Math.PI/2);b.drawArrow(this.x-c,this.y-d,Math.cos(this.angle)*this.length*this.i+this.x-c,Math.sin(this.angle)*this.length*this.i+this.y-d,1.2*this.lineWidth);b.drawArrow(this.x+c,this.y+d,Math.cos(this.angle)*this.length*this.i+this.x+c,Math.sin(this.angle)*this.length*this.i+this.y+d,1.2*this.lineWidth)}else b.drawArrow(this.x,
this.y,Math.cos(this.angle)*this.length*this.i+this.x,Math.sin(this.angle)*this.length*this.i+this.y,1.2*this.lineWidth)}})})();gls2.bb=tm.createClass({superClass:gls2.Scene,ea:l,score:0,Uc:0,tb:0,Va:0,Ye:0,mb:0,hd:0,ya:0,Ha:l,ka:l,td:3,ag:0,cg:0,ec:0,le:0,Ze:0,Vf:0,Dd:w,Sb:0,Gd:0,Fi:0,Od:w,Rf:w,Jc:0,Ob:0,Ma:w,We:0,ne:0,Wa:0,Vc:0,$l:0,Zl:0,Nf:l,Qe:l,Ih:l,gh:l,eh:l,fh:l,Xg:l,$i:l,fc:l,Wb:l,Hd:l,Oe:w,dl:w,Td:l,Yi:0,ad:l,Re:l,$e:l,Me:l,ge:l,fd:l,Nd:l,nh:l,Vh:0,Th:0,tj:0,Uh:0,te:0,Sd:0,nd:0,se:0,Rd:0,md:0,Df:0,Nh:w,init:function(){gls2.bb.Ce!==l&&h(Error("class 'gls2.GameScene' is singleton!!"));this.superInit();gls2.bb.Ce=this;
this.Wb=gls2.Yj(this);this.Wb.Hb.addChildTo(this);this.ka=gls2.Pj().Ga;this.ka.addChildTo(this);this.Nf=gls2.bb.Layer().addChildTo(this);this.Qe=gls2.bb.Layer().addChildTo(this);this.gh=gls2.bb.Layer().addChildTo(this);this.eh=gls2.bb.Layer().addChildTo(this);this.Ih=gls2.bb.Layer().addChildTo(this);this.fh=gls2.bb.Layer().addChildTo(this);this.Xg=gls2.bb.Layer().addChildTo(this);this.$i=gls2.bb.li(this).addChildTo(this);tm.Lb.vd.Ne.fe=this;this.fc=tm.app.Object2D();this.fc.addChildTo(this);this.fc.update=
function(c){this.ql(c)}.bind(this);this.addEventListener("exit",function(){this.Wb.clear()})},addChild:function(c){c.jb?this.eh.addChild(c):c instanceof gls2.Oa?this.Xg.addChild(c):c instanceof gls2.Ng||c instanceof gls2.ei||c instanceof gls2.ii?this.Nf.addChild(c):c instanceof gls2.da?c.Yc?this.Nf.addChild(c):this.gh.addChild(c):c instanceof gls2.ti?this.Ih.addChild(c):c===this.fc||c===this.ka||c instanceof gls2.bb.Layer||c instanceof gls2.bb.li||c instanceof gls2.vi||c instanceof gls2.ki?this.superClass.prototype.addChild.apply(this,
arguments):(console.error("unknown type child."),h(Error(c)))},update:function(c){this.zl(c.keyboard);this.Ha.update(c.frame);0===c.frame%2&&this.Wb.update();c.keyboard.getKeyDown("space")?this.cf(0):c.keyboard.getKeyDown("p")&&(this.Zf().saveAsImage(),this.cf(0))},Zf:function(){var c=tm.graphics.Canvas();c.resize(480,640);c.clearColor("black");c.drawImage(this.ka.ka.element,0,0);c.drawImage(this.app.canvas.element,0,0);c.drawImage(this.Wb.element,0,0);return c},ql:function(c){this.ea.Gc===w&&gls2.ga.erase();
var b;b=[].concat(gls2.da.fb);for(var f=[].concat(gls2.de.fb),d=f.length;f[--d]!==i;)for(var j=b.length;b[--j]!==i;){var p=b[j],s=f[d];if(!(0>=p.ra||p.eb)&&gls2.Collision.oe(p,s))if(s.Mf(1),s.remove(),p.Wc(s.Cd)){this.ec+=1;this.Ma?this.Jb(0):this.Jb(0.005);this.xh(p);break}}s=this.ea.Ub;if(this.ea.Tb){b=[].concat(gls2.da.fb);b.sort(function(b,c){return b.y-c.y});for(j=b.length;b[--j]!==i;)if(p=b[j],!(0>=p.ra||p.eb)&&gls2.Collision.oe(p,s)){s.Bl(p.y+p.boundingHeightBottom);p.Wc(s.Cd)?(this.ec+=1,
this.Ma?this.Jb(0):this.Jb(0.01),this.xh(p)):(this.mb=Math.min(this.mb+0.02,1),this.Ma?(this.ee(0.01*W[this.Vc]),this.Jb(0)):(this.ee(0.01),this.Jb(0.001)));s.Mf(2);break}f={x:this.ea.x,y:this.ea.y,boundingWidthLeft:50,boundingWidthRight:50,boundingHeightTop:100,boundingHeightBottom:40};b=[].concat(gls2.da.fb);for(j=b.length;b[--j]!==i;)if(p=b[j],!(0>=p.ra||p.eb)&&gls2.Collision.oe(p,f))p.Wc(s.Cd)?(this.ec+=1,this.Ma?this.Jb(0.03):this.Jb(0.015),this.xh(p)):(this.mb=Math.min(this.mb+0.02,1),this.Ma?
(this.ee(0.01*W[this.Vc]),this.Jb(0.004)):(this.ee(0.01),this.Jb(0.002))),s.Ok(2,this.ea.x,this.ea.y-30),this.Df+=1,300<this.Df&&gls2.core.ta("aura300")}if(this.Od){gls2.ga.erase();b=[].concat(gls2.da.fb);for(j=b.length;b[--j]!==i;)if(p=b[j],!(0>=p.ra||p.eb)&&p.dc()&&p.Wc(2))this.Bd(p.score),this.ec+=1;this.mb=this.Va=0}if(this.Ma){j=[].concat(gls2.de.fb);for(p=j.length;j[--p]!==i;)if(s=j[p],!(0>=s.ra)){f=[].concat(gls2.Oa.fb);for(b=f.length;f[--b]!==i;)d=f[b],d.visible!==w&&(0<s.ra&&gls2.Collision.oe(s,
d))&&(d.ra-=6-this.Ob,0>d.ra&&(d.za(),this.Bd(10),this.ee(1),this.Vi(w,w,d.x,d.y,1)),s.ra-=1)}}if(this.Oe)gls2.ga.erase();else{if(this.ea.parent!==l&&this.ea.eb===w&&this.Od===w&&0>=this.We){s=w;for(j=gls2.Oa.fb.length;gls2.Oa.fb[--j]!==i;)if(b=gls2.Oa.fb[j],b.visible!==w&&gls2.Collision.oe(b,this.ea)){this.ea.Wc();s=k;0<this.Sb&&this.Dd?(this.Ob=gls2.la.clamp(this.Ob-1,0,1),this.Ge(-0.01),gls2.qi(this.ea,this).setPosition(this.ea.x,this.ea.y).addChildTo(this),gls2.core.ta("bomb2"),this.fd[this.ya]+=
1):this.ij();break}if(!s)for(j=gls2.da.fb.length;gls2.da.fb[--j]!==i;)if(p=gls2.da.fb[j],!(0>=p.ra||p.eb)&&!p.Yc&&gls2.Collision.oe(p,this.ea)){this.ea.Wc();0<this.Sb&&this.Dd?(this.Ob=gls2.la.clamp(this.Ob-1,0,1),this.Ge(-0.01),gls2.qi(this.ea,this).setPosition(this.ea.x,this.ea.y).addChildTo(this),gls2.core.ta("bomb2"),this.fd[this.ya]+=1):this.ij();break}}this.Ma&&(this.ne-=1,0>=this.ne&&this.If());this.We=Math.max(this.We-1,0);this.mb-=0.01;0>=this.mb&&(this.mb=0,this.Ma||0<this.Wa?this.hd=this.Va=
this.tb=0:(0<this.Va&&(0>=this.hd&&(this.hd=0.005*this.Va),this.tb=this.tb*(this.Va-this.hd)/this.Va,this.Va-=this.hd),0>=this.Va&&(this.hd=this.Va=this.tb=0)));this.Rf&&(this.score+=100);s=gls2.Oa.fb.length;c.fps=500<s?Math.floor(gls2.la.clamp(500/s,0.2,1)*FPS):FPS}},xh:function(c){this.Vi(c.Yc,this.Ma||22500>gls2.Xc(c,this.ea),c.x,c.y,c.star*X[this.Vc],c instanceof gls2.wd);this.ee(W[this.Vc]);for(var b=this.tb,f=~~(this.Va/1E3)+1,d=0;d<f;d++)b+=c.score,this.Bd(b);this.tb+=c.score*f},Vi:function(c,
b,f,d,j,p){c=c?gls2.ek:gls2.yi;for(var s=0;s<j;s++){var A=c(b);A.setPosition(f,d);p&&(A.Md=k)}},hl:function(c){gls2.va("star");c.bj?(this.cg+=1,this.tb+=1E3,this.Bd(1E3+0*this.tb),this.Ma?this.Jb(0):this.Jb(0.01)):(this.ag+=1,this.tb+=100,this.Bd(100+0*this.tb),this.Ma?this.Jb(0):this.Jb(0.001))},start:function(c,b){this.Wb.ie.xk().clear();this.Uc=this.score=0;this.td=3;this.Sb=this.Gd=T[b];this.Fi=V[b];this.Wa=this.Ob=this.Jc=0;this.If();this.Od=w;this.Ze=this.Vf=0;this.ad=[];this.Re=[];this.$e=
[];this.Me=[];this.ge=[];this.fd=[];this.Nd=[];for(var f=0;5>f;f++)this.ad.push(0),this.Re.push(0),this.$e.push(0),this.Me.push(0),this.ge.push(0),this.fd.push(0),this.Nd.push(0);this.nh=[];this.ea=gls2.ti(this,c,b);this.Rh(0);M.Ua.Bb.$bg=3!==b?0:1;M.Ua.Bb.$ex=2!==b?0:1;0===gls2.core.mode?this.Wh(0):1===gls2.core.mode&&this.Wh(gls2.core.pj);gls2.va("voLetsGo");this.Il();0===c?gls2.core.ta("launch0"):1===c?gls2.core.ta("launch1"):2===c&&gls2.core.ta("launch2")},Wh:function(c){this.Fb("3...2...1...");
this.ea.parent!==l&&this.ea.remove();gls2.da.Ke();gls2.de.Ke();gls2.ga.Ke();this.Nf.removeChildren();this.eh.removeChildren();this.fh.removeChildren();this.Ih.removeChildren();this.Xg.removeChildren();this.fc.removeChildren();this.ec=this.le=this.cg=this.ag=this.Ye=this.mb=this.Va=this.tb=0;this.Hd=l;this.dl=this.Oe=w;this.Ze=0;this.Wb.Hb.Te=0;this.Ob=this.Wb.Hb.Hc=0;this.ya=c;this.Ha=gls2.zd.create(this,c);this.tweener.clear().wait(1E3).call(function(){this.th()}.bind(this));this.ka.tweener.clear();
this.Df=this.md=this.Rd=this.se=this.nd=this.Sd=this.te=this.Uh=this.Th=this.Vh=0;this.Nh=w;this.Vh=gls2.core.frame;this.tj=Date.now()},th:function(){this.Fb("Let's go!");this.ea.setPosition(240,740).setFrameIndex(3).addChildTo(this);this.ea.Ub.addChildTo(this);this.ea.Gc=w;this.ea.eb=k;this.ea.Ld=w;this.ea.Tb=w;this.ea.tweener.clear().moveBy(0,-180,1E3,"easeOutBack").call(function(){this.Ie=this.Gc=k}.bind(this.ea)).wait(3E3).call(function(){this.eb=w}.bind(this.ea))},ij:function(){gls2.pa.Jf(this.ea.x,
this.ea.y,this);this.Fb("I was shot down.");this.ea.Gc=w;this.ea.remove();this.td-=1;this.Wa=this.hd=this.Va=this.mb=0;this.Ze+=1;this.Vf+=1;this.$e[this.ya]+=1;this.Ob=gls2.la.clamp(this.Ob-3,0,1);this.Ge(-0.03);0<this.td?this.tweener.clear().wait(1E3).call(function(){this.Sb=this.Gd=Math.min(this.Gd+1,this.Fi);this.th()}.bind(this)):(this.Td=this.Zf().canvas.toDataURL("image/png"),gls2.core.Ue===this.score&&(gls2.core.Wk=this.Td),this.tweener.clear().wait(2E3).call(function(){this.Uc<gls2.core.Hi()||
1===gls2.core.mode?this.tl():this.Ui()}.bind(this)))},Rh:function(c){M.Ua.Bb.$rank=gls2.la.clamp(c,0,0.5)},Ge:function(c){this.Rh(M.Ua.Bb.$rank+c)},Nk:function(){this.Sd=Date.now();this.nd+=this.Sd-this.te;this.Rd=gls2.core.frame;this.md+=this.Rd-this.se;this.Fb("System rebooted.",k);for(var c=this.score=0;c<this.ad.length;c++)this.ad[c]=0;this.Uc+=1;this.Me[this.ya]+=1;this.td=3;this.Sb=this.Gd=T[this.ea.style];this.Ob=0;this.Rh(0);this.th()},yk:function(){this.Ii();gls2.Pb("bgmResult");var c=tm.app.Object2D();
c.addChildTo(this.fc);c.tweener.wait(1E3).call(function(){this.app.replaceScene(gls2.ResultScene(this,this.Zf()));c.remove()}.bind(this))},Ui:function(){this.ad[this.ya]=0===this.ya?this.score:this.score-this.ad[this.ya-1];this.Ii();gls2.kf();this.app.replaceScene(gls2.ji())},Ii:function(){this.Uh=Date.now();var c=this.Uh-this.tj-this.nd;this.Th=gls2.core.frame;this.Re[this.ya]=1E3*((this.Th-this.Vh-this.md)/c)},Bd:function(c){3===this.ea.style&&(c*=0.1);var b=this.score;this.score+=c;for(c=0;c<S.length;c++){var f=
S[c];b<f&&f<=this.score&&(this.Qi(),0==c&&this.app.ta("extend1"),1==c&&this.app.ta("extend2"))}gls2.core.Ue=Math.max(gls2.core.Ue,this.score);gls2.core.Ue===this.score&&(gls2.core.Xk=this.ya,gls2.core.Zk=this.ea.type,gls2.core.Yk=this.ea.style,gls2.core.Vk=this.Uc);1E12<=this.score?gls2.core.ta("score1T"):1E11<=this.score?gls2.core.ta("score100G"):5E10<=this.score?gls2.core.ta("score50G"):2E10<=this.score?gls2.core.ta("score20G"):2E9<=this.score?gls2.core.ta("score2G"):1E8<=this.score&&gls2.core.ta("score100M")},
ee:function(c){this.hd=0;this.Va+=c;this.Ye=Math.max(this.Ye,this.Va);1<=c&&(this.mb=1);1E5<=this.Va?this.app.ta("combo100000"):1E4<=this.Va?this.app.ta("combo10000"):1E3<=this.Va?this.app.ta("combo1000"):100<=this.Va&&this.app.ta("combo100")},Jb:function(c){if(10!==this.Wa){0===this.Wa&&(this.Yi=gls2.core.frame);for(c*=0.75;1<c;)gls2.xd(this.ea).addChildTo(this),c-=1,this.Jc=0,this.Wa+=1,1===this.Wa?(this.Fb("HYPER SYSTEM, stand by.",k),gls2.va("voHyperStandBy")):(this.Fb("HYPER SYSTEM, ready.",
k),gls2.va("voHyperReady")),5<this.Wa&&60>=gls2.core.frame-this.Yi&&gls2.core.ta("hyperAndHyperAndHyper");this.Jc=gls2.la.clamp(this.Jc+c,0,1);1<=this.Jc&&(gls2.xd(this.ea).addChildTo(this),this.Wa+=1,this.Jc-=1,1===this.Wa?(this.Fb("HYPER SYSTEM, stand by.",k),gls2.va("voHyperStandBy")):(this.Fb("HYPER SYSTEM, ready.",k),gls2.va("voHyperReady")))}},Hl:function(){0.5>Math.random()?(this.Fb("HYPER SYSTEM start!!",k),gls2.va("voHyperStart0")):(this.Fb("start counting to system limit.",k),gls2.va("voHyperStart1"));
this.Ob=gls2.la.clamp(this.Ob+1,0,5);this.Ge(0.01*this.Wa);M.Ua.Bb.$hyperOff=0.5*(2!==this.ea.style?1:0.5);this.ne=800;this.We=200;this.ea.Pf.ue(this.Wa);this.ea.Ub.ue(this.Wa);this.ea.je=this.ea.Pf;gls2.pa.Pk(this.ea.x,this.ea.y,this);this.Ma=k;this.Vc=this.Wa;this.Jc=this.Wa=0;gls2.ga.erase(k,k);this.app.ta("hyper1");10==this.Vc&&this.app.ta("hyper10");this.Nd[this.ya]+=1;this.nh.push(this.Vc)},If:function(){this.Ma!==w&&(this.Ma=w,gls2.xd(this.ea,k).addChildTo(this),this.ea.je=this.ea.kj,M.Ua.Bb.$hyperOff=
1*(2!==this.ea.style?1:0.5),this.ea.Pf.ue(0),this.ea.Ub.ue(0),this.We=80,this.Vc=this.ne=0,gls2.ga.erase())},tk:function(){gls2.va("decision");gls2.va("voGetBomb");this.Sb=Math.min(this.Sb+1,this.Gd);this.Rf=this.Sb===this.Gd},Qi:function(){gls2.va("voExtend");gls2.va("decision");this.Fb("extended.");this.td+=1},Fb:function(c,b){this.Wb.ie.uk(c,b)},cf:function(c){this.te=Date.now();this.se=gls2.core.frame;Y(this,"PAUSE",["resume","setting","exit game"],this.ol,{defaultValue:c,menuDescriptions:["\u30b2\u30fc\u30e0\u3092\u518d\u958b\u3057\u307e\u3059",
"\u8a2d\u5b9a\u3092\u5909\u66f4\u3057\u307e\u3059","\u30b2\u30fc\u30e0\u3092\u4e2d\u65ad\u3057\u3001\u30bf\u30a4\u30c8\u30eb\u753b\u9762\u306b\u623b\u308a\u307e\u3059"],showExit:w})},ol:function(c){switch(c){case 0:this.Sd=Date.now();this.nd+=this.Sd-this.te;this.Rd=gls2.core.frame;this.md+=this.Rd-this.se;break;case 1:this.sc();break;case 2:this.sl()}},sc:function(){Y(this,"SETTING",["bgm volume","sound volume","particle","bullet appearance"],this.Ch,{defaultValue:this.Tf,menuDescriptions:["BGM\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u8a2d\u5b9a\u3057\u307e\u3059",
"\u52b9\u679c\u97f3\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u8a2d\u5b9a\u3057\u307e\u3059","\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u306eON/OFF\u3092\u8a2d\u5b9a\u3057\u307e\u3059","\u6575\u5f3e\u306e\u898b\u305f\u76ee\u306b\u95a2\u3059\u308b\u8a2d\u5b9a\u3067\u3059"]})},Ch:function(c){4!==c&&(this.Tf=c);switch(c){case 0:this.Dh();break;case 1:this.Hh();break;case 2:this.Gh();break;case 3:this.Eh();break;default:this.cf(0)}},sl:function(){Y(this,"REARY?",["yes","no"],this.kl,{defaultValue:1,menuDescriptions:["\u30b2\u30fc\u30e0\u3092\u4e2d\u65ad\u3057\u3001\u30bf\u30a4\u30c8\u30eb\u753b\u9762\u306b\u623b\u308a\u307e\u3059",
"\u524d\u306e\u753b\u9762\u3078\u623b\u308a\u307e\u3059"],showExit:w})},kl:function(c){0===c?(gls2.kf(),this.app.replaceScene(gls2.TitleScene())):this.cf(1)},Dh:function(){Y(this,"BGM VOLUME","012345".split(""),this.yh,{defaultValue:gls2.core.gd,onCursorMove:function(c){gls2.hb!==l&&6!==c&&(gls2.hb.volume=0.1*c)},showExit:w})},yh:function(c){6!==c&&(gls2.core.gd=c);this.$c();this.sc(1)},Hh:function(){Y(this,"SE VOLUME","012345".split(""),this.Bh,{defaultValue:gls2.core.uc,showExit:w})},Bh:function(c){6!==
c&&(gls2.core.uc=c);this.$c();this.sc(1)},Gh:function(){Y(this,"PARTICLES",["ON","LITE","OFF"],this.Ah,{defaultValue:gls2.core.Kc,showExit:w})},Ah:function(c){gls2.core.Kc=c;this.$c();this.sc(1)},Eh:function(){Y(this,"BULLET",["NORMAL","LARGE"],this.zh,{defaultValue:gls2.core.Ab,showExit:w,menuDescriptions:["\u901a\u5e38\u30b5\u30a4\u30ba\u3067\u8868\u793a\u3057\u307e\u3059","\u5927\u304d\u3081\u306b\u8868\u793a\u3057\u307e\u3059"]})},zh:function(c){gls2.core.Ab=c;this.$c();this.sc(1)},$c:function(){localStorage.setItem("tmshooter.config",
JSON.stringify({bgmVolume:gls2.core.gd,seVolume:gls2.core.uc,particleEffectLevel:gls2.core.Kc,bulletBig:gls2.core.Ab}))},tl:function(){this.te=Date.now();this.se=gls2.core.frame;Y(this,"CONTINUE? ("+this.Uc+"/"+gls2.core.Hi()+")",["yes","no"],this.ll,{defaultValue:0,menuDescriptions:["\u30b7\u30b9\u30c6\u30e0\u3092\u518d\u8d77\u52d5\u3057\u3066\u51fa\u6483\u3057\u307e\u3059","\u4f5c\u6226\u5931\u6557\u3002\u9000\u5374\u3057\u307e\u3059"],showExit:w})},ll:function(c){switch(c){case 0:this.Nk();break;
case 1:this.Sd=Date.now(),this.nd+=this.Sd-this.te,this.Rd=gls2.core.frame,this.md+=this.Rd-this.se,this.Ui()}},Kd:K(),El:function(){this.Wb.Hb.tweener.clear().to({Te:-480},1600,"easeInBack").to({Hc:30},800,"easeInOutBack")},Uk:function(){this.Wb.Hb.tweener.clear().to({Hc:0},800,"easeInOutBack").to({Te:0},1600,"easeOutBack")},ff:l,gf:0,Xe:l,uf:0,Il:function(){if(1===this.uf){if(localStorage.getItem("recCount")!==i){this.Xe=[];for(var c=~~localStorage.getItem("recCount"),b=0;b<c;b++)localStorage.removeItem("rec"+
b);localStorage.removeItem("recCount")}this.ff=[];this.gf=0}else if(2===this.uf&&localStorage.getItem("recCount")!==i){this.Xe=[];c=~~localStorage.getItem("recCount");for(b=0;b<c;b++)for(var f=localStorage.getItem("rec"+b).split(","),d=0;d<f.length;d++)this.Xe.push(f[d])}},zl:function(c){if(1===this.uf)1E3<this.ff.length&&(localStorage.setItem("rec"+this.gf,this.ff),localStorage.setItem("recCount",this.gf),this.ff=[],this.gf+=1),this.ff.push(""+~~c.getKey("up")+~~c.getKey("down")+~~c.getKey("left")+
~~c.getKey("right")+~~c.getKey("z")+~~c.getKey("x")+~~c.getKey("c"));else if(2===this.uf&&this.Xe){var b=this.Xe.shift();b!==i&&(c.getKey=function(c){return"up"===c?!!~~b[0]:"down"===c?!!~~b[1]:"left"===c?!!~~b[2]:"right"===c?!!~~b[3]:"z"===c?!!~~b[4]:"x"===c?!!~~b[5]:"c"===c?!!~~b[6]:w},c.getKeyDown=function(c){return"up"===c?!!~~b[0]:"down"===c?!!~~b[1]:"left"===c?!!~~b[2]:"right"===c?!!~~b[3]:"z"===c?!!~~b[4]:"x"===c?!!~~b[5]:"c"===c?!!~~b[6]:w})}}});
gls2.bb.Layer=tm.createClass({superClass:tm.app.Object2D,init:function(){this.superInit()}});
gls2.bb.li=tm.createClass({superClass:tm.display.CanvasElement,ba:l,frame:0,init:function(c){this.superInit();this.ba=c;this.blendMode="lighter"},update:function(c){this.frame=c.frame},draw:function(c){this.Bk(c);this.Ck(c)},Bk:function(c){if(0<this.ba.mb){c.fillStyle="rgba(255,"+~~(255*this.ba.mb)+","+~~Math.min(255,512*this.ba.mb)+",0.5)";var b=500*this.ba.mb;c.fillRect(465,635-b,10,b)}},Ck:function(c){c.fillStyle="rgba(255,255,0,0.1)";c.fillRect(5,628,200,9);10===this.Wa?1===this.frame%2&&(c.fillStyle=
"rgba(255,255,255,0.3)",c.fillRect(5,628,200,9)):0<this.ba.Jc&&(c.fillStyle="rgba(255,255,100,0.3)",c.fillRect(5,628,200*this.ba.Jc,9))}});gls2.bb.Ce=l;gls2.ResultScene=tm.createClass({superClass:gls2.Scene,ba:l,Td:l,fc:l,values:l,labels:l,Qf:l,oj:[1E3,2E3,4E3,1E4,1],aj:l,Oh:l,cursor:0,wait:0,frame:0,init:function(c,b){this.superInit();this.ba=c;tm.display.Sprite("result_bg",528,704).setPosition(240,320).addChildTo(this);this.values=[this.ba.ag,this.ba.cg,~~(100*(this.ba.ec/this.ba.le)),this.ba.Ye,0===this.ba.Ze?2E7:0];this.Qf=this.values.map(function(b){return 0.01*b});tm.display.Label("RESULT",40).setPosition(240,64).addChildTo(this);tm.display.Label("STAR (S)").setAlign("right").setBaseline("middle").setPosition(240,
128).addChildTo(this);tm.display.Label("STAR (L)").setAlign("right").setBaseline("middle").setPosition(240,192).addChildTo(this);tm.display.Label("KILL RATIO").setAlign("right").setBaseline("middle").setPosition(240,256).addChildTo(this);tm.display.Label("MAX HIT").setAlign("right").setBaseline("middle").setPosition(240,320).addChildTo(this);tm.display.Label("NO MISS BONUS",20).setAlign("right").setBaseline("middle").setPosition(240,384).addChildTo(this);tm.display.Label("TOTAL SCORE").setAlign("right").setBaseline("middle").setPosition(240,
448).addChildTo(this);this.labels=[];for(var f=0;f<this.values.length;f++)this.labels[f]=tm.display.Label(""+Math.floor(this.values[f])+(2===f?"%":""),30).setFontFamily("'Ubuntu Mono'").setAlign("right").setBaseline("middle").setPosition(384,640*(0.2+0.1*f)).addChildTo(this);this.aj=tm.display.Label(Math.floor(this.ba.score),34).setFontFamily("'Ubuntu Mono'").setAlign("right").setBaseline("middle").setPosition(384,512).addChildTo(this);this.Oh=tm.display.Label("press button").setPosition(240,576).addChildTo(this);
this.Oh.visible=w;this.Td=b;for(var d=[],f=0;12>f;f++){d[f]=[];for(var j=0;16>j;j++)d[f][j]={Ph:0,qd:0,bd:gls2.la.randf(-2,2),wc:gls2.la.randf(1,4)}}this.fc=tm.app.Object2D();this.fc.draw=function(b){b.save();for(var c=k,f=0;f<d.length;f++)for(var j=0;j<d[f].length;j++){var n=d[f][j];640>40*j+n.qd&&(b.drawImage(this.Td.element,40*f,40*j,40,40,40*f+n.Ph,40*j+n.qd,40,40),n.Ph+=n.bd,n.qd+=n.wc,n.wc+=0.3,c=w)}this.wait=60;c&&this.fc.remove();b.restore()}.bind(this);this.fc.addChildTo(this);this.on("enter",
function(){this.ba.ec===this.ba.le?gls2.core.ta("kill100"):0.4>this.ba.ec/this.ba.le&&gls2.core.ta("kill40");0===this.ba.Vf&&0===this.ba.Uc&&(0===this.ba.ya?gls2.core.ta("nomiss1"):1===this.ba.ya?gls2.core.ta("nomiss2"):2===this.ba.ya?gls2.core.ta("nomiss3"):3===this.ba.ya?gls2.core.ta("nomiss4"):4===this.ba.ya&&gls2.core.ta("nomiss5"));0===this.ba.Nd[this.ba.ya]?gls2.core.ta("nohyper"):5<=this.ba.Nd[this.ba.ya]&&gls2.core.ta("hyperAndHyper");0===this.ba.ge[this.ba.ya]&&0===this.ba.fd[this.ba.ya]&&
gls2.core.ta("nobomb");this.ba.Nh||gls2.core.ta("manpower")});this.on("exit",function(){gls2.Kf()})},update:function(c){this.wait-=1;if(!(0<this.wait)){var b=this.cursor;if(b<this.values.length)gls2.va("star"),this.values[b]<=this.Qf[b]||c.keyboard.getKeyDown("z")||c.keyboard.getKeyDown("c")||c.keyboard.getKeyDown("space")?(this.ba.Bd(this.values[b]*this.oj[b]),this.values[b]=0,this.cursor+=1,this.wait=30):(this.ba.Bd(this.Qf[b]*this.oj[b]),this.values[b]-=this.Qf[b]),this.labels[b].text=""+Math.floor(this.values[b])+
(2===b?"%":""),this.aj.text=Math.floor(this.ba.score);else if(this.Oh.visible=k,c.keyboard.getKeyDown("z")||c.keyboard.getKeyDown("c")||c.keyboard.getKeyDown("space")||1800<this.frame)gls2.va("decision"),this.ba.ad[this.ba.ya]=0===this.ba.ya?this.ba.score:this.ba.score-this.ba.ad[this.ba.ya-1],0===gls2.core.mode?5==this.ba.ya+1?c.replaceScene(gls2.Mj()):(this.ba.Wh(this.ba.ya+1),c.replaceScene(this.ba)):1===gls2.core.mode&&(gls2.kf(),c.replaceScene(gls2.TitleScene()));this.frame+=1}},Kd:K()});gls2.ji=tm.createClass({superClass:gls2.Scene,oa:0,mj:w,init:function(){this.superInit();var c=tm.display.Label("GAME OVER");c.fillStyle="red";c.setPosition(240,320).addChildTo(this);this.interactive=k;this.on("enter",function(){gls2.Pb("gameover");this.yj||this.qj()})},update:function(c){(c.keyboard.getKeyDown("z")||c.keyboard.getKeyDown("c")||300==this.oa&&!this.mj)&&this.Xf();this.oa+=1},Kd:function(c){c.clearColor("black")},yj:w,Mh:w,wait:w,Qh:l,qj:function(){this.yj=this.wait=k;this.app.Lh(l,
function(c,b,f){this.wait=w;c?this.ul(c):b?(this.Mh=k,this.Qh=f,this.wl()):this.Xf()}.bind(this))},Xf:function(){if(!this.wait){this.mj=k;var c=["tweet result","back to title"],b=["\u30b9\u30b3\u30a2\u3092Twitter\u3078\u6295\u7a3f\u3057\u307e\u3059","\u30bf\u30a4\u30c8\u30eb\u3078\u623b\u308a\u307e\u3059"];this.Mh||(c.push("save score"),b.push("\u30b9\u30b3\u30a2\u3092\u767b\u9332\u3057\u307e\u3059"));Y(this,"GAME OVER",c,this.nl,{defaultValue:this.Mh?1:0,menuDescriptions:b,showExit:w})}},nl:function(c){0===
c?this.Ml():1===c?this.app.replaceScene(gls2.TitleScene()):this.qj()},wl:function(){Y(this,"SUCCESS!",["ok"],function(){this.Xf()},{menuDescriptions:["\u30b9\u30b3\u30a2\u767b\u9332\u3057\u307e\u3057\u305f\uff01"],showExit:w})},ul:function(){Y(this,"ERROR!",["ok"],function(){this.Xf()},{menuDescriptions:["\u30b9\u30b3\u30a2\u767b\u9332\u306b\u5931\u6557\u3057\u307e\u3057\u305f\uff01\uff1e\uff1c"],showExit:w})},Ml:function(){var c="TM-Shooter SCORE: {score} {stage} {type}-{style} continue:{cont}".format({score:Math.floor(this.app.ba.score),
stage:5>this.app.ba.ya?"Stage"+(this.app.ba.ya+1):"ALL",type:"ABC"[this.app.ba.ea.type],style:["S","L","EX"][this.app.ba.ea.style],cont:this.app.ba.Uc}),c=tm.social.Twitter.createURL({type:"tweet",text:c,hashtags:"tmshooter",url:this.Qh?window.location.origin+"/ranking/"+this.Qh:window.location.origin});window.open(c,"tweet","menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=400,height=400")}});(function(){var c="TM-Shooter;2D 'DANMAKU' Shooter on HTML5;;MUSIC;Underworld (select)  by  delf;Feel the universe (stage1)  by  delf;Herod (boss)  by  \u6dbc\u3005;Re-Birth (clear)  by  delf;Remenber (stage2)  by  Ryo;THE NEW CHALLENGER freeVer. (stage3)  by  delf;Aegis (stage4)  by  \u5cf6\u767d;Ancien Ocean (stage5)  by  delf;\u84bc\u3044\u6708 (ending)  by  delf;;SOUND;kouichi_axis (\u9b54\u738b\u9b42);on_jin (\u97f3\u4eba);;GAME ENGINE (tmlib.js);phi_jp;;TEST PLAY;manofac;;PROGRAM AND GRAPHICS;minimo(stage3);daishi_hmr;;special respect to...;DODONPACHI series by CAVE;PRECURE series by TOEI;;;;Thank You for Playing!;Let's play more other STG!!;and;Create Game with tmlib.js!!".split(";");
gls2.Mj=tm.createClass({superClass:gls2.Scene,ka:l,ea:l,labels:l,uj:w,speed:0,Ri:w,fj:l,init:function(){this.superInit();this.fj=tm.display.CanvasElement().addChildTo(this);this.ka=gls2.core.ba.ka;this.ka.addChildTo(this);this.ka.direction=0.5*Math.PI;this.ka.speed=1;var b=this.ea=gls2.core.ba.ea;b.Gc=w;b.setPosition(240,448);b.ba=this.fj;[].concat(b.children).forEach(function(c){c!=b.Ec&&c.remove()});b.addChildTo(this);var f=b.x;b.on("enterframe",function(){0.2<b.x-f?b.Za+=0.3:-0.2>b.x-f?b.Za-=0.3:
0<b.x-f?b.Za+=0.11:0>b.x-f&&(b.Za-=0.11);f=b.x});var d=function(){var c=gls2.la.randf(0.8,1.2);b.tweener.clear().to({x:gls2.la.randf(48,432),y:gls2.la.randf(192,512),scaleX:c,scaleY:c},6E3,"easeInOutQuad").call(d)}.bind(this);d();gls2.core.ba.ya+=1;var j=this;this.labels=c.map(function(b,c){return tm.display.Label(b,16).setPosition(240,960+64*c).addChildTo(j).on("enterframe",function(){this.y-=j.speed;-192>this.y&&this.remove()})});tm.display.Label("dev7.jp",24).setPosition(240,960+64*(c.length+3)).addChildTo(this).on("enterframe",
function(){320<this.y&&(this.y-=j.speed)});this.tweener.wait(2E3).call(function(){gls2.Pb("bgmEnding",k,k);this.uj=k}.bind(this))},onenter:function(){0===gls2.core.ba.ea.type?gls2.core.ta("allclear0"):1===gls2.core.ba.ea.type?gls2.core.ta("allclear1"):2===gls2.core.ba.ea.type&&gls2.core.ta("allclear2")},onexit:function(){this.ka.addChildTo(gls2.core.ba)},update:function(b){b.keyboard.getKey("z")||b.keyboard.getKey("x")||b.keyboard.getKey("c")||this.uj&&gls2.hb&&gls2.hb.source.playbackState!==AudioBufferSourceNode.PLAYING_STATE?
this.labels.some(function(b){return!!b.parent})?this.speed=8:this.Fl():this.speed=0.5},Fl:function(){this.Ri||(this.Ri=k,tm.display.RectangleShape(480,640,{fillStyle:"black",strokeStyle:"black"}).setPosition(240,320).addChildTo(this).tweener.set({alpha:0}).to({alpha:1},5E3).call(function(){gls2.kf();this.app.replaceScene(gls2.ji())}.bind(this)),this.ka.tweener.clear().to({speed:9},2E3),this.ea.tweener.clear().wait(2E3).to({y:-192},2E3,"easeInQuad"))},Kd:K()})})();(function(){gls2.da=tm.createClass({superClass:tm.display.CanvasElement,name:l,ea:l,ba:l,Ha:l,ra:0,ld:0,score:0,Yc:w,erase:w,star:1,cl:w,Nb:k,Ya:w,frame:0,eb:w,Xd:l,direction:0,speed:0,ha:l,init:function(b,f,d){this.superInit();this.addEventListener("added",function(){this.frame=0;this.Ya=w;c.push(this)});this.addEventListener("removed",function(){this.dispatchEvent(tm.event.Event("enemyconsumed"));var b=c.indexOf(this);-1!==b&&c.splice(b,1)});this.Nb=k;this.ba=b;this.ea=b.ea;this.score=100;this.erase=
w;this.sk(d);f.setup(this);this.altitude=this.Yc?1:10;this.Xd={x:0,y:0};this.eb=w},bf:function(){this.dispatchEvent(tm.event.Event("launch"));return this},cm:function(){this.dispatchEvent(tm.event.Event("completeattack"))},update:function(){this.Ya===w&&(0<=this.x-this.boundingWidthLeft&&480>this.x+this.boundingWidthRight&&0<=this.y-this.boundingHeightTop&&640>this.y+this.boundingHeightBottom)&&(this.Ya=k,this.dispatchEvent(tm.event.Event("enter")));var b=this.x,c=this.y;this.Yc&&(this.x+=this.ba.ka.Da,
this.y+=this.ba.ka.Ea);this.Ya&&(this.frame+=1);this.Xd.x=this.x-b;this.Xd.y=this.y-c},Wc:function(b){if(!this.Ya)return w;this.ra-=b;if(0>=this.ra)return b=gls2.la.randf(0,5),2>b?this.ba.Fb("enemy destroy."):4>b?this.ba.Fb(this.name+" destroy."):this.ba.Fb("ETR reaction gone."),this.erase&&gls2.ga.erase(k,this.ba.Ma,this instanceof gls2.wd),this.dispatchEvent(tm.event.Event("destroy")),this.za(),"yukishiro"===this.name?gls2.core.ta("mboss1"):"mishou"===this.name?gls2.core.ta("mboss2"):"higashi"===
this.name?gls2.core.ta("mboss3"):"hishikawa"===this.name?gls2.core.ta("mboss4"):"minamino"===this.name?gls2.core.ta("mboss5"):"misumi"===this.name?gls2.core.ta("boss1"):"hyuga"===this.name?gls2.core.ta("boss2"):"momozono"===this.name?gls2.core.ta("boss3"):"aida"===this.name?gls2.core.ta("boss4"):"houjou"===this.name&&gls2.core.ta("boss5"),k;40>this.ra&&this.Ka();return w},za:function(){gls2.pa.Jf(this.x,this.y,this.ba,this.Xd);this.remove()},dc:function(){return 0<=this.x+this.width/2&&480>this.x-
this.width/2&&0<=this.y+this.height/2&&640>this.y-this.height/2},rl:function(){return this.Nb},Ka:K(),sk:function(b){this.name=b;b=gls2.da.Jj[b];this.ra=this.ld=b[0];this.score=b[1];this.Yc=b[2];this.erase=b[3];this.star=b[4];b[5].radius!==i&&(this.boundingRadius=b[5].radius);b[5].width!==i&&(this.boundingWidth=b[5].width);b[5].height!==i&&(this.boundingHeight=b[5].height);b[5].widthLeft!==i&&(this.boundingWidthLeft=b[5].widthLeft);b[5].widthRight!==i&&(this.boundingWidthRight=b[5].widthRight);b[5].heightTop!==
i&&(this.boundingHeightTop=b[5].heightTop);b[5].heightBottom!==i&&(this.boundingHeightBottom=b[5].heightBottom)},pc:function(){this.remove();this.ba.Qe.addChild(this);this.addEventListener("enterframe",function(){0.2>Math.random()&&gls2.pa.Jf(this.x+gls2.la.rand(-100,100),this.y+gls2.la.rand(-40,40),this.ba,{x:0,y:-3})});this.tweener.clear().to({altitude:4,y:this.y+200},2E3).call(function(){gls2.pa.kd(this.x,this.y,this.ba);this.remove()}.bind(this))},Ef:function(){function b(){(0===c%23||0===c%37)&&
gls2.pa.ib(this.x+gls2.la.rand(-100,100),this.y+gls2.la.rand(-40,40),this.ba);c++}var c=0;this.on("enterframe",b);this.on("enterframe",function(){this.x+=3*Math.random()-1.5;this.y+=3*Math.random()-1.5+1});this.tweener.clear().to({x:240,y:128},500,"easeOutQuad").wait(2E3).call(function(){this.off("enterframe",b)}.bind(this)).wait(500).call(function(){gls2.tf(this.x,this.y,this.ba)}.bind(this)).wait(2E3).call(function(){this.remove()}.bind(this))},el:function(){function b(){(0===c%23||0===c%37||0===
c%53)&&gls2.pa.kd(this.x+gls2.la.rand(-100,100),this.y+gls2.la.rand(-40,40),this.ba);c++}var c=0;this.on("enterframe",b);var d=this.x,j=this.y,p=0;this.on("enterframe",function(){this.x=d+(3*Math.random()-1.5);this.y=j+(3*Math.random()-1.5)+p;p+=1});this.tweener.clear().wait(2E3).call(function(){this.off("enterframe",b)}.bind(this)).wait(500).call(function(){for(var b=0;8>b;b++)gls2.tf(this.x+80*Math.cos(2*Math.PI*b/8),this.y+80*Math.sin(2*Math.PI*b/8),this.ba)}.bind(this)).wait(2E3).call(function(){this.remove()}.bind(this))}});
gls2.da.Ke=function(){for(var b=[].concat(c),f=0,d=b.length;f<d;f++)b[f].remove()};var c=gls2.da.fb=[]})();gls2.wd=tm.createClass({superClass:gls2.da,cl:k,ld:0,$f:l,init:function(c,b,f){this.$f=b;this.superInit(c,this.$f[0],f);this.ld=this.ra;this.addEventListener("added",function(){this.ba.Hd=this;this.ba.El();this.tweener.wait(1E3).call(function(){this.ba.Oe=w}.bind(this))});this.addEventListener("removed",function(){this.ba.Hd=l;this.ba.Uk();var b=tm.app.Object2D();b.tweener.wait(7E3).call(function(){this.ba.yk()}.bind(this));b.addChildTo(this.ba.fc)})},Wc:function(c){var b=this.ra;if(gls2.da.prototype.Wc.call(this,
c))return this.ba.Oe=k,this.ba.ea.Ie=w,gls2.Kf(),k;this.ra<=0.55*this.ld&&0.55*this.ld<b?(gls2.aa.re(this),this.clearEventListener("completeattack"),this.tweener.clear(),gls2.pa.ib(this.x,this.y,this.ba),gls2.ga.erase(k,this.ba.Ma),this.$f[1].setup(this)):this.ra<=0.1*this.ld&&0.1*this.ld<b&&(gls2.aa.re(this),this.clearEventListener("completeattack"),this.tweener.clear(),gls2.pa.ib(this.x,this.y,this.ba),gls2.ga.erase(k,this.ba.Ma),this.$f[2].setup(this),gls2.va("voJacms"))}});(function(){gls2.da.Jj={kujo:[2,300,w,w,1,{radius:24}],kiryu:[3,400,w,w,1,{radius:24}],natsuki:[5,900,k,w,1,{radius:24}],kise:[50,15E3,k,w,1,{radius:24}],yamabuki:[100,15E3,k,w,1,{width:140,height:70}],hanasaki:[150,2E5,k,k,10,{radius:40}],myodoin:[50,15E3,k,w,1,{radius:40}],kenzaki:[200,3E5,k,k,10,{width:100,height:40}],minazuki:[300,3E5,k,k,10,{width:100,height:40}],tsukikage:[8,1E3,w,w,5,{width:100,height:20}],kasugano:[6,1E3,w,w,1,{radius:24}],kurokawa:[35,5E3,w,w,5,{width:100,height:20}],mimino:[35,
5E3,w,w,5,{width:100,height:20}],shirabe:[35,5E3,w,w,5,{width:100,height:20}],akimoto:[250,3E5,w,k,10,{width:200,heightBottom:10,heightTop:60}],yumehara:[250,5E5,w,k,20,{width:180,heightBottom:40,heightTop:120}],aono:[300,3E5,w,k,10,{width:280,heightBottom:30,heightTop:60}],yukishiro:[750,8E5,w,k,20,{width:240,height:80}],misumi:[4E3,2E6,w,k,0,{width:240,height:80}],mishou:[1E3,1E6,w,k,20,{width:300,height:80}],higashi:[1E3,12E5,w,k,20,{width:256,height:128}],momozono:[7E3,35E5,w,k,0,{width:256,height:128}],
hyuga:[6E3,3E6,w,k,0,{width:240,height:80}],hishikawa:[2E3,2E6,w,k,20,{radius:130}],aida:[8E3,4E6,w,k,0,{width:370,heightBottom:5,heightTop:60}],minamino:[1500,5E6,k,k,30,{width:180,heightTop:375,heightBottom:-325}],houjou:[1E4,8E6,w,k,0,{width:220,heightBottom:100,heightTop:60}],dory:[150,2E3,w,k,5,{radius:24}],rery:[250,2E3,k,w,5,{radius:24}],miry:[150,2E3,w,k,5,{radius:24}],fary:[200,2E3,k,w,5,{radius:24}],sory:[350,2E3,k,w,5,{radius:24}],lary:[300,2E3,k,k,5,{radius:24}],shiry:[250,2E3,k,k,5,{radius:24}],
dodory:[120,2E3,k,w,5,{radius:24}],kurumi:[30,500,w,w,1,{width:24,height:48}],hino:[20,1E4,w,w,1,{width:64,height:64}],hoshizora:[300,3E5,w,k,30,{width:128,height:64}],yotsuba:[300,5E5,w,k,40,{width:64,height:64}],yotsubaLeaf:[30,1E5,w,w,10,{width:64,height:64}],midorikawa:[5,2E3,w,w,1,{width:64,height:64}],aoki:[5,3200,w,w,1,{width:64,height:64}],madoka:[250,4E5,w,k,10,{width:256,height:64}]};gls2.da.ja=tm.createClass({superClass:gls2.da,ca:l,init:function(b,f){this.superInit(b,f,"kujo");this.ca=
c("tex1",64,64)},update:function(b){gls2.da.prototype.update.call(this,b);this.scaleX=this.x<this.ea.x?-1:1},draw:function(b){this.ca.setFrameIndex(2>this.frame%4?0:1).draw(b)}});gls2.da.Ca=tm.createClass({superClass:gls2.da,ca:l,init:function(b,f){this.superInit(b,f,"kiryu");this.ca=c("tex1",64,64)},update:function(b){gls2.da.prototype.update.call(this,b);this.scaleX=this.x<this.ea.x?-1:1},draw:function(b){this.ca.setFrameIndex(2>this.frame%4?8:9).draw(b)}});gls2.da.na=tm.createClass({superClass:gls2.da,
Sg:l,Tg:l,init:function(b,f){this.superInit(b,f,"natsuki");this.Sg=c("tex_tank1",64,64);this.Tg=c("tex_tank1",64,64);this.Ed=this.Ed||0;this.Fc=this.Fc||0},update:function(b){gls2.da.prototype.update.call(this,b);for(b=this.Ed;0>b;)b+=2*Math.PI;for(;2*Math.PI<=b;)b-=2*Math.PI;for(var c=this.Fc;0>c;)c+=2*Math.PI;for(;2*Math.PI<=c;)c-=2*Math.PI;this.Sg.setFrameIndex(~~(16*b/(2*Math.PI)),64,64);this.Tg.setFrameIndex(~~(16*c/(2*Math.PI))+16,64,64)},draw:function(b){this.Sg.draw(b);this.Tg.draw(b)},za:function(){gls2.pa.Gk(this.x,
this.y,this.ba);this.remove()}});gls2.da.mf=tm.createClass({superClass:gls2.da,ca:l,init:function(b,f){this.superInit(b,f,"yamabuki");this.ca=c("tex2",256,128).setFrameIndex(7)},Ka:function(){this.on("enterframe",function(b){0===b.app.frame%30?this.ca.Qa():5===b.app.frame%30&&this.ca.Pa()})},draw:function(b){this.ca.draw(b)},za:function(){gls2.pa.ib(this.x,this.y,this.ba);this.remove()}});gls2.da.$b=tm.createClass({superClass:gls2.da,ca:l,init:function(b,f){this.superInit(b,f,"tsukikage");this.ca=
c("tex1",64,64).setFrameIndex(23)},Ka:function(){this.on("enterframe",function(b){0===b.app.frame%30?this.ca.Qa():5===b.app.frame%30&&this.ca.Pa()})},draw:function(b){this.ca.draw(b)},za:function(){gls2.pa.ib(this.x,this.y,this.ba);this.remove()}});gls2.da.kb=tm.createClass({superClass:gls2.da,ca:l,Wg:l,init:function(b,f){this.superInit(b,f,"kasugano");this.ca=c("tex5",64,64).setFrameIndex(1);this.sb=gls2.Ra(80,1,0.8);this.Wg=tm.geom.Vector2()},update:function(b){gls2.da.prototype.update.apply(this,
arguments);0===b.frame%2&&0<this.ra&&this.sb.clone().setPosition(this.x,this.y).addChildTo(this.ba);this.rotation=tm.geom.Vector2.sub(this.position,this.Wg).toAngle()*gls2.la.RAD_TO_DEG-90;this.Wg.set(this.x,this.y)},Ka:function(){this.on("enterframe",function(b){0===b.app.frame%30?this.ca.Qa():5===b.app.frame%30&&this.ca.Pa()})},draw:function(b){this.ca.draw(b)},za:function(){gls2.pa.ib(this.x,this.y,this.ba);this.remove()}});gls2.da.cd=tm.createClass({superClass:gls2.da,ca:l,init:function(b,f){this.superInit(b,
f,"kurokawa");this.ca=c("tex1",128,128).setFrameIndex(1)},Ka:function(){this.on("enterframe",function(b){0===b.app.frame%30?this.ca.Qa():5===b.app.frame%30&&this.ca.Pa()})},draw:function(b){this.ca.draw(b)},za:function(){gls2.pa.ib(this.x,this.y,this.ba);this.remove()}});gls2.da.zc=tm.createClass({superClass:gls2.da,ca:l,init:function(b,f){this.superInit(b,f,"mimino");this.ca=c("tex4",128,128).setFrameIndex(10)},Ka:function(){this.on("enterframe",function(b){0===b.app.frame%30?this.ca.Qa():5===b.app.frame%
30&&this.ca.Pa()})},draw:function(b){this.ca.draw(b)},za:function(){gls2.pa.ib(this.x,this.y,this.ba);this.remove()}});gls2.da.ub=tm.createClass({superClass:gls2.da,ca:l,init:function(b,f){this.superInit(b,f,"shirabe");this.ca=c("tex5",128,128).setFrameIndex(4)},Ka:function(){this.on("enterframe",function(b){0===b.app.frame%30?this.ca.Qa():5===b.app.frame%30&&this.ca.Pa()})},draw:function(b){this.ca.draw(b)},za:function(){gls2.pa.ib(this.x,this.y,this.ba);this.remove()}});gls2.da.ac=tm.createClass({superClass:gls2.da,
ca:l,init:function(b,f){this.superInit(b,f,"akimoto");this.ca=c("tex1",256,128).setFrameIndex(1)},Ka:function(){this.on("enterframe",function(b){0===b.app.frame%30?this.ca.Qa():5===b.app.frame%30&&this.ca.Pa()})},draw:function(b){this.ca.draw(b)},za:function(){this.pc()}});gls2.da.Be=tm.createClass({superClass:gls2.da,ca:l,init:function(b,f){this.superInit(b,f,"aono");this.ca=c("tex1",256,128);this.ca.srcRect.x=128;this.ca.srcRect.y=128;this.ca.srcRect.width=256;this.ca.srcRect.height=128;this.setScale(1.2);
this.gb=gls2.Ra(70,1,0.97)},update:function(b){gls2.da.prototype.update.apply(this,arguments);0===b.frame%2&&(this.gb.clone().setScale(Math.randf(0.9,1.5)).setPosition(this.x-35,this.y+40).on("enterframe",function(){this.y+=2}).addChildTo(this.ba),this.gb.clone().setScale(Math.randf(0.9,1.5)).setPosition(this.x+35,this.y+40).on("enterframe",function(){this.y+=2}).addChildTo(this.ba))},Ka:function(){this.on("enterframe",function(b){0===b.app.frame%30?this.ca.Qa():5===b.app.frame%30&&this.ca.Pa()})},
draw:function(b){this.ca.draw(b)},za:function(){this.pc()}});gls2.da.ce=tm.createClass({superClass:gls2.da,ca:l,init:function(b,f){this.superInit(b,f,"yumehara");this.ca=c("tex1",256,256);this.ca.srcRect.x=128;this.ca.srcRect.y=256;this.ca.srcRect.width=256;this.ca.srcRect.height=256},Ka:function(){this.on("enterframe",function(b){0===b.app.frame%30?this.ca.Qa():5===b.app.frame%30&&this.ca.Pa()})},draw:function(b){this.ca.draw(b)},za:function(){this.pc()}});gls2.da.Ta=tm.createClass({superClass:gls2.da,
ca:l,init:function(b,f){this.superInit(b,f,"kise");this.ca=c("tex1",64,128).setFrameIndex(14)},Ka:function(){this.on("enterframe",function(b){0===b.app.frame%30?this.ca.Qa():5===b.app.frame%30&&this.ca.Pa()})},draw:function(b){this.ca.draw(b)},za:function(){gls2.pa.ib(this.x,this.y,this.ba);this.remove()}});gls2.da.wf=tm.createClass({superClass:gls2.da,ca:l,init:function(b,f){this.superInit(b,f,"hanasaki");this.ca=c("tex1",128,128).setFrameIndex(12)},Ka:K(),za:function(){gls2.pa.ib(this.x,this.y,
this.ba);this.remove()},draw:function(b){this.ca.draw(b)}});gls2.da.pg=tm.createClass({superClass:gls2.da,init:function(b,f){this.superInit(b,f,"myodoin");this.ca=c("tex5",64,128).setFrameIndex(0)},Ka:K(),za:function(){gls2.pa.ib(this.x,this.y,this.ba);this.remove()},draw:function(b){this.ca.draw(b)}});gls2.da.xc=tm.createClass({superClass:gls2.da,ca:l,init:function(b,f){this.superInit(b,f,"kenzaki");this.ca=c("tex1",128,256);this.ca.srcRect.x=0;this.ca.srcRect.y=128;this.ca.srcRect.width=128;this.ca.srcRect.height=
256},Ka:function(){this.on("enterframe",function(b){0===b.app.frame%30?this.ca.Qa():5===b.app.frame%30&&this.ca.Pa()})},draw:function(b){this.ca.draw(b)},za:function(){gls2.pa.ib(this.x,this.y,this.ba);this.remove()}});gls2.da.hg=tm.createClass({superClass:gls2.da,ca:l,init:function(b,f){this.superInit(b,f,"minazuki");this.ca=c("tex5",128,256);this.ca.setFrameIndex(1);this.setScale(1.2)},Ka:function(){this.on("enterframe",function(b){0===b.app.frame%30?this.ca.Qa():5===b.app.frame%30&&this.ca.Pa()})},
draw:function(b){this.ca.draw(b)},za:function(){gls2.pa.ib(this.x,this.y,this.ba);this.remove()}});gls2.da.Xa=tm.createClass({superClass:gls2.da,init:function(b,f){this.superInit(b,f,"hino");this.ca=c("tex4",64,32).setFrameIndex(0);this.setScale(1.5)},draw:function(b){this.ca.draw(b)}});gls2.da.sa=tm.createClass({superClass:gls2.da,ca:l,init:function(b,f){this.superInit(b,f,"midorikawa");this.ca=c("tex4",64,64).setFrameIndex(8)},update:function(b){gls2.da.prototype.update.call(this,b)},draw:function(b){this.ca.draw(b)}});
gls2.da.Gb=tm.createClass({superClass:gls2.da,ca:l,init:function(b,f){this.superInit(b,f,"aoki");this.ca=c("tex4",64,64).setFrameIndex(1)},update:function(b){gls2.da.prototype.update.call(this,b)},draw:function(b){this.ca.draw(b)},bf:function(){240<this.x&&(this.speed*=-1,this.scaleX=-1);this.Kl=this.y+192;this.qd=this.y}});gls2.da.Tc=tm.createClass({superClass:gls2.da,ca:l,init:function(b,f){this.superInit(b,f,"madoka");this.ca=c("tex4",256,128).setFrameIndex(3)},update:function(b){gls2.da.prototype.update.call(this,
b)},draw:function(b){this.ca.draw(b)},Ka:function(){this.on("enterframe",function(b){0===b.app.frame%30?this.ca.Qa():5===b.app.frame%30&&this.ca.Pa()})},za:function(){gls2.pa.kd(this.x,this.y,this.ba);this.pc()}});gls2.da.Pd=tm.createClass({superClass:gls2.da,init:function(b,f){this.superInit(b,f,"hoshizora");this.ca=c("tex4",256,128).setFrameIndex(1);this.boundingWidth=384;this.setScale(1.5)},update:function(b){gls2.da.prototype.update.call(this,b);if(this.Ya===w&&(0<=this.x-this.boundingWidthLeft||
480>this.x+this.boundingWidthRight||0<=this.y-this.boundingHeightTop||640>this.y+this.boundingHeightBottom))this.Ya=k,this.dispatchEvent(tm.event.Event("enter"))},draw:function(b){this.ca.draw(b)},za:function(){gls2.pa.kd(this.x,this.y,this.ba);this.pc()},Ka:function(){this.on("enterframe",function(b){0===b.app.frame%30?this.ca.Qa():5===b.app.frame%30&&this.ca.Pa()})},bf:function(){this.tweener.move(240,this.y,7E3,"easeInOutQuad").moveBy(0,64,5E3,"easeInOutQuad");240<this.x?(this.scaleX=-1.5,this.tweener.moveBy(-496,
0,8E3,"easeInOutQuad")):this.tweener.moveBy(496,0,8E3,"easeInOutQuad")},dc:function(){return 0<=this.x+this.width/2||480>this.x-this.width/2&&0<=this.y+this.height/2||640>this.y-this.height/2},pc:function(){this.remove();this.ba.Qe.addChild(this);this.addEventListener("enterframe",function(){0.2>Math.random()&&gls2.pa.Jf(this.x+gls2.la.rand(-100,100),this.y+gls2.la.rand(-40,40),this.ba,{x:0,y:-3})});this.tweener.clear().to({altitude:4,y:this.y+200},2E3).call(function(){gls2.pa.kd(this.x,this.y,this.ba);
gls2.pa.kd(this.x+64,this.y,this.ba);gls2.pa.kd(this.x-64,this.y,this.ba);this.remove()}.bind(this))}});gls2.da.eg=tm.createClass({superClass:gls2.da,init:function(b,f){this.superInit(b,f,"yotsuba");this.ca=c("tex4",128,128).setFrameIndex(1);this.boundingHeight=this.boundingWidth=192;this.setScale(1.5)},draw:function(b){this.ca.draw(b)},Ka:function(){this.on("enterframe",function(b){0===b.app.frame%30?this.ca.Qa():5===b.app.frame%30&&this.ca.Pa()})},za:function(){gls2.pa.kd(this.x,this.y,this.ba);
this.pc();this.ba.Od||gls2.ii(this.x,this.y,this.ea).addChildTo(this.ba);for(var b=0;4>b;b++)this.Zc[b]&&this.Zc[b].za();delete this.Zc;this.remove()},bf:function(){this.Zc=[];for(var b=0;4>b;b++){var c=0.5*Math.PI*b;this.Zc[b]=this.Ha.Na({hard:gls2.da.ud,soft:gls2.aa.ud[b],x:this.x+96*Math.sin(c),y:this.y+96*Math.cos(c)});this.Zc[b].dir=c;this.Zc[b].bh=this;this.Zc[b].gl=b;this.Zc[b].distance=96}gls2.da.prototype.bf.call(this);return this}});gls2.da.ud=tm.createClass({superClass:gls2.da,init:function(b,
f){this.superInit(b,f,"yotsubaLeaf");this.ca=c("yotsubaLeaf",64,64).setFrameIndex(0);this.boundingHeight=this.boundingWidth=96;this.setScale(1.5)},update:function(b){gls2.da.prototype.update.call(this,b)},draw:function(b){this.ca.draw(b)},za:function(){gls2.pa.ib(this.x,this.y,this.ba);this.bh.Zc[this.gl]=l;this.remove()}});gls2.da.ze=tm.createClass({superClass:gls2.da,init:function(b,f){this.superInit(b,f,"kurumi");this.ca=c("tex3",64,128);this.ca.setFrameIndex(8)},Ka:K(),draw:function(b){this.ca.draw(b)},
za:function(){gls2.pa.ib(this.x,this.y,this.ba);gls2.ei(this.x,this.y,this.ea).addChildTo(this.ba);this.remove()}});gls2.da.ng=tm.createClass({superClass:gls2.da,ca:l,init:function(b,f){this.superInit(b,f,"yukishiro");this.ca=c("tex2",256,128).setFrameIndex(0);this.setScale(1.5)},Ka:function(){this.on("enterframe",function(b){0===b.app.frame%30?this.ca.Qa():5===b.app.frame%30&&this.ca.Pa()})},za:function(){this.pc()},draw:function(b){this.ca.draw(b)}});gls2.da.Bg=tm.createClass({superClass:gls2.wd,
ca:l,init:function(b,f){this.superInit(b,f,"misumi");this.ca=c("tex2",256,128).setFrameIndex(1);this.setScale(1.5)},Ka:function(){this.on("enterframe",function(b){0===b.app.frame%30?this.ca.Qa():5===b.app.frame%30&&this.ca.Pa()})},draw:function(b){this.ca.draw(b)},za:function(){this.Ef();gls2.core.fps=FPS}});gls2.da.xg=tm.createClass({superClass:gls2.da,init:function(b,f){this.superInit(b,f,"mishou");this.ca=c("tex2",256,128).setFrameIndex(2);this.setScale(1.2);this.gb=gls2.Ra(80,1,0.9);this.sb=gls2.Ra(256,
1,0.9)},update:function(b){gls2.da.prototype.update.apply(this,arguments);0===b.frame%2&&(this.gb.clone().setPosition(this.x+120,this.y-30).on("enterframe",function(){this.x+=5}).addChildTo(this.ba),this.gb.clone().setPosition(this.x+120,this.y+25).on("enterframe",function(){this.x+=5}).addChildTo(this.ba),this.sb.clone().setPosition(this.x-30,this.y).on("enterframe",function(){this.x+=5}).addChildTo(this.ba))},Ka:function(){this.on("enterframe",function(b){0===b.app.frame%30?this.ca.Qa():5===b.app.frame%
30&&this.ca.Pa()})},za:function(){this.pc()},draw:function(b){this.ca.draw(b)}});gls2.da.Xj=tm.createClass({superClass:gls2.wd,init:function(b,f){this.superInit(b,f,"hyuga");this.ca=c("tex2",256,128).setFrameIndex(3);this.setScale(1.5)},Ka:function(){this.on("enterframe",function(b){0===b.app.frame%30?this.ca.Qa():5===b.app.frame%30&&this.ca.Pa()})},za:function(){this.Ef();gls2.core.fps=FPS},draw:function(b){this.ca.draw(b)}});gls2.da.Lg=tm.createClass({superClass:gls2.da,init:function(b,f){this.superInit(b,
f,"higashi");this.ca=c("tex4",256,128).setFrameIndex(2);this.blendMode="lighter";this.setScale(1.5)},Ka:function(){this.on("enterframe",function(b){0===b.app.frame%30?this.ca.Qa():5===b.app.frame%30&&this.ca.Pa()})},za:function(){this.pc()},draw:function(b){this.ca.draw(b)}});gls2.da.Tj=tm.createClass({superClass:gls2.wd,init:function(b,f){this.superInit(b,f,"momozono");this.ca=c("tex4",256,128).setFrameIndex(4);this.setScale(1.5)},Ka:function(){this.on("enterframe",function(b){0===b.app.frame%30?
this.ca.Qa():5===b.app.frame%30&&this.ca.Pa()})},za:function(){this.Ef();gls2.core.fps=FPS},draw:function(b){this.ca.draw(b)}});gls2.da.Hg=tm.createClass({superClass:gls2.da,init:function(b,f){this.superInit(b,f,"hishikawa");this.ca=c("tex2",256,256).setFrameIndex(2);this.ca.setScale(2);this.gb=gls2.Ra(60,1,0.95);this.sb=gls2.Ra(500,1,0.8)},update:function(b){gls2.da.prototype.update.apply(this,arguments);0===b.frame%2&&0<this.ra&&(this.gb.clone().setPosition(this.x-45,this.y+40).on("enterframe",
function(){this.y+=10}).addChildTo(this.ba),this.gb.clone().setPosition(this.x+45,this.y+40).on("enterframe",function(){this.y+=10}).addChildTo(this.ba),this.sb.clone().setPosition(this.x,this.y).addChildTo(this.ba))},Ka:function(){this.on("enterframe",function(b){0===b.app.frame%30?this.ca.Qa():5===b.app.frame%30&&this.ca.Pa()})},za:function(){this.pc()},draw:function(b){this.ca.draw(b)}});gls2.da.Uj=tm.createClass({superClass:gls2.wd,init:function(b,f){this.superInit(b,f,"aida");this.ca=c("tex2",
256,128).setFrameIndex(5);this.setScale(1.5);this.gb=gls2.Ra(60,1,0.95);this.sb=gls2.Ra(500,1,0.8)},update:function(b){gls2.da.prototype.update.apply(this,arguments);0===b.frame%2&&0<this.ra&&(this.gb.clone().setPosition(this.x-60,this.y+30).on("enterframe",function(){this.y+=10}).addChildTo(this.ba),this.gb.clone().setPosition(this.x-35,this.y+40).on("enterframe",function(){this.y+=10}).addChildTo(this.ba),this.gb.clone().setPosition(this.x+35,this.y+40).on("enterframe",function(){this.y+=10}).addChildTo(this.ba),
this.gb.clone().setPosition(this.x+60,this.y+30).on("enterframe",function(){this.y+=10}).addChildTo(this.ba),this.sb.clone().setPosition(this.x,this.y).addChildTo(this.ba))},Ka:function(){this.on("enterframe",function(b){0===b.app.frame%30?this.ca.Qa():5===b.app.frame%30&&this.ca.Pa()})},za:function(){this.Ef();gls2.core.fps=FPS},draw:function(b){this.ca.draw(b)}});gls2.da.Sj=tm.createClass({superClass:gls2.da,Je:l,Ji:[{x:-60,y:-426},{x:60,y:-426},{x:-72,y:-72},{x:72,y:-72},{x:-72,y:-348},{x:72,y:-348},
{x:-48,y:-264},{x:48,y:-264},{x:-48,y:108},{x:48,y:108},{x:-78,y:-168},{x:78,y:-168},{x:-96,y:-228},{x:96,y:-228},{x:0,y:-336},{x:0,y:-168},{x:-120,y:144},{x:120,y:144},{x:-60,y:168},{x:60,y:168}],init:function(b,f){this.superInit(b,f,"minamino");this.altitude=10;this.eb=k;this.ca=c("tex5",256,512).setFrameIndex(1);this.setScale(2.16);this.Je=[];this.on("launch",function(){Array.prototype.push.apply(this.Je,[this.Ha.Na({hard:gls2.da.Qc,soft:gls2.aa.Qc(),x:0,y:0}),this.Ha.Na({hard:gls2.da.Qc,soft:gls2.aa.Qc(),
x:0,y:0}),this.Ha.Na({hard:gls2.da.Qc,soft:gls2.aa.Qc(),x:0,y:0}),this.Ha.Na({hard:gls2.da.Qc,soft:gls2.aa.Qc(),x:0,y:0}),this.Ha.Na({hard:gls2.da.Qb,soft:gls2.aa.Qb(),x:0,y:0}),this.Ha.Na({hard:gls2.da.Qb,soft:gls2.aa.Qb(),x:0,y:0}),this.Ha.Na({hard:gls2.da.Qb,soft:gls2.aa.Qb(),x:0,y:0}),this.Ha.Na({hard:gls2.da.Qb,soft:gls2.aa.Qb(),x:0,y:0}),this.Ha.Na({hard:gls2.da.Qb,soft:gls2.aa.Qb(),x:0,y:0}),this.Ha.Na({hard:gls2.da.Qb,soft:gls2.aa.Qb(),x:0,y:0}),this.Ha.Na({hard:gls2.da.Rc,soft:gls2.aa.Rc(),
x:0,y:0}),this.Ha.Na({hard:gls2.da.Rc,soft:gls2.aa.Rc(),x:0,y:0}),this.Ha.Na({hard:gls2.da.Rc,soft:gls2.aa.Rc(),x:0,y:0}),this.Ha.Na({hard:gls2.da.Rc,soft:gls2.aa.Rc(),x:0,y:0}),this.Ha.Na({hard:gls2.da.tg,soft:gls2.aa.tg(),x:0,y:0}),this.Ha.Na({hard:gls2.da.Mg,soft:gls2.aa.Mg(),x:0,y:0}),this.Ha.Na({hard:gls2.da.Nc,soft:gls2.aa.Nc(),x:0,y:0}),this.Ha.Na({hard:gls2.da.Nc,soft:gls2.aa.Nc(),x:0,y:0}),this.Ha.Na({hard:gls2.da.Nc,soft:gls2.aa.Nc(),x:0,y:0}),this.Ha.Na({hard:gls2.da.Nc,soft:gls2.aa.Nc(),
x:0,y:0})])})},update:function(){this.Je.forEach(function(b,c){b.setPosition(this.x+this.Ji[c].x,this.y+this.Ji[c].y)}.bind(this))},Ka:function(){this.on("enterframe",function(b){0===b.app.frame%30?this.ca.Qa():5===b.app.frame%30&&this.ca.Pa()})},za:function(){function b(){(0===c%23||0===c%37)&&gls2.pa.ib(this.x+gls2.la.rand(-200,200),this.y+gls2.la.rand(-300,300),this.ba);c++}this.dispatchEvent(tm.event.Event("enemyconsumed"));this.Je.forEach(function(b){b.parent&&b.remove()}.bind(this));this.tweener.clear();
this.zj.clear();this.Aj.clear();var c=0;this.on("enterframe",b);this.on("enterframe",function(){this.x+=3*Math.random()-1.5;this.y+=1});this.tweener.clear().wait(4E3).call(function(){this.off("enterframe",b)}.bind(this)).call(function(){gls2.tf(this.x,this.y-300,this.ba.Qe);gls2.tf(this.x,this.y+0,this.ba.Qe)}.bind(this)).wait(2E3).call(function(){this.remove()}.bind(this))},draw:function(b){this.ca.draw(b)}});gls2.da.be=tm.createClass({superClass:gls2.da,ca:l,vj:0,init:function(b,f,d,j,p){this.superInit(b,
f,d);this.ca=c(j,64,64);this.vj=p},update:function(b){gls2.da.prototype.update.apply(this,arguments);for(var c=tm.geom.Vector2.sub(this.ba.ea.position,this.position).toAngle()+2*Math.PI/32;0>c;)c+=2*Math.PI;for(;2*Math.PI<=c;)c-=2*Math.PI;this.ca.setFrameIndex(16*this.vj+Math.floor(16*(c/(2*Math.PI))))},Ka:function(){this.on("enterframe",function(b){0===b.app.frame%30?this.ca.Qa():5===b.app.frame%30&&this.ca.Pa()})},za:function(){gls2.pa.ib(this.x,this.y,this.ba);this.remove()},draw:function(b){this.ca.draw(b)}});
gls2.da.Qc=tm.createClass({superClass:gls2.da.be,init:function(b,c){this.superInit(b,c,"rery","kanade-cannon",0);this.setScale(1.92)}});gls2.da.Qb=tm.createClass({superClass:gls2.da.be,init:function(b,c){this.superInit(b,c,"rery","kanade-cannon",1);this.setScale(1.2)}});gls2.da.Rc=tm.createClass({superClass:gls2.da.be,init:function(b,c){this.superInit(b,c,"sory","yotsubaLeaf",0);this.setScale(1.2)}});gls2.da.tg=tm.createClass({superClass:gls2.da.be,init:function(b,c){this.superInit(b,c,"lary","yotsubaLeaf",
0);this.setScale(1.44)}});gls2.da.Mg=tm.createClass({superClass:gls2.da.be,init:function(b,c){this.superInit(b,c,"shiry","kanade-cannon",1);this.setScale(1.68)}});gls2.da.Nc=tm.createClass({superClass:gls2.da.be,init:function(b,c){this.superInit(b,c,"dodory","tex_tank1",1);this.setScale(1.44)}});gls2.da.Rj=tm.createClass({superClass:gls2.wd,dh:l,uh:l,init:function(b,f){this.superInit(b,f,"houjou");this.ca=c("tex5",256,256).setFrameIndex(2);this.setScale(1.5);this.gb=gls2.Ra(60,1,0.95);this.sb=gls2.Ra(500,
1,0.8)},update:function(b){gls2.da.prototype.update.apply(this,arguments);0===b.frame%2&&0<this.ra&&(this.gb.clone().setPosition(this.x-60,this.y+30).on("enterframe",function(){this.y+=10}).addChildTo(this.ba),this.gb.clone().setPosition(this.x-35,this.y+40).on("enterframe",function(){this.y+=10}).addChildTo(this.ba),this.gb.clone().setPosition(this.x+35,this.y+40).on("enterframe",function(){this.y+=10}).addChildTo(this.ba),this.gb.clone().setPosition(this.x+60,this.y+30).on("enterframe",function(){this.y+=
10}).addChildTo(this.ba),this.sb.clone().setPosition(this.x,this.y).addChildTo(this.ba))},Ka:function(){this.on("enterframe",function(b){0===b.app.frame%30?this.ca.Qa():5===b.app.frame%30&&this.ca.Pa()})},za:function(){this.el();gls2.core.fps=FPS;this.ba.Td=this.ba.Zf().canvas.toDataURL("image/png")},draw:function(b){this.ca.draw(b)}});gls2.da.ye=tm.createClass({superClass:gls2.da,ca:l,init:function(b,f){this.superInit(b,f,"dory");this.ca=c("tex4",64,64).setFrameIndex(48);this.setScale(1.5);this.sb=
gls2.Ra(80,1,0.8)},update:function(b){gls2.da.prototype.update.call(this,b);this.ca.setFrameIndex(48+Math.floor(b.frame/5)%3);0===b.frame%2&&0<this.ra&&this.sb.clone().setPosition(this.x,this.y).addChildTo(this.ba)},draw:function(b){this.ca.draw(b)}});gls2.da.Ae=tm.createClass({superClass:gls2.da,ca:l,init:function(b,f){this.superInit(b,f,"miry");this.ca=c("tex4",64,64).setFrameIndex(56);this.setScale(1.5);this.sb=gls2.Ra(80,1,0.8)},update:function(b){gls2.da.prototype.update.call(this,b);this.ca.setFrameIndex(56+
Math.floor(b.frame/5)%3);0===b.frame%2&&0<this.ra&&this.sb.clone().setPosition(this.x,this.y).addChildTo(this.ba)},draw:function(b){this.ca.draw(b)}});var c=tm.createClass({superClass:tm.display.Sprite,Yh:l,init:function(b,c,d){this.superInit(b,c,d);"string"===typeof b&&(this.Yh=b)},draw:function(b){var c=this.srcRect;b.context.drawImage(this._image.element,c.x,c.y,c.width,c.height,-this.width*this.origin.x,-this.height*this.origin.y,this.width,this.height)},Qa:function(){var b=this.srcRect.x,c=this.srcRect.y,
d=this.srcRect.width,j=this.srcRect.height;this.image=this.Yh+"Red";this.srcRect.x=b;this.srcRect.y=c;this.srcRect.width=d;this.srcRect.height=j},Pa:function(){var b=this.srcRect.x,c=this.srcRect.y,d=this.srcRect.width,j=this.srcRect.height;this.image=this.Yh;this.srcRect.x=b;this.srcRect.y=c;this.srcRect.width=d;this.srcRect.height=j}})})();(function(){gls2.aa=tm.createClass({setup:function(b){b.on("destroy",function(){gls2.aa.re(this)})}});gls2.aa.ua=function(b,c){if(gls2.ga[c]===i)console.warn("Danmaku["+c+"] is undefined!");else{var f=gls2.ga[c].Hf();b.on("enterframe",f);b.on("completeattack",function(){f.stop=k})}};gls2.aa.re=function(b){if(b=[].concat(b._listeners.enterframe))for(var c=0,f=b.length;c<f;c++)b[c]&&b[c].Sf&&(b[c].stop=k)};gls2.aa.Al=function(b){if(b=[].concat(b._listeners.enterframe))for(var c=0,f=b.length;c<f;c++)b[c]&&
b[c].Sf&&(b[c].stop=w)};gls2.aa.ja=tm.createClass({superClass:gls2.aa,pattern:l,init:function(b,c){this.superInit();this.pattern=b;this.Ll=c},setup:function(b){gls2.aa.prototype.setup.call(this,b);var c=this.pattern,f=this.Ll;b.on("launch",function(){var b=gls2.Ba.randf(640*(f-0.1),640*(f+0.1));this.tweener.clear().wait(gls2.Ba.rand(10,500)).move(this.x,b,5*b,"easeOutQuad").call(function(){gls2.aa.ua(this,c)}.bind(this))});b.on("completeattack",function(){this.tweener.clear().wait(1E3).moveBy(0,-640,
2E3,"easeInQuad").call(function(){this.remove()}.bind(this))})}});gls2.aa.Pc=gls2.aa.ja("basic0-0",0.2);gls2.aa.xb=gls2.aa.ja("basic0-0",0.4);gls2.aa.ae=gls2.aa.ja("basic0-0",0.6);gls2.aa.wb=gls2.aa.ja("basic1-2",0.2);gls2.aa.Oc=gls2.aa.ja("basic1-2",0.4);gls2.aa.$d=gls2.aa.ja("basic1-2",0.6);gls2.aa.Ca=tm.createClass({superClass:gls2.aa,ob:l,init:function(b,c){this.superInit();this.ob=b;this.delay=c},setup:function(b){gls2.aa.prototype.setup.call(this,b);b.angle=0.5*Math.PI;b.ob=this.ob;b.tweener.wait(this.delay===
i?gls2.la.rand(0,1E3):this.delay).call(function(){this.speed=6;gls2.aa.ua(this,this.ob);this.on("enterframe",function(){this.y<this.ea.y&&this.Ya&&(this.angle+=Math.atan2(this.ea.y-this.y,this.ea.x-this.x)<this.angle?-0.02:0.02,this.angle=gls2.la.clamp(this.angle,0.5,Math.PI-0.5));this.x+=Math.cos(this.angle)*this.speed;this.y+=Math.sin(this.angle)*this.speed;!this.dc()&&this.Ya&&this.remove();if(22500>gls2.Xc(this,this.ea)||this.y>this.ea.y+150)this.Nb=w})}.bind(b))}});gls2.aa.yb=gls2.aa.Ca("basic1-0");
gls2.aa.Ja=function(b){return gls2.aa.Ca("basic1-3",b*(2*Math.random()+1))};var c=tm.createClass({superClass:gls2.aa,init:function(b,c,f){this.superInit();this.bl=b;this.al=c;this.he=f},setup:function(b){gls2.aa.prototype.setup.call(this,b);b.speed=this.bl;b.Ed=this.al;this.he&&(b.he=[].concat(this.he));b.Fc=0;b.on("enter",function(){gls2.aa.ua(this,"basic2-0")});b.on("enterframe",function(){this.x+=Math.cos(this.Ed)*this.speed;this.y+=Math.sin(this.Ed)*this.speed;this.Ya&&!this.dc()&&this.remove();
for(this.Fc=Math.atan2(this.ea.y-this.y,this.ea.x-this.x);0>this.Fc;)this.Fc+=2*Math.PI;for(;2*Math.PI<=this.Fc;)this.Fc-=2*Math.PI;this.Nb=this.y<this.ea.y&&4E4<gls2.Xc(this,this.ea);if(this.he)for(var b=0;b<this.he.length;b++){var c=this.he[b];c.frame===this.frame&&this.tweener.to({Ed:c.dir!==i?c.dir:this.Ed,speed:c.speed!==i?c.speed:this.speed},500)}})}});gls2.aa.Bc=c(1,0.25*Math.PI);gls2.aa.Ql=c(1,-1.75*Math.PI);gls2.aa.De=c(1,Math.PI,[{frame:200,dir:1.5*Math.PI,speed:1}]);gls2.aa.xa=c(1.6,0.5*
Math.PI);gls2.aa.Cc=c(1.6,-0.5*Math.PI);gls2.aa.ci=tm.createClass({superClass:gls2.aa,Sa:l,init:function(b){this.superInit();this.Sa=b},setup:function(b){gls2.aa.ua(b,this.Sa);b.tweener.clear().to({x:240},8E3,"easeInOutQuad")}});gls2.aa.fi=gls2.aa.ci("bukky-4-0");gls2.aa.gi=gls2.aa.ci("bukky-5-0");c=tm.createClass({superClass:gls2.aa,Sa:l,Mi:w,init:function(b,c){this.superInit();this.Sa=b;this.Mi=!!c},setup:function(b){gls2.aa.prototype.setup.call(this,b);b.speed=1;b.dir=Math.PI;b.Sa=this.Sa;b.on("enter",
function(){gls2.aa.ua(this,this.Sa)});b.on("enterframe",function(){this.Ya&&!this.dc()&&this.remove()});if(!this.Mi)b.on("enterframe",function(){this.Nb=this.y<this.ea.y&&4E4<gls2.Xc(this,this.ea)})}});gls2.aa.Yb=c("basic3-0",w);gls2.aa.Zb=c("basic3-1",w);gls2.aa.yc=c("cannon2-0",k);gls2.aa.gg=c("cannon2-3",k);gls2.aa.of=c("cannon3-0",k);gls2.aa.ig=c("cannon5-0",k);var b=tm.createClass({superClass:gls2.aa,velocityY:0,Sa:l,delay:0,init:function(b,c,f){this.superInit();this.velocityY=b;this.Sa=c;this.delay=
f||0},setup:function(b){gls2.aa.prototype.setup.call(this,b);b.velocityY=this.velocityY;b.ha=[this.Sa];b.ef=w;b.tweener.clear().wait(this.delay).moveBy(0,320,800,"easeOutQuad").call(function(){gls2.aa.ua(this,this.ha[0]);this.ef=k}.bind(b));b.on("enterframe",function(){this.ef&&(this.y+=this.velocityY,384<this.y&&gls2.aa.re(this),this.Ya&&!this.dc()&&this.remove(),this.Nb=this.y<this.ea.y)})}});gls2.aa.yd=b(0.5,"kurokawa-1");gls2.aa.Vj=b(0.5,"kurokawa-4");gls2.aa.Ac=function(c){return b(0.5,"milk-5",
c)};gls2.aa.vb=tm.createClass({superClass:gls2.aa,Bj:0,Dj:0,Cj:0,Ej:0,init:function(b,c,f,s){this.superInit();this.Bj=b;this.Dj=c;this.Cj=f;this.Ej=s},setup:function(b){gls2.aa.prototype.setup.call(this,b);b.on("enterframe",function(){this.rotation=tm.geom.Vector2.sub(this.ba.ea.position,this.position).toAngle()*gls2.la.RAD_TO_DEG-90});var c=this;b.tweener.clear().to({x:c.Bj,y:c.Dj},1400,"easeInOutQuad").call(function(){gls2.aa.ua(this,"ako-5")}.bind(b));b.one("completeattack",function(){this.tweener.clear().to({x:c.Cj,
y:c.Ej},900,"easeInOutQuad").call(function(){gls2.aa.ua(this,"ako-5")}.bind(this));this.one("completeattack",function(){this.tweener.clear().to({y:832},1900,"easeInQuad")})})}});gls2.aa.Ad=tm.createClass({superClass:gls2.aa,delay:0,init:function(b){this.superInit();this.delay=b},setup:function(b){gls2.aa.prototype.setup.call(this,b);b.tweener.wait(this.delay).call(function(){gls2.aa.ua(this,"yuri-4");this.timeline.by({x:-480},2E3,0).by({y:-192},2E3,0,"easeInOutQuad")}.bind(b)).wait(2500).by({y:640},
4E3,"easeInQuad").call(function(){this.remove()}.bind(b))}});gls2.aa.Ee=tm.createClass({superClass:gls2.aa,delay:0,init:function(b){this.superInit();this.delay=b},setup:function(b){gls2.aa.prototype.setup.call(this,b);b.tweener.wait(this.delay).call(function(){gls2.aa.ua(this,"yuri-4");this.timeline.by({x:480},2E3,0).by({y:-192},2E3,0,"easeInOutQuad")}.bind(b)).wait(2500).by({y:640},4E3,"easeInQuad").call(function(){this.remove()}.bind(b))}});gls2.aa.kb=tm.createClass({superClass:gls2.aa,jj:0,direction:1,
delay:0,init:function(b,c,f){this.superInit();this.jj=b;this.direction=c;this.delay=f},setup:function(b){function c(b){return f?b:1-b}gls2.aa.prototype.setup.call(this,b);tm.app.Tweener(b).wait(this.delay).call(function(){gls2.aa.ua(this,"basic1-3")}.bind(b));var f=1==this.direction;switch(this.jj){case 0:tm.app.Tweener(b).wait(this.delay).to({x:480*c(0.8)},1600,"easeOutQuart");tm.app.Tweener(b).wait(this.delay).to({y:832},2E3,"easeInQuad");break;case 1:tm.app.Tweener(b).wait(this.delay).to({x:480*
c(0.2)},1040,"easeInOutQuad").wait(700).to({x:480*c(0.4)},800,"easeInOutQuad");tm.app.Tweener(b).wait(this.delay).to({y:192},1840,"easeInOutQuad").to({y:832},1840,"easeInQuad");break;case 2:tm.app.Tweener(b).wait(this.delay).to({x:480*c(0.2)},1040,"easeInOutQuad").wait(560).to({x:480*c(0.4)},1360,"easeInOutQuad").to({x:480*c(1.4)},1600,"easeInOutQuad");tm.app.Tweener(b).wait(this.delay).to({y:192},1840,"easeInOutQuad").to({y:512},1760,"easeInOutQuad");break;case 3:tm.app.Tweener(b).wait(this.delay).to({x:480*
c(0.2)},1040,"easeInOutQuad").wait(560).to({x:480*c(0.4)},1360,"easeInOutQuad").to({x:480*c(1.4)},1600,"easeInOutQuad"),tm.app.Tweener(b).wait(this.delay).to({y:448},1840,"easeInOutQuad").to({y:128},1760,"easeInOutQuad")}}});c=tm.createClass({superClass:gls2.aa,velocityY:0,Sa:l,init:function(b,c){this.superInit();this.velocityY=b;this.Sa=c},setup:function(b){gls2.aa.prototype.setup.call(this,b);b.velocityY=this.velocityY;b.ha=[this.Sa];b.tweener.clear().call(function(){gls2.aa.ua(this,this.ha[0]);
gls2.pa.Qk(this.x,this.y,this.ba)}.bind(b));b.on("enterframe",function(){this.y+=this.velocityY;this.Ya&&!this.dc()&&this.remove();this.Nb=this.y<this.ea.y})}});gls2.aa.Xa=c(0.5,"akane");gls2.aa.sa=tm.createClass({superClass:gls2.aa,ob:l,init:function(b,c){this.superInit();this.ob="nao-"+c;this.speed=b},setup:function(b){gls2.aa.prototype.setup.call(this,b);b.angle=0.5*Math.PI;b.ob=this.ob;b.speed=this.speed;b.tweener.wait(gls2.Ba.rand(0,1E3)).call(function(){gls2.aa.ua(this,this.ob);var b=180/Math.PI;
this.on("enterframe",function(){this.y<this.ea.y&&this.Ya&&(this.angle+=Math.atan2(this.ea.y-this.y,this.ea.x-this.x)<this.angle?-0.02:0.02,this.angle=gls2.la.clamp(this.angle,0.5,Math.PI-0.5));this.x+=Math.cos(this.angle)*this.speed;this.y+=Math.sin(this.angle)*this.speed;this.rotation=this.angle*b-90;!this.dc()&&this.Ya&&this.remove();if(22500>gls2.Xc(this,this.ea)||this.y>this.ea.y+150)this.Nb=w})}.bind(b))}});gls2.aa.Cb=gls2.aa.sa(3,1);gls2.aa.Db=gls2.aa.sa(6,1);gls2.aa.Eb=gls2.aa.sa(12,1);gls2.aa.Gb=
tm.createClass({superClass:gls2.aa,ob:l,init:function(b){this.superInit();this.ob="reika";this.speed=b},setup:function(b){gls2.aa.prototype.setup.call(this,b);b.angle=0.5*Math.PI;b.ob=this.ob;b.speed=this.speed;b.tweener.wait(gls2.Ba.rand(0,1E3)).call(function(){gls2.aa.ua(this,this.ob);this.tc=0;this.on("enterframe",function(){this.y<this.Kl&&(this.qd+=1);this.x+=this.speed;this.y=this.qd+8*Math.sin(this.tc);this.tc+=0.06})}.bind(b))}});gls2.aa.hc=gls2.aa.Gb(1);gls2.aa.gm=gls2.aa.Gb(2);gls2.aa.Tc=
tm.createClass({superClass:gls2.aa,velocityY:0,Sa:l,delay:0,init:function(){this.superInit();this.velocityY=0.5;this.Sa="aguri";this.delay=0},setup:function(b){gls2.aa.prototype.setup.call(this,b);b.velocityY=this.velocityY;b.ha=[this.Sa];b.ef=w;b.tweener.clear().wait(this.delay).moveBy(0,192,800,"easeOutQuad").call(function(){gls2.aa.ua(this,this.ha[0]);this.ef=k}.bind(b));b.on("enterframe",function(){this.ef&&(this.y+=this.velocityY,384<this.y&&gls2.aa.re(this),this.Ya&&!this.dc()&&this.remove(),
this.Nb=this.y<this.ea.y)})}});gls2.aa.Tc=gls2.aa.Tc();gls2.aa.Pd=tm.createClass({superClass:gls2.aa,velocityX:0,Sa:l,init:function(b){this.superInit();this.velocityX=b;this.Sa="miyuki"},setup:function(b){gls2.aa.prototype.setup.call(this,b);b.ha=[this.Sa];b.im=b.y;b.tweener.clear().call(function(){gls2.aa.ua(this,this.ha[0])}.bind(b));b.on("enterframe",function(){this.Ya&&!this.dc()&&this.remove();this.Nb=this.y<this.ea.y})}});gls2.aa.Pd=gls2.aa.Pd(1);c=tm.createClass({superClass:gls2.aa,velocityX:0,
Sa:l,init:function(){this.superInit();this.Sa="alice"},setup:function(b){gls2.aa.prototype.setup.call(this,b);b.velocityY=0.3;b.ha=[this.Sa];b.tweener.clear().call(function(){gls2.aa.ua(this,this.ha[0])}.bind(b));b.on("enterframe",function(){this.y+=this.velocityY;this.Ya&&!this.dc()&&this.remove();this.Nb=this.y<this.ea.y})}});gls2.aa.eg=c();c=tm.createClass({superClass:gls2.aa,Sa:l,init:function(b){this.superInit();this.Sa=b},setup:function(b){gls2.aa.prototype.setup.call(this,b);b.ha=[this.Sa];
b.tweener.clear().call(function(){gls2.aa.ua(this,this.ha[0])}.bind(b));b.on("enterframe",function(){var b=this.bh.x,c=this.bh.y;this.dir+=0.01;this.x=b+Math.sin(this.dir)*this.distance;this.y=c+Math.cos(this.dir)*this.distance;b=~~(180*Math.atan2(c-this.y,b-this.x)/3.14159);this.ca.setFrameIndex(~~(22.5*((0>b?b+360:b)/360))%16,64,64);this.Ya&&!this.dc()&&this.remove();this.Nb=this.y<this.ea.y;this.oa++})}});gls2.aa.ud=[];gls2.aa.ud[0]=c("aliceLeaf-1");gls2.aa.ud[1]=c("aliceLeaf-2");gls2.aa.ud[2]=
c("aliceLeaf-1");gls2.aa.ud[3]=c("aliceLeaf-2");gls2.aa.mi=b(0.3,"komachi-1");gls2.aa.ni=b(0.5,"komachi-2");gls2.aa.oi=b(0.5,"komachi-3");gls2.aa.sg=b(0.5,"komachi-4");gls2.aa.rg=b(0.5,"komachi-5");gls2.aa.Be=tm.createClass({superClass:gls2.aa,sj:0,init:function(b){this.superInit();this.sj=b},setup:function(b){gls2.aa.prototype.setup.call(this,b);tm.app.Tweener(b).to({x:480*this.sj},2800,"easeOutQuad").call(function(){gls2.aa.ua(this,"mktn-5")}.bind(b));b.on("enterframe",function(){this.y+=0.1})}});
gls2.aa.Fg=b(0.1,"nozomi-4");gls2.aa.Gg=b(0.3,"nozomi-5");gls2.aa.ze=tm.createClass({superClass:gls2.aa,init:function(){this.superInit()},setup:function(b){gls2.aa.ua(b,"basic3-0");b.on("enterframe",function(){this.y+=0.8;this.Nb=this.Ya})}});gls2.aa.ze=gls2.aa.ze();c=tm.createClass({superClass:gls2.aa,ha:l,Uf:0,init:function(b,c){this.superInit();this.ha=b;this.Uf=c||1500},setup:function(b){gls2.aa.prototype.setup.call(this,b);b.ha=[].concat(this.ha);b.Uf=this.Uf;b.ab=w;b.cb=w;b.tweener.clear().move(240,
192,1200,"easeOutQuad").call(function(){this.ab=k;this.dispatchEvent(tm.event.Event("completeattack"));var b=function(){var c=2*gls2.Ba.random()*Math.PI,d=gls2.Ba.randf(48,144);this.tweener.move(240+Math.cos(c)*d,192+0.5*Math.sin(c)*d,3E3,"easeInOutQuad").call(b)}.bind(this);b()}.bind(b));b.on("enterframe",function(){if(!(this.ab===w||0>=this.ra)&&this.Uf<this.frame&&this.cb===w)this.cb=k,this.tweener.clear().wait(500).move(this.x,-100,1200,"easeInQuad").call(function(){this.remove()}.bind(this))});
b.on("completeattack",function(){if(!(0>=this.ra)&&!this.cb){var b=this.ha.shift();gls2.aa.ua(this,b);this.ha.push(b)}})}});gls2.aa.ng=c(["honoka-1"]);gls2.aa.Bg=tm.createClass({superClass:gls2.aa,ha:l,init:function(){this.superInit();this.ha=["nagisa-1-1","nagisa-1-2","nagisa-1-3"]},setup:function(b){gls2.aa.prototype.setup.call(this,b);b.ha=[].concat(this.ha);b.ab=w;b.cb=w;b.tweener.clear().move(240,128,1200,"easeOutQuad").call(function(){this.ab=k;this.dispatchEvent(tm.event.Event("completeattack"));
var b=function(){var c=2*gls2.Ba.random()*Math.PI,d=gls2.Ba.randf(48,144);this.tweener.move(240+Math.cos(c)*d,128+0.3*Math.sin(c)*d,3E3,"easeInOutQuad").call(b)}.bind(this);b()}.bind(b));b.on("completeattack",function(){if(!(0>=this.ra)&&!this.cb){var b=this.ha.shift();gls2.aa.ua(this,b);this.ha.push(b)}})}});gls2.aa.Wj=gls2.aa.Bg();gls2.aa.Cg=tm.createClass({superClass:gls2.aa,ha:l,init:function(){this.superInit();this.ha=["nagisa-2-1","nagisa-2-2","nagisa-2-3"]},setup:function(b){gls2.aa.prototype.setup.call(this,
b);b.ha=[].concat(this.ha);b.tweener.clear().wait(800).call(function(){this.dispatchEvent(tm.event.Event("completeattack"));var b=function(){var c=2*gls2.Ba.random()*Math.PI,d=gls2.Ba.randf(48,144);this.tweener.move(240+Math.cos(c)*d,128+0.3*Math.sin(c)*d,3E3,"easeInOutQuad").call(b)}.bind(this);b()}.bind(b));b.on("completeattack",function(){if(!(0>=this.ra)){var b=this.ha.shift();gls2.aa.ua(this,b);this.ha.push(b)}})}});gls2.aa.Cg=gls2.aa.Cg();gls2.aa.Dg=tm.createClass({superClass:gls2.aa,init:function(){this.superInit()},
setup:function(b){gls2.aa.prototype.setup.call(this,b);b.tweener.clear().wait(800).call(function(){this.dispatchEvent(tm.event.Event("completeattack"));this.tweener.clear().move(240,128,3E3,"easeInOutQuad").move(240,448,2E4,"easeInOutQuad")}.bind(b));b.on("completeattack",function(){0>=this.ra||gls2.aa.ua(this,"nagisa-3-1")})}});gls2.aa.Dg=gls2.aa.Dg();gls2.aa.xg=c(["mai-1","mai-2"]);gls2.aa.Ig=tm.createClass({superClass:gls2.aa,ha:l,init:function(){this.superInit();this.ha=["saki-1-1","saki-1-2",
"saki-1-3"]},setup:function(b){gls2.aa.prototype.setup.call(this,b);b.ha=[].concat(this.ha);b.ab=w;b.cb=w;b.tweener.clear().move(240,128,1200,"easeOutQuad").call(function(){this.ab=k;this.dispatchEvent(tm.event.Event("completeattack"));var b=function(){var c=2*gls2.Ba.random()*Math.PI,d=gls2.Ba.randf(48,144);this.tweener.move(240+Math.cos(c)*d,128+0.3*Math.sin(c)*d,3E3,"easeInOutQuad").call(b)}.bind(this);b()}.bind(b));b.on("completeattack",function(){if(!(0>=this.ra)&&!this.cb){var b=this.ha.shift();
gls2.aa.ua(this,b);this.ha.push(b)}})}});gls2.aa.Ig=gls2.aa.Ig();gls2.aa.Jg=tm.createClass({superClass:gls2.aa,ha:l,init:function(){this.superInit();this.ha=["saki-2-1","saki-2-2","saki-2-3"]},setup:function(b){gls2.aa.prototype.setup.call(this,b);b.ha=[].concat(this.ha);b.tweener.clear().wait(800).call(function(){this.dispatchEvent(tm.event.Event("completeattack"));var b=function(){var c=2*gls2.Ba.random()*Math.PI,d=gls2.Ba.randf(48,144);this.tweener.move(240+Math.cos(c)*d,128+0.3*Math.sin(c)*d,
3E3,"easeInOutQuad").call(b)}.bind(this);b()}.bind(b));b.on("completeattack",function(){if(!(0>=this.ra)){var b=this.ha.shift();gls2.aa.ua(this,b);this.ha.push(b)}})}});gls2.aa.Jg=gls2.aa.Jg();gls2.aa.Kg=tm.createClass({superClass:gls2.aa,ha:l,init:function(){this.superInit();this.ha=["saki-3-1","saki-3-2"]},setup:function(b){gls2.aa.prototype.setup.call(this,b);b.ha=[].concat(this.ha);b.tweener.clear().wait(800).call(function(){this.dispatchEvent(tm.event.Event("completeattack"));var b=function(){var c=
2*gls2.Ba.random()*Math.PI,d=gls2.Ba.randf(48,144);this.tweener.move(240+Math.cos(c)*d,128+0.3*Math.sin(c)*d,3E3,"easeInOutQuad").call(b)}.bind(this);b()}.bind(b));b.on("completeattack",function(){if(!(0>=this.ra)){var b=this.ha.shift();gls2.aa.ua(this,b);this.ha.push(b)}})}});gls2.aa.Kg=gls2.aa.Kg();var f=tm.createClass({superClass:gls2.aa,ha:l,init:function(){this.superInit();this.ha="setsuna-1"},setup:function(b){gls2.aa.prototype.setup.call(this,b);b.ha=[].concat(this.ha);b.ab=w;b.cb=w;b.Xh=w;
b.tweener.clear().move(240,192,1200,"easeOutQuad").call(function(){this.ab=k;this.dispatchEvent(tm.event.Event("completeattack"));var b=function(){this.Xh=w;this.alpha=1;this.eb=w;if(50<gls2.Ba.rand(0,100)&&300<this.frame||this.x-76<this.ea.x&&this.ea.x<this.x+76){gls2.pa.ih(this.x,this.y,this.ba,8);this.Xh=k;this.alpha=0.3;this.eb=k;var c=gls2.Ba.rand(48,432),d=gls2.Ba.rand(128,192);this.tweener.move(c,d,250,"easeInOutQuad").call(b)}else c=2*gls2.Ba.random()*Math.PI,d=gls2.Ba.randf(48,144),this.tweener.move(240+
Math.cos(c)*d,192+0.5*Math.sin(c)*d,2E3,"easeInOutQuad").call(b)}.bind(this);b()}.bind(b));b.on("enterframe",function(){if(!(this.ab===w||0>=this.ra))if(1800<this.frame&&this.cb===w&&(this.cb=k,this.tweener.clear().wait(500).move(this.x,-100,1200,"easeInQuad").call(function(){this.remove()}.bind(this))),this.Xh&&0==this.frame%5){var b=tm.display.Sprite("tex4",256,128).setFrameIndex(2);b.alpha=0.3;b.x=this.x;b.y=this.y;b.setScale(1.5);b.update=function(){this.alpha-=0.01;0>this.alpha&&this.remove()};
this.ba.gh.addChild(b)}});b.on("completeattack",function(){if(!(0>=this.ra)&&!this.cb){var b=this.ha.shift();gls2.aa.ua(this,b);this.ha.push(b)}})}});gls2.aa.Lg=f();gls2.aa.ug=tm.createClass({superClass:gls2.aa,ha:l,init:function(){this.superInit();this.ha=["love-1-1","love-1-2","love-1-3"]},setup:function(b){gls2.aa.prototype.setup.call(this,b);b.ha=[].concat(this.ha);b.ab=w;b.cb=w;b.tweener.clear().move(240,128,1200,"easeOutQuad").call(function(){this.ab=k;this.dispatchEvent(tm.event.Event("completeattack"));
var b=function(){var c=2*gls2.Ba.random()*Math.PI,d=gls2.Ba.randf(48,144);this.tweener.move(240+Math.cos(c)*d,128+0.3*Math.sin(c)*d,3E3,"easeInOutQuad").call(b)}.bind(this);b()}.bind(b));b.on("completeattack",function(){if(!(0>=this.ra)&&!this.cb){var b=this.ha.shift();gls2.aa.ua(this,b);this.ha.push(b)}})}});gls2.aa.ug=gls2.aa.ug();gls2.aa.vg=tm.createClass({superClass:gls2.aa,ha:l,init:function(){this.superInit();this.ha=["love-2-1","love-2-2","love-2-3"]},setup:function(b){gls2.aa.prototype.setup.call(this,
b);b.ha=[].concat(this.ha);b.ab=w;b.cb=w;b.tweener.clear().move(240,128,1200,"easeOutQuad").call(function(){this.ab=k;this.dispatchEvent(tm.event.Event("completeattack"));var b=function(){var c=2*gls2.Ba.random()*Math.PI,d=gls2.Ba.randf(48,144);this.tweener.move(240+Math.cos(c)*d,128+0.3*Math.sin(c)*d,3E3,"easeInOutQuad").call(b)}.bind(this);b()}.bind(b));b.on("completeattack",function(){if(!(0>=this.ra)&&!this.cb){var b=this.ha.shift();gls2.aa.ua(this,b);this.ha.push(b)}})}});gls2.aa.vg=gls2.aa.vg();
gls2.aa.wg=tm.createClass({superClass:gls2.aa,ha:l,init:function(){this.superInit();this.ha=["love-3-1","love-3-2"]},setup:function(b){gls2.aa.prototype.setup.call(this,b);b.ha=[].concat(this.ha);b.tweener.clear().wait(800).call(function(){this.dispatchEvent(tm.event.Event("completeattack"));var b=function(){if("love-3-1"==[].concat(this.ha).pop()){var c=2*gls2.Ba.random()*Math.PI,d=gls2.Ba.randf(24,48);this.tweener.move(240+Math.cos(c)*d,128+0.2*Math.sin(c)*d,2E3,"easeInOutQuad").call(b)}else this.tweener.move(240,
128,1E3,"easeInOutQuad").call(b)}.bind(this);b()}.bind(b));b.on("completeattack",function(){if(!(0>=this.ra)){var b=this.ha.shift();gls2.aa.ua(this,b);this.ha.push(b)}})}});gls2.aa.wg=gls2.aa.wg();gls2.aa.Hg=c(["rikka-1","rikka-2","rikka-3"],3E3);gls2.aa.yg=tm.createClass({superClass:gls2.aa,ha:l,init:function(){this.superInit();this.ha=["mana-1-1","mana-1-2","mana-1-3"]},setup:function(b){gls2.aa.prototype.setup.call(this,b);b.ha=[].concat(this.ha);b.ab=w;b.cb=w;b.tweener.clear().move(240,192,1200,
"easeOutQuad").call(function(){this.ab=k;this.dispatchEvent(tm.event.Event("completeattack"));var b=function(){var c=gls2.Ba.randf(-48,48);this.tweener.move(Math.clamp(this.ea.x,48,432)+0.3*c,128+0.3*c,3E3,"easeInOutQuad").call(b)}.bind(this);b()}.bind(b));b.on("completeattack",function(){if(!(0>=this.ra)&&!this.cb){var b=this.ha.shift();gls2.aa.ua(this,b);this.ha.push(b)}})}});gls2.aa.yg=gls2.aa.yg();gls2.aa.zg=tm.createClass({superClass:gls2.aa,ha:l,init:function(){this.superInit();this.ha=["mana-2-1",
"mana-2-2","mana-2-3"]},setup:function(b){gls2.aa.prototype.setup.call(this,b);b.ha=[].concat(this.ha);b.tweener.clear().wait(800).call(function(){this.dispatchEvent(tm.event.Event("completeattack"));var b=function(){var c=2*gls2.Ba.random()*Math.PI,d=gls2.Ba.randf(48,144);this.tweener.move(240+Math.cos(c)*d,192+0.4*Math.sin(c)*d,3E3,"easeInOutQuad").call(b)}.bind(this);b()}.bind(b));b.on("completeattack",function(){if(!(0>=this.ra)){var b=this.ha.shift();gls2.aa.ua(this,b);this.ha.push(b)}})}});
gls2.aa.zg=gls2.aa.zg();gls2.aa.Ag=tm.createClass({superClass:gls2.aa,ha:l,init:function(){this.superInit();this.ha=["mana-3-1"]},setup:function(b){gls2.aa.prototype.setup.call(this,b);b.ha=[].concat(this.ha);b.tweener.clear().wait(800).call(function(){this.dispatchEvent(tm.event.Event("completeattack"));var b=function(){var c=2*gls2.Ba.random()*Math.PI,d=gls2.Ba.randf(48,144);this.tweener.move(240+Math.cos(c)*d,192+0.3*Math.sin(c)*d,1500,"easeInOutQuad").call(b)}.bind(this);b()}.bind(b));b.on("completeattack",
function(){if(!(0>=this.ra)){var b=this.ha.shift();gls2.aa.ua(this,b);this.ha.push(b)}})}});gls2.aa.Ag=gls2.aa.Ag();gls2.aa.qg=tm.createClass({superClass:gls2.aa,ha:l,init:function(){this.superInit()},setup:function(b){gls2.aa.prototype.setup.call(this,b);b.on("enemyconsumed",function(){this.Ha.$.xe=w});b.zj=tm.app.Tweener(b).to({x:432},3E4,"easeInOutQuad").to({x:48},3E4,"easeInOutQuad").call(function(){this.Ha.$.xe=k}.bind(b)).setLoop(k);b.Aj=tm.app.Tweener(b).to({y:576},16E4,"easeInOutQuad").call(function(){tm.app.Tweener(this).to({y:448},
2E4,"easeInOutQuad").to({y:576},2E4,"easeInOutQuad").setLoop(k)}.bind(b));b.tweener.wait(22E4).call(function(){this.Ha.$.xe=w;this.zj.clear();this.Aj.clear();this.tweener.clear().to({x:960},1E4,"easeInQuad")}.bind(b));b.ab=w;b.on("enterframe",function(){this.eb=3<this.Je.filter(function(b){return!!b.parent}).length;this.Ya=!this.eb;!this.ab&&!this.eb&&(gls2.aa.ua(this,"kanade"),this.ab=k)})}});gls2.aa.qg=gls2.aa.qg();gls2.aa.Qc=tm.createClass({superClass:gls2.aa,init:function(){this.superInit()},
setup:function(b){gls2.aa.prototype.setup.call(this,b);gls2.aa.ua(b,"rery");b.on("enterframe",function(){this.position.y>this.ba.ea.y?gls2.aa.re(this):gls2.aa.Al(this)})}});gls2.aa.Qb=tm.createClass({superClass:gls2.aa,init:function(){this.superInit()},setup:function(b){gls2.aa.prototype.setup.call(this,b);gls2.aa.ua(b,"fary")}});gls2.aa.Rc=tm.createClass({superClass:gls2.aa,init:function(){this.superInit()},setup:function(b){gls2.aa.prototype.setup.call(this,b);gls2.aa.ua(b,"sory")}});gls2.aa.tg=
tm.createClass({superClass:gls2.aa,init:function(){this.superInit()},setup:function(b){gls2.aa.prototype.setup.call(this,b);gls2.aa.ua(b,"lary")}});gls2.aa.Mg=tm.createClass({superClass:gls2.aa,init:function(){this.superInit()},setup:function(b){gls2.aa.prototype.setup.call(this,b);gls2.aa.ua(b,"shiry")}});gls2.aa.Nc=tm.createClass({superClass:gls2.aa,init:function(){this.superInit()},setup:function(b){gls2.aa.prototype.setup.call(this,b);gls2.aa.ua(b,"dodory")}});gls2.aa.kg=tm.createClass({superClass:gls2.aa,
ha:l,init:function(){this.superInit();this.ha="hibiki-1-1a hibiki-1-2 hibiki-1-3a hibiki-1-1b hibiki-1-2 hibiki-1-3b".split(" ")},setup:function(b){gls2.aa.prototype.setup.call(this,b);b.ha=[].concat(this.ha);b.ab=w;b.cb=w;b.tweener.clear().move(240,192,1200,"easeOutQuad").call(function(){this.ab=k;this.dispatchEvent(tm.event.Event("completeattack"))}.bind(b));b.on("completeattack",function(){if(!(0>=this.ra)&&!this.cb){var b=this.ha.shift();gls2.aa.ua(this,b);this.ha.push(b)}})}});gls2.aa.kg=gls2.aa.kg();
gls2.aa.lg=tm.createClass({superClass:gls2.aa,ha:l,xl:[262,267,320,107,407,149,306,319,301,149,248,201,378],yl:[257,167,268,209,233,113,268,231,92,235,170,122,87],init:function(){this.superInit();this.ha=["hibiki-2-1","hibiki-2-2","hibiki-2-3"]},setup:function(b){gls2.aa.prototype.setup.call(this,b);b.ha=[].concat(this.ha);var c=this.xl,f=this.yl,s=0;b.tweener.clear().wait(10).call(function(){this.Ha.Na({hard:gls2.da.ye,soft:gls2.aa.ye(this,"dory"),x:240,y:-192});this.Ha.Na({hard:gls2.da.Ae,soft:gls2.aa.Ae(this,
"miry"),x:240,y:-192});this.ba.ka.tweener.clear().to({speed:16},5E3)}.bind(b)).wait(800).call(function(){this.dispatchEvent(tm.event.Event("completeattack"));var b=function(){this.tweener.move(c[s],f[s],3E3,"easeInOutQuad").call(b);s=(s+1)%c.length}.bind(this);b()}.bind(b));b.on("completeattack",function(){if(!(0>=this.ra)){var b=this.ha.shift();gls2.aa.ua(this,b);this.ha.push(b)}})}});gls2.aa.lg=gls2.aa.lg();gls2.aa.mg=tm.createClass({superClass:gls2.aa,ha:l,init:function(){this.superInit();this.ha=
["hibiki-3-1","hibiki-3-2"]},setup:function(b){gls2.aa.prototype.setup.call(this,b);b.ha=[].concat(this.ha);b.tweener.clear().to({x:240,y:128},1E3,"easeOutQuad").call(function(){this.dispatchEvent(tm.event.Event("completeattack"))}.bind(b));b.on("completeattack",function(){if(!(0>=this.ra)){var b=this.ha.shift();gls2.aa.ua(this,b);this.ha.push(b)}});b.on("destroy",function(){this.dh.parent&&this.dh.remove();this.uh.parent&&this.uh.remove();this.ba.ka.tweener.clear().to({speed:1},5E3)})}});gls2.aa.mg=
gls2.aa.mg();gls2.aa.sf=tm.createClass({superClass:gls2.aa,Of:l,ob:l,Kh:l,init:function(b,c){this.superInit();this.Of=b;this.ob=c},setup:function(b){gls2.aa.prototype.setup.call(this,b);gls2.aa.ua(b,this.ob);var c=0,f=this.Kh,s=this.Of,A=function(){this.tweener.clear().to({x:f[c].x+s.x,y:f[c].y+s.y},5E3,"easeInOutSine").call(A);c=(c+1)%f.length}.bind(b);A()}});gls2.aa.ye=tm.createClass({superClass:gls2.aa.sf,init:function(b,c){this.superInit(b,c);this.Kh=[{x:-140,y:-100},{x:140,y:-100},{x:140,y:120},
{x:-140,y:120}]},setup:function(b){gls2.aa.sf.prototype.setup.call(this,b);var c=this.Of;c.dh=b;b.on("destroy",function(){0<c.ra&&this.Ha.Na({hard:gls2.da.ye,soft:gls2.aa.ye(c,"dory"),x:240,y:-192})})}});gls2.aa.Ae=tm.createClass({superClass:gls2.aa.sf,init:function(b,c){this.superInit(b,c);this.Kh=[{x:140,y:120},{x:-140,y:120},{x:-140,y:-100},{x:140,y:-100}]},setup:function(b){gls2.aa.sf.prototype.setup.call(this,b);var c=this.Of;c.uh=b;b.on("destroy",function(){0<c.ra&&this.Ha.Na({hard:gls2.da.Ae,
soft:gls2.aa.Ae(c,"miry"),x:240,y:-192})})}})})();(function(){var c=gls2.da,b=gls2.aa;gls2.hi={"heri1-left":[{hard:c.Ca,soft:b.Pc,x:48,y:-100},{hard:c.Ca,soft:b.xb,x:96,y:-100},{hard:c.Ca,soft:b.Pc,x:144,y:-100},{hard:c.Ca,soft:b.xb,x:192,y:-100},{hard:c.Ca,soft:b.Pc,x:240,y:-100}],"heri1-center":[{hard:c.Ca,soft:b.Pc,x:144,y:-100},{hard:c.Ca,soft:b.xb,x:192,y:-100},{hard:c.Ca,soft:b.Pc,x:240,y:-100},{hard:c.Ca,soft:b.xb,x:288,y:-100},{hard:c.Ca,soft:b.Pc,x:336,y:-100}],"heri1-right":[{hard:c.Ca,soft:b.Pc,x:240,y:-100},{hard:c.Ca,soft:b.xb,x:288,
y:-100},{hard:c.Ca,soft:b.Pc,x:336,y:-100},{hard:c.Ca,soft:b.xb,x:384,y:-100},{hard:c.Ca,soft:b.Pc,x:432,y:-100}],"heri1-left2":[{hard:c.Ca,soft:b.xb,x:48,y:-100},{hard:c.Ca,soft:b.ae,x:96,y:-100},{hard:c.Ca,soft:b.xb,x:144,y:-100},{hard:c.Ca,soft:b.ae,x:192,y:-100},{hard:c.Ca,soft:b.xb,x:240,y:-100}],"heri1-center2":[{hard:c.Ca,soft:b.xb,x:144,y:-100},{hard:c.Ca,soft:b.ae,x:192,y:-100},{hard:c.Ca,soft:b.xb,x:240,y:-100},{hard:c.Ca,soft:b.ae,x:288,y:-100},{hard:c.Ca,soft:b.xb,x:336,y:-100}],"heri1-right2":[{hard:c.Ca,
soft:b.xb,x:240,y:-100},{hard:c.Ca,soft:b.ae,x:288,y:-100},{hard:c.Ca,soft:b.xb,x:336,y:-100},{hard:c.Ca,soft:b.ae,x:384,y:-100},{hard:c.Ca,soft:b.xb,x:432,y:-100}],"heri2-left":[{hard:c.ja,soft:b.yb,x:48,y:-100},{hard:c.ja,soft:b.yb,x:96,y:-100},{hard:c.ja,soft:b.yb,x:144,y:-100},{hard:c.ja,soft:b.yb,x:192,y:-100},{hard:c.ja,soft:b.yb,x:240,y:-100}],"heri2-center":[{hard:c.ja,soft:b.yb,x:144,y:-100},{hard:c.ja,soft:b.yb,x:192,y:-100},{hard:c.ja,soft:b.yb,x:240,y:-100},{hard:c.ja,soft:b.yb,x:288,
y:-100},{hard:c.ja,soft:b.yb,x:336,y:-100}],"heri2-right":[{hard:c.ja,soft:b.yb,x:240,y:-100},{hard:c.ja,soft:b.yb,x:288,y:-100},{hard:c.ja,soft:b.yb,x:336,y:-100},{hard:c.ja,soft:b.yb,x:384,y:-100},{hard:c.ja,soft:b.yb,x:432,y:-100}],"heri2-5-left":[{hard:c.ja,soft:b.Ja(0),x:48,y:-100},{hard:c.ja,soft:b.Ja(100),x:96,y:-100},{hard:c.ja,soft:b.Ja(200),x:144,y:-100},{hard:c.ja,soft:b.Ja(300),x:192,y:-100},{hard:c.ja,soft:b.Ja(400),x:240,y:-100},{hard:c.ja,soft:b.Ja(500),x:48,y:-100},{hard:c.ja,soft:b.Ja(600),
x:96,y:-100},{hard:c.ja,soft:b.Ja(700),x:144,y:-100},{hard:c.ja,soft:b.Ja(800),x:192,y:-100},{hard:c.ja,soft:b.Ja(900),x:240,y:-100}],"heri2-5-center":[{hard:c.ja,soft:b.Ja(0),x:144,y:-100},{hard:c.ja,soft:b.Ja(100),x:192,y:-100},{hard:c.ja,soft:b.Ja(200),x:240,y:-100},{hard:c.ja,soft:b.Ja(300),x:288,y:-100},{hard:c.ja,soft:b.Ja(400),x:336,y:-100},{hard:c.ja,soft:b.Ja(500),x:144,y:-100},{hard:c.ja,soft:b.Ja(600),x:192,y:-100},{hard:c.ja,soft:b.Ja(700),x:240,y:-100},{hard:c.ja,soft:b.Ja(800),x:288,
y:-100},{hard:c.ja,soft:b.Ja(900),x:336,y:-100}],"heri2-5-right":[{hard:c.ja,soft:b.Ja(0),x:240,y:-100},{hard:c.ja,soft:b.Ja(100),x:288,y:-100},{hard:c.ja,soft:b.Ja(200),x:336,y:-100},{hard:c.ja,soft:b.Ja(300),x:384,y:-100},{hard:c.ja,soft:b.Ja(400),x:432,y:-100},{hard:c.ja,soft:b.Ja(500),x:240,y:-100},{hard:c.ja,soft:b.Ja(600),x:288,y:-100},{hard:c.ja,soft:b.Ja(700),x:336,y:-100},{hard:c.ja,soft:b.Ja(800),x:384,y:-100},{hard:c.ja,soft:b.Ja(900),x:432,y:-100}],"heri1-4-left":[{hard:c.ja,soft:b.wb,
x:48,y:-100},{hard:c.ja,soft:b.wb,x:96,y:-100},{hard:c.ja,soft:b.wb,x:144,y:-100},{hard:c.ja,soft:b.wb,x:192,y:-100},{hard:c.ja,soft:b.wb,x:240,y:-100}],"heri1-4-center":[{hard:c.ja,soft:b.wb,x:144,y:-100},{hard:c.ja,soft:b.wb,x:192,y:-100},{hard:c.ja,soft:b.wb,x:240,y:-100},{hard:c.ja,soft:b.wb,x:288,y:-100},{hard:c.ja,soft:b.wb,x:336,y:-100}],"heri1-4-right":[{hard:c.ja,soft:b.wb,x:240,y:-100},{hard:c.ja,soft:b.wb,x:288,y:-100},{hard:c.ja,soft:b.wb,x:336,y:-100},{hard:c.ja,soft:b.wb,x:384,y:-100},
{hard:c.ja,soft:b.wb,x:432,y:-100}],"heri1-4-left2":[{hard:c.ja,soft:b.Oc,x:48,y:-100},{hard:c.ja,soft:b.$d,x:96,y:-100},{hard:c.ja,soft:b.Oc,x:144,y:-100},{hard:c.ja,soft:b.$d,x:192,y:-100},{hard:c.ja,soft:b.Oc,x:240,y:-100}],"heri1-4-center2":[{hard:c.ja,soft:b.Oc,x:144,y:-100},{hard:c.ja,soft:b.$d,x:192,y:-100},{hard:c.ja,soft:b.Oc,x:240,y:-100},{hard:c.ja,soft:b.$d,x:288,y:-100},{hard:c.ja,soft:b.Oc,x:336,y:-100}],"heri1-4-right2":[{hard:c.ja,soft:b.Oc,x:240,y:-100},{hard:c.ja,soft:b.$d,x:288,
y:-100},{hard:c.ja,soft:b.Oc,x:336,y:-100},{hard:c.ja,soft:b.$d,x:384,y:-100},{hard:c.ja,soft:b.Oc,x:432,y:-100}],"tankRD-left":[{hard:c.na,soft:b.Bc,x:78,y:-50},{hard:c.na,soft:b.Bc,x:28,y:-100},{hard:c.na,soft:b.Bc,x:-22,y:-150},{hard:c.na,soft:b.Bc,x:-72,y:-200},{hard:c.na,soft:b.Bc,x:-122,y:-250}],"tankRD-center":[{hard:c.na,soft:b.Bc,x:222,y:-50},{hard:c.na,soft:b.Bc,x:172,y:-100},{hard:c.na,soft:b.Bc,x:122,y:-150},{hard:c.na,soft:b.Bc,x:72,y:-200},{hard:c.na,soft:b.Bc,x:22,y:-250}],"tankL-top":[{hard:c.na,
soft:b.De,x:550,y:64},{hard:c.na,soft:b.De,x:620,y:64},{hard:c.na,soft:b.De,x:690,y:64},{hard:c.na,soft:b.De,x:760,y:64},{hard:c.na,soft:b.De,x:830,y:64}],"tank5-left":[{hard:c.na,soft:b.xa,x:48,y:-70},{hard:c.na,soft:b.xa,x:48,y:-140},{hard:c.na,soft:b.xa,x:48,y:-210},{hard:c.na,soft:b.xa,x:48,y:-280},{hard:c.na,soft:b.xa,x:48,y:-350}],"tank5-center":[{hard:c.na,soft:b.xa,x:240,y:-70},{hard:c.na,soft:b.xa,x:240,y:-140},{hard:c.na,soft:b.xa,x:240,y:-210},{hard:c.na,soft:b.xa,x:240,y:-280},{hard:c.na,
soft:b.xa,x:240,y:-350}],"tank15-top":[{hard:c.na,soft:b.xa,x:48,y:-70},{hard:c.na,soft:b.xa,x:48,y:-140},{hard:c.na,soft:b.xa,x:48,y:-210},{hard:c.na,soft:b.xa,x:48,y:-280},{hard:c.na,soft:b.xa,x:48,y:-350},{hard:c.na,soft:b.xa,x:240,y:-70},{hard:c.na,soft:b.xa,x:240,y:-140},{hard:c.na,soft:b.xa,x:240,y:-210},{hard:c.na,soft:b.xa,x:240,y:-280},{hard:c.na,soft:b.xa,x:240,y:-350},{hard:c.na,soft:b.xa,x:432,y:-70},{hard:c.na,soft:b.xa,x:432,y:-140},{hard:c.na,soft:b.xa,x:432,y:-210},{hard:c.na,soft:b.xa,
x:432,y:-280},{hard:c.na,soft:b.xa,x:432,y:-350}],"tank25-top":[{hard:c.na,soft:b.xa,x:48,y:-70},{hard:c.na,soft:b.xa,x:48,y:-140},{hard:c.na,soft:b.xa,x:48,y:-210},{hard:c.na,soft:b.xa,x:48,y:-280},{hard:c.na,soft:b.xa,x:48,y:-350},{hard:c.na,soft:b.xa,x:240,y:-70},{hard:c.na,soft:b.xa,x:240,y:-140},{hard:c.na,soft:b.xa,x:240,y:-210},{hard:c.na,soft:b.xa,x:240,y:-280},{hard:c.na,soft:b.xa,x:240,y:-350},{hard:c.na,soft:b.xa,x:432,y:-70},{hard:c.na,soft:b.xa,x:432,y:-140},{hard:c.na,soft:b.xa,x:432,
y:-210},{hard:c.na,soft:b.xa,x:432,y:-280},{hard:c.na,soft:b.xa,x:432,y:-350},{hard:c.na,soft:b.Cc,x:144,y:710},{hard:c.na,soft:b.Cc,x:144,y:780},{hard:c.na,soft:b.Cc,x:144,y:850},{hard:c.na,soft:b.Cc,x:144,y:920},{hard:c.na,soft:b.Cc,x:144,y:990},{hard:c.na,soft:b.Cc,x:336,y:710},{hard:c.na,soft:b.Cc,x:336,y:780},{hard:c.na,soft:b.Cc,x:336,y:850},{hard:c.na,soft:b.Cc,x:336,y:920},{hard:c.na,soft:b.Cc,x:336,y:990}],"bukky-4-r":[{hard:c.mf,soft:b.fi,x:480,y:-50}],"bukky-4-l":[{hard:c.mf,soft:b.fi,
x:0,y:-50}],"bukky-5-r":[{hard:c.mf,soft:b.gi,x:480,y:-50}],"bukky-5-l":[{hard:c.mf,soft:b.gi,x:0,y:-50}],"cannon-0":[{hard:c.Ta,soft:b.Yb,x:48,y:-100}],"cannon-1":[{hard:c.Ta,soft:b.Yb,x:96,y:-100}],"cannon-2":[{hard:c.Ta,soft:b.Yb,x:144,y:-100}],"cannon-3":[{hard:c.Ta,soft:b.Yb,x:192,y:-100}],"cannon-4":[{hard:c.Ta,soft:b.Yb,x:240,y:-100}],"cannon-5":[{hard:c.Ta,soft:b.Yb,x:288,y:-100}],"cannon-6":[{hard:c.Ta,soft:b.Yb,x:336,y:-100}],"cannon-7":[{hard:c.Ta,soft:b.Yb,x:384,y:-100}],"cannon-8":[{hard:c.Ta,
soft:b.Yb,x:432,y:-100}],"cannon-R0":[{hard:c.Ta,soft:b.Yb,x:550,y:128}],"cannon-R1":[{hard:c.Ta,soft:b.Yb,x:550,y:192}],"cannon-R2":[{hard:c.Ta,soft:b.Yb,x:550,y:256}],"yayoi-0":[{hard:c.Ta,soft:b.Zb,x:48,y:-100}],"yayoi-1":[{hard:c.Ta,soft:b.Zb,x:96,y:-100}],"yayoi-2":[{hard:c.Ta,soft:b.Zb,x:144,y:-100}],"yayoi-3":[{hard:c.Ta,soft:b.Zb,x:192,y:-100}],"yayoi-4":[{hard:c.Ta,soft:b.Zb,x:240,y:-100}],"yayoi-5":[{hard:c.Ta,soft:b.Zb,x:288,y:-100}],"yayoi-6":[{hard:c.Ta,soft:b.Zb,x:336,y:-100}],"yayoi-7":[{hard:c.Ta,
soft:b.Zb,x:384,y:-100}],"yayoi-8":[{hard:c.Ta,soft:b.Zb,x:432,y:-100}],"yayoi-R0":[{hard:c.Ta,soft:b.Zb,x:550,y:128}],"yayoi-R1":[{hard:c.Ta,soft:b.Zb,x:550,y:192}],"yayoi-R2":[{hard:c.Ta,soft:b.Zb,x:550,y:256}],"tsubomi-0":[{hard:c.wf,soft:b.of,x:96,y:-100}],"tsubomi-1":[{hard:c.wf,soft:b.of,x:240,y:-100}],"tsubomi-2":[{hard:c.wf,soft:b.of,x:384,y:-100}],"tsubomi-R0":[{hard:c.wf,soft:b.of,x:580,y:128}],"itsuki-0":[{hard:c.pg,soft:b.ig,x:96,y:-100}],"itsuki-1":[{hard:c.pg,soft:b.ig,x:240,y:-100}],
"itsuki-2":[{hard:c.pg,soft:b.ig,x:384,y:-100}],"makoto-0":[{hard:c.xc,soft:b.yc,x:48,y:-100}],"makoto-1":[{hard:c.xc,soft:b.yc,x:96,y:-100}],"makoto-2":[{hard:c.xc,soft:b.yc,x:144,y:-100}],"makoto-3":[{hard:c.xc,soft:b.yc,x:192,y:-100}],"makoto-4":[{hard:c.xc,soft:b.yc,x:240,y:-100}],"makoto-5":[{hard:c.xc,soft:b.yc,x:288,y:-100}],"makoto-6":[{hard:c.xc,soft:b.yc,x:336,y:-100}],"makoto-7":[{hard:c.xc,soft:b.yc,x:384,y:-100}],"makoto-8":[{hard:c.xc,soft:b.yc,x:432,y:-100}],"makoto-R0":[{hard:c.xc,
soft:b.yc,x:580,y:128}],"karen-3-2":[{hard:c.hg,soft:b.gg,x:96,y:-100}],"karen-3-5":[{hard:c.hg,soft:b.gg,x:240,y:-100}],"karen-3-8":[{hard:c.hg,soft:b.gg,x:384,y:-100}],"fighter-m-0":[{hard:c.cd,soft:b.yd,x:96,y:-192}],"fighter-m-1":[{hard:c.cd,soft:b.yd,x:144,y:-192}],"fighter-m-2":[{hard:c.cd,soft:b.yd,x:192,y:-192}],"fighter-m-3":[{hard:c.cd,soft:b.yd,x:240,y:-192}],"fighter-m-4":[{hard:c.cd,soft:b.yd,x:288,y:-192}],"fighter-m-5":[{hard:c.cd,soft:b.yd,x:336,y:-192}],"fighter-m-6":[{hard:c.cd,
soft:b.yd,x:384,y:-192}],"fighter-m4-0":[{hard:c.cd,soft:b.Vj,x:96,y:-192}],"tsukikage-r":[{hard:c.$b,soft:b.Ad(700),x:624,y:256},{hard:c.$b,soft:b.Ad(600),x:720,y:256},{hard:c.$b,soft:b.Ad(500),x:576,y:320},{hard:c.$b,soft:b.Ad(400),x:672,y:320},{hard:c.$b,soft:b.Ad(300),x:768,y:320},{hard:c.$b,soft:b.Ad(200),x:624,y:384},{hard:c.$b,soft:b.Ad(100),x:720,y:384}],"tsukikage-l":[{hard:c.$b,soft:b.Ee(700),x:-144,y:384},{hard:c.$b,soft:b.Ee(600),x:-240,y:384},{hard:c.$b,soft:b.Ee(500),x:-96,y:320},{hard:c.$b,
soft:b.Ee(400),x:-192,y:320},{hard:c.$b,soft:b.Ee(200),x:-144,y:256}],"urara5-0":function(){for(var f=[],d=0;20>d;d++)f.push({hard:c.kb,soft:b.kb(0,1,200*d),x:-144,y:128});return f}(),"urara5-1":function(){for(var f=[],d=0;20>d;d++)f.push({hard:c.kb,soft:b.kb(0,-1,200*d),x:624,y:128});return f}(),"urara5-2":function(){for(var f=[],d=0;20>d;d++)f.push({hard:c.kb,soft:b.kb(1,1,200*d),x:-144,y:512});return f}(),"urara5-3":function(){for(var f=[],d=0;20>d;d++)f.push({hard:c.kb,soft:b.kb(1,-1,200*d),x:624,
y:512});return f}(),"urara5-4":function(){for(var f=[],d=0;20>d;d++)f.push({hard:c.kb,soft:b.kb(2,1,200*d),x:-144,y:512});return f}(),"urara5-5":function(){for(var f=[],d=0;20>d;d++)f.push({hard:c.kb,soft:b.kb(2,-1,200*d),x:624,y:512});return f}(),"urara5-6":function(){for(var f=[],d=0;20>d;d++)f.push({hard:c.kb,soft:b.kb(3,1,200*d),x:-144,y:128});return f}(),"urara5-7":function(){for(var f=[],d=0;20>d;d++)f.push({hard:c.kb,soft:b.kb(3,-1,200*d),x:624,y:128});return f}(),"milk5-0":[{hard:c.zc,soft:b.Ac(2E3),
x:384,y:-256},{hard:c.zc,soft:b.Ac(1500),x:312,y:-224},{hard:c.zc,soft:b.Ac(1E3),x:240,y:-192},{hard:c.zc,soft:b.Ac(500),x:168,y:-160},{hard:c.zc,soft:b.Ac(0),x:96,y:-128}],"milk5-1":[{hard:c.zc,soft:b.Ac(2E3),x:96,y:-256},{hard:c.zc,soft:b.Ac(1500),x:168,y:-224},{hard:c.zc,soft:b.Ac(1E3),x:240,y:-192},{hard:c.zc,soft:b.Ac(500),x:312,y:-160},{hard:c.zc,soft:b.Ac(0),x:384,y:-128}],"ako5-0":[{hard:c.ub,soft:b.vb(240,128,96,256),x:240,y:-192},{hard:c.ub,soft:b.vb(384,256,240,128),x:384,y:-192},{hard:c.ub,
soft:b.vb(360,512,384,256),x:360,y:-192},{hard:c.ub,soft:b.vb(120,512,360,512),x:120,y:-192},{hard:c.ub,soft:b.vb(96,256,120,512),x:96,y:-192}],"ako5-1":[{hard:c.ub,soft:b.vb(240,128,384,256),x:240,y:-192},{hard:c.ub,soft:b.vb(384,256,360,512),x:384,y:-192},{hard:c.ub,soft:b.vb(360,512,120,512),x:360,y:-192},{hard:c.ub,soft:b.vb(120,512,96,256),x:120,y:-192},{hard:c.ub,soft:b.vb(96,256,240,128),x:96,y:-192}],"ako5-2":[{hard:c.ub,soft:b.vb(240,128,120,512),x:240,y:-192},{hard:c.ub,soft:b.vb(384,256,
96,256),x:384,y:-192},{hard:c.ub,soft:b.vb(360,512,240,128),x:360,y:-192},{hard:c.ub,soft:b.vb(120,512,384,256),x:120,y:-192},{hard:c.ub,soft:b.vb(96,256,360,512),x:96,y:-192}],"komachi-0":[{hard:c.ac,soft:b.mi,x:144,y:-192}],"komachi-1":[{hard:c.ac,soft:b.mi,x:336,y:-192}],"komachi2-0":[{hard:c.ac,soft:b.ni,x:144,y:-192}],"komachi2-1":[{hard:c.ac,soft:b.ni,x:336,y:-192}],"komachi3-0":[{hard:c.ac,soft:b.oi,x:144,y:-192}],"komachi3-1":[{hard:c.ac,soft:b.oi,x:336,y:-192}],"komachi4-0":[{hard:c.ac,soft:b.sg,
x:144,y:-192}],"komachi4-1":[{hard:c.ac,soft:b.sg,x:336,y:-192}],"komachi4-2":[{hard:c.ac,soft:b.sg,x:240,y:-192}],"komachi5-0":[{hard:c.ac,soft:b.rg,x:144,y:-192}],"komachi5-1":[{hard:c.ac,soft:b.rg,x:336,y:-192}],"komachi5-2":[{hard:c.ac,soft:b.rg,x:240,y:-192}],"nozomi4-0":[{hard:c.ce,soft:b.Fg,x:144,y:-192}],"nozomi4-1":[{hard:c.ce,soft:b.Fg,x:240,y:-192}],"nozomi4-2":[{hard:c.ce,soft:b.Fg,x:336,y:-192}],"nozomi5-0":[{hard:c.ce,soft:b.Gg,x:144,y:-256}],"nozomi5-1":[{hard:c.ce,soft:b.Gg,x:240,
y:-128}],"nozomi5-2":[{hard:c.ce,soft:b.Gg,x:336,y:-256}],"mktn5-0":[{hard:c.Be,soft:b.Be(0.6),x:624,y:128}],"mktn5-1":[{hard:c.Be,soft:b.Be(0.4),x:-144,y:64}],"akane-center":[{hard:c.Xa,soft:b.Xa,x:168,y:256},{hard:c.Xa,soft:b.Xa,x:192,y:128},{hard:c.Xa,soft:b.Xa,x:288,y:128},{hard:c.Xa,soft:b.Xa,x:312,y:256}],"akane-right":[{hard:c.Xa,soft:b.Xa,x:384,y:64},{hard:c.Xa,soft:b.Xa,x:336,y:160},{hard:c.Xa,soft:b.Xa,x:384,y:256}],"akane-left":[{hard:c.Xa,soft:b.Xa,x:96,y:64},{hard:c.Xa,soft:b.Xa,x:144,
y:160},{hard:c.Xa,soft:b.Xa,x:96,y:256}],"nao1-left":[{hard:c.sa,soft:b.Cb,x:48,y:-100},{hard:c.sa,soft:b.Cb,x:96,y:-100},{hard:c.sa,soft:b.Cb,x:144,y:-100},{hard:c.sa,soft:b.Cb,x:192,y:-100},{hard:c.sa,soft:b.Cb,x:240,y:-100}],"nao1-right":[{hard:c.sa,soft:b.Cb,x:240,y:-100},{hard:c.sa,soft:b.Cb,x:288,y:-100},{hard:c.sa,soft:b.Cb,x:336,y:-100},{hard:c.sa,soft:b.Cb,x:384,y:-100},{hard:c.sa,soft:b.Cb,x:432,y:-100}],"nao1-center":[{hard:c.sa,soft:b.Cb,x:144,y:-100},{hard:c.sa,soft:b.Cb,x:192,y:-100},
{hard:c.sa,soft:b.Cb,x:240,y:-100},{hard:c.sa,soft:b.Cb,x:288,y:-100},{hard:c.sa,soft:b.Cb,x:336,y:-100}],"nao2-left":[{hard:c.sa,soft:b.Db,x:48,y:-100},{hard:c.sa,soft:b.Db,x:96,y:-100},{hard:c.sa,soft:b.Db,x:144,y:-100},{hard:c.sa,soft:b.Db,x:192,y:-100},{hard:c.sa,soft:b.Db,x:240,y:-100}],"nao2-right":[{hard:c.sa,soft:b.Db,x:240,y:-100},{hard:c.sa,soft:b.Db,x:288,y:-100},{hard:c.sa,soft:b.Db,x:336,y:-100},{hard:c.sa,soft:b.Db,x:384,y:-100},{hard:c.sa,soft:b.Db,x:432,y:-100}],"nao2-center":[{hard:c.sa,
soft:b.Db,x:144,y:-100},{hard:c.sa,soft:b.Db,x:192,y:-100},{hard:c.sa,soft:b.Db,x:240,y:-100},{hard:c.sa,soft:b.Db,x:288,y:-100},{hard:c.sa,soft:b.Db,x:336,y:-100}],"nao3-left":[{hard:c.sa,soft:b.Eb,x:48,y:-100},{hard:c.sa,soft:b.Eb,x:96,y:-100},{hard:c.sa,soft:b.Eb,x:144,y:-100},{hard:c.sa,soft:b.Eb,x:192,y:-100},{hard:c.sa,soft:b.Eb,x:240,y:-100}],"nao3-right":[{hard:c.sa,soft:b.Eb,x:240,y:-100},{hard:c.sa,soft:b.Eb,x:288,y:-100},{hard:c.sa,soft:b.Eb,x:336,y:-100},{hard:c.sa,soft:b.Eb,x:384,y:-100},
{hard:c.sa,soft:b.Eb,x:432,y:-100}],"nao3-center":[{hard:c.sa,soft:b.Eb,x:144,y:-100},{hard:c.sa,soft:b.Eb,x:192,y:-100},{hard:c.sa,soft:b.Eb,x:240,y:-100},{hard:c.sa,soft:b.Eb,x:288,y:-100},{hard:c.sa,soft:b.Eb,x:336,y:-100}],"reika1-left":[{hard:c.Gb,soft:b.hc,x:-48,y:-64},{hard:c.Gb,soft:b.hc,x:-72,y:-128},{hard:c.Gb,soft:b.hc,x:-96,y:-64},{hard:c.Gb,soft:b.hc,x:-120,y:-128},{hard:c.Gb,soft:b.hc,x:-144,y:-64},{hard:c.Gb,soft:b.hc,x:-168,y:-128}],"reika1-right":[{hard:c.Gb,soft:b.hc,x:528,y:-64},
{hard:c.Gb,soft:b.hc,x:552,y:-128},{hard:c.Gb,soft:b.hc,x:576,y:-64},{hard:c.Gb,soft:b.hc,x:600,y:-128},{hard:c.Gb,soft:b.hc,x:624,y:-64},{hard:c.Gb,soft:b.hc,x:648,y:-128}],"madoka-0":[{hard:c.Tc,soft:b.Tc,x:144,y:-128}],"madoka-1":[{hard:c.Tc,soft:b.Tc,x:336,y:-128}],"madoka-2":[{hard:c.Tc,soft:b.Tc,x:240,y:-128}],"miyuki-1":[{hard:c.Pd,soft:b.Pd,x:-256,y:140}],"miyuki-2":[{hard:c.Pd,soft:b.Pd,x:736,y:60}],alice:[{hard:c.eg,soft:b.eg,x:240,y:-64}],erika:[{hard:c.ze,soft:b.ze,x:240,y:-100}],yukishiro:[{hard:c.ng,
soft:b.ng,x:240,y:-100}],misumi:[{hard:c.Bg,soft:[b.Wj,b.Cg,b.Dg],x:240,y:-100,boss:k}],mai:[{hard:c.xg,soft:b.xg,x:780,y:128}],hyuga:[{hard:c.Xj,soft:[b.Ig,b.Jg,b.Kg],x:240,y:-100,boss:k}],higashi:[{hard:c.Lg,soft:b.Lg,x:240,y:-100}],momozono:[{hard:c.Tj,soft:[b.ug,b.vg,b.wg],x:240,y:-100,boss:k}],rikka:[{hard:c.Hg,soft:b.Hg,x:240,y:-100}],mana:[{hard:c.Uj,soft:[b.yg,b.zg,b.Ag],x:240,y:-100,boss:k}],kanade:[{hard:c.Sj,soft:b.qg,x:432,y:-448}],hibiki:[{hard:c.Rj,soft:[b.kg,b.lg,b.mg],x:240,y:-200,
boss:k}]}})();(function(){function c(b,c,d,f){return a.action([f(b),a.repeat(d+"-1",[f(a.speed(c,"sequence"))])])}function b(b,c,d,f,g,j,m){return a.action([a.fire(a.direction(c,"absolute"),f,g||u,j,m),a.ma("way","Math.max(2, "+b+"-$bg*2+$ex*2)"),a.repeat("$way-1",[a.fire(a.direction("(("+d+")-("+c+"))/($way-1)","sequence"),f,g||u,j,m)])])}function f(a,b,c,f,g){return function(j){return d(a,b,c,j,f,g,i,i)}}function d(b,c,d,f,g,j,m,n){return a.action([a.fire(a.direction(c),f,g||u,j,m,n),a.ma("way","Math.max(2, "+
b+"-$bg*2+$ex*2)"),a.repeat("$way-1",[a.fire(a.direction("(("+d+")-("+c+"))/($way-1)","sequence"),f,g||u,j,m,n)])])}function j(b){return a.fire(a.direction(0),b||n,C)}function p(b){return a.fire(a.direction(0),b||n,u)}function s(b){return a.speed("($rank - $bg*0.05 + $ex*0.2)*1.5 + 2.00 + ("+(b===i?0:b)+"*0.1)")}function A(b){return a.speed("($rank - $bg*0.05 + $ex*0.2)*1.5 + 1.70 + ("+(b===i?0:b)+"*0.1)")}function r(b){return a.speed("($rank - $bg*0.05 + $ex*0.2)*1.5 + 1.40 + ("+(b===i?0:b)+"*0.1)")}
function n(b){return a.speed("($rank - $bg*0.05 + $ex*0.2)*1.5 + 1.10 + ("+(b===i?0:b)+"*0.1)")}function q(b){return a.speed("($rank - $bg*0.05 + $ex*0.2)*1.5 + 0.80 + ("+(b===i?0:b)+"*0.1)")}function m(b){return a.speed("($rank - $bg*0.05 + $ex*0.2)*1.5 + 0.50 + ("+(b===i?0:b)+"*0.1)")}function L(b){return a.speed("($rank - $bg*0.05 + $ex*0.2)*1.5 + 0.20 + ("+(b===i?0:b)+"*0.1)")}function g(b){return a.wait(b+"*(1-$rank)*$hyperOff + $bg*20")}function P(b){return a.Ia(b,{frame:1,Ub:k})}function Q(b){return a.Ia(b,
{frame:0,Ub:k})}function O(b){return a.Ia(b,{frame:3,af:k})}function G(b){return a.Ia(b,{frame:2,af:k})}function I(b){return a.Ia(b,{frame:6,nc:k})}function E(b){return a.Ia(b,{frame:7,nc:k})}function t(b){return a.Ia(b,{visible:w})}function J(b){return a.Ia(b,{frame:4,nc:k})}function H(b){return a.Ia(b,{frame:3})}function u(b){return a.Ia(b,{frame:1})}function v(b){return a.Ia(b,{frame:2})}function C(b){return a.Ia(b,{frame:0})}function F(b){return a.Ia(b,{frame:3,nc:k})}function B(b){return a.Ia(b,
{frame:1,nc:k})}function z(b){return a.Ia(b,{frame:2,nc:k})}function D(b){return a.Ia(b,{frame:0,nc:k})}gls2.ga={};var a=M.La;gls2.ga["basic0-0"]=new M.ia({top:a.action([p])});gls2.ga["basic0-1"]=new M.ia({top:a.action([c(r,-0.01,8,f(3,-15,15))])});gls2.ga["basic1-0"]=new M.ia({top:a.action([a.repeat(999,[g(40),p(n)])])});gls2.ga["basic1-1"]=new M.ia({top:a.action([a.repeat(999,[g(20),p(n)])])});gls2.ga["basic1-2"]=new M.ia({top:a.action([g("10+$rand*100"),d(3,-20,20,n)])});gls2.ga["basic1-3"]=new M.ia({top:a.action([a.repeat(999,
[g("20+$rand*80"),d(3,-20,20,n)])])});gls2.ga["basic2-0"]=new M.ia({top:a.action([a.repeat(999,[g(50),p(n)])])});gls2.ga["basic3-0"]=new M.ia({top:a.action([a.wait(20),a.repeat(999,[g(100),c(n,0.1,3,j)])])});gls2.ga["basic3-1"]=new M.ia({top:a.action([a.wait(20),a.repeat(999,[g(40),c(n,0.1,3,j)])])});gls2.ga["bukky-4-0"]=new M.ia({top0:a.action([g(30),a.repeat(999,[a.fire(a.direction(-40),n,z),a.repeat(3,[a.fire(a.direction(20,"sequence"),n,z),a.fire(a.direction(20,"sequence"),n,z),a.fire(a.direction(20,
"sequence"),n,z),a.fire(a.direction(20,"sequence"),n,z),a.fire(a.direction(-80,"sequence"),n,z),g(5)]),g(70)])]),top1:a.action([g(20),a.fire(a.direction(180,"absolute"),q,B),a.repeat(999,[a.fire(a.direction(15,"sequence"),q,B),a.fire(a.direction(15,"sequence"),q,B),a.fire(a.direction(15,"sequence"),q,B),a.fire(a.direction(15,"sequence"),q,B),a.fire(a.direction(15,"sequence"),q,B),a.fire(a.direction(15,"sequence"),q,B),a.fire(a.direction(15,"sequence"),q,B),a.fire(a.direction(15,"sequence"),q,B),a.fire(a.direction(15,
"sequence"),q,B),a.fire(a.direction(-90,"sequence"),q,B),g(5)])])});gls2.ga["bukky-5-0"]=new M.ia({top0:a.action([g(30),a.repeat(999,[a.fire(a.direction(-40),n,z),a.repeat(3,[a.fire(a.direction(10,"sequence"),n,z),a.fire(a.direction(10,"sequence"),n,z),a.fire(a.direction(10,"sequence"),n,z),a.fire(a.direction(10,"sequence"),n,z),a.fire(a.direction(10,"sequence"),n,z),a.fire(a.direction(10,"sequence"),n,z),a.fire(a.direction(10,"sequence"),n,z),a.fire(a.direction(10,"sequence"),n,z),a.fire(a.direction(-80,
"sequence"),n,z),g(5)]),g(70)])]),top1:a.action([g(20),a.fire(a.direction(180,"absolute"),q,B),a.repeat(999,[a.fire(a.direction(7.5,"sequence"),q,B),a.fire(a.direction(7.5,"sequence"),q,B),a.fire(a.direction(7.5,"sequence"),q,B),a.fire(a.direction(7.5,"sequence"),q,B),a.fire(a.direction(7.5,"sequence"),q,B),a.fire(a.direction(7.5,"sequence"),q,B),a.fire(a.direction(7.5,"sequence"),q,B),a.fire(a.direction(7.5,"sequence"),q,B),a.fire(a.direction(7.5,"sequence"),q,B),a.fire(a.direction(7.5,"sequence"),
q,B),a.fire(a.direction(7.5,"sequence"),q,B),a.fire(a.direction(7.5,"sequence"),q,B),a.fire(a.direction(7.5,"sequence"),q,B),a.fire(a.direction(7.5,"sequence"),q,B),a.fire(a.direction(7.5,"sequence"),q,B),a.fire(a.direction(7.5,"sequence"),q,B),a.fire(a.direction(7.5,"sequence"),q,B),a.fire(a.direction(7.5,"sequence"),q,B),a.fire(a.direction(-90,"sequence"),q,B),g(5)])])});gls2.ga["cannon2-0"]=new M.ia({top0:a.action([a.repeat(999,[g(20),b(4,"0-10+$loop.index*15","0+10+$loop.index*15",q),b(4,"90-10+$loop.index*15",
"90+10+$loop.index*15",q),b(4,"180-10+$loop.index*15","180+10+$loop.index*15",q),b(4,"270-10+$loop.index*15","270+10+$loop.index*15",q),g(20),b(3,"0-10+45+$loop.index*15","0+10+45+$loop.index*15",n),b(3,"90-10+45+$loop.index*15","90+10+45+$loop.index*15",n),b(3,"180-10+45+$loop.index*15","180+10+45+$loop.index*15",n),b(3,"270-10+45+$loop.index*15","270+10+45+$loop.index*15",n)])]),top1:a.action([a.repeat(999,[a.fire(a.direction("  0+$loop.index*10","absolute"),m,J),a.fire(a.direction(" 90+$loop.index*10",
"absolute"),m,J),a.fire(a.direction("180+$loop.index*10","absolute"),m,J),a.fire(a.direction("270+$loop.index*10","absolute"),m,J),a.fire(a.direction("  0-$loop.index*10","absolute"),m,J),a.fire(a.direction(" 90-$loop.index*10","absolute"),m,J),a.fire(a.direction("180-$loop.index*10","absolute"),m,J),a.fire(a.direction("270-$loop.index*10","absolute"),m,J),g(10)])]),top2:a.action([a.repeat(999,[g(43),d(30,0,348,n,C)])])});gls2.ga["cannon2-3"]=new M.ia({top0:a.action([a.repeat(999,[a.ma("d","$loop.index*-6"),
a.repeat(9,[a.fire(a.direction(36,"sequence"),a.speed(1),t(a.fa("ivs0","$d")))]),g(10),a.fire(a.direction(39,"sequence"),a.speed(1),t(a.fa("ivs0","$d")))])]),top1:a.action([a.repeat(999,[a.ma("d","($loop.index)*+12"),a.repeat(12,[a.fire(a.direction(360/13,"sequence"),a.speed(1),t(a.fa("ivs1","$d")))]),g(10),a.fire(a.direction(360/13-4,"sequence"),a.speed(1),t(a.fa("ivs1","$d")))])]),ivs0:a.action([a.wait(5),a.fire(a.direction("$1","relative"),q,C),a.wa()]),ivs1:a.action([a.wait(10),a.fire(a.direction("$1-5",
"relative"),q,E),a.fire(a.direction("$1+5","relative"),q,I),a.wa()])});gls2.ga["cannon3-0"]=new M.ia({top0:a.action([a.repeat(999,[g(80),c(q,0.01,5,f(5,-30,30,C,a.offsetX(-60))),c(q,0.01,5,f(5,-30,30,C)),c(q,0.01,5,f(5,-30,30,C,a.offsetX(60)))])])});gls2.ga["cannon4-0"]=new M.ia({top0:a.action([g(20),a.repeat(999,[a.fire(q,z),a.repeat(8,[g(10),a.ma("way","$loop.count+1"),a.fire(a.direction("-12/2 - 12*($way-2)","sequence"),q,z),a.repeat("$way-1",[a.fire(a.direction(12,"sequence"),q,z)])]),g(120)])])});
gls2.ga["cannon5-0"]=new M.ia({top0:a.action([a.repeat(999,[a.fire(a.direction(-60),s,t(a.fa("b"))),a.repeat(11,[g(5),a.fire(a.direction(10,"sequence"),s,t(a.fa("b")))]),g(60)])]),b:a.action([a.wait(5),a.Jd(a.speed(0),0),c(q,0.1,5,function(b){return a.fire(a.direction(0,"relative"),b,u)}),a.wa])});gls2.ga["yuri-4"]=new M.ia({top:a.action([g(60),a.repeat(7,[b(7,120,240,m,C),g(8)])])});gls2.ga["kurokawa-1"]=new M.ia({top0:a.action([a.repeat(999,[c(n,-0.01,4,function(b){return d(4,-45,45,b,v,a.offsetX(-45),
a.qa(k))}),c(n,-0.01,4,function(b){return d(4,-45,45,b,v,a.offsetX(45),a.qa(k))}),g(90)])]),top1:a.action([a.repeat(999,[a.fire(a.direction(0),n,F,a.offsetX(-45),a.qa(k)),g(45),a.fire(a.direction(0),n,F,a.offsetX(45),a.qa(k)),g(45)])])});gls2.ga["milk-5"]=new M.ia({top0:a.action([a.repeat(999,[d(5,-90,90,n,H,a.offsetX(-45)),a.wait(27),d(5,-90,90,n,H,a.offsetX(45)),g(120)])]),top1:a.action([a.repeat(999,[g(30),d(6,-90,90,r,z,a.offsetX(-45)),a.wait(21),d(6,-90,90,r,z,a.offsetX(45)),g(90)])]),top2:a.action([a.repeat(999,
[g(55),d(13,-90,90,m,J,a.offsetX(-45)),a.wait(20),d(13,-90,90,m,J,a.offsetX(45)),g(21)])])});gls2.ga["ako-5"]=new M.ia({top:a.action([a.repeat(8,[d(3,-20,20,r,u),g(2)])])});gls2.ga["kurokawa-4"]=new M.ia({top0:a.action([a.repeat(999,[c(n,-0.01,4,function(b){return d(4,-45,45,b,v,a.offsetX(-45),a.qa(k))}),c(n,-0.01,4,function(b){return d(4,-45,45,b,v,a.offsetX(45),a.qa(k))}),g(90)])]),top1:a.action([a.repeat(999,[a.fire(a.direction(0),n,F,a.offsetX(-45),a.qa(k)),g(45),a.fire(a.direction(0),n,F,a.offsetX(45),
a.qa(k)),g(45)])])});gls2.ga["komachi-1"]=new M.ia({top0:a.action([a.repeat(20,[a.fire(a.direction(210,"absolute"),m(1),u,a.offsetX(-40)),a.fire(a.direction(120,"sequence"),m(1),u,a.offsetX(-40)),a.fire(a.direction(120,"sequence"),m(1),u,a.offsetX(-40)),a.repeat(57,[g(8),a.fire(a.direction(-720/57,"sequence"),m(1),u,a.offsetX(-40)),a.fire(a.direction(120,"sequence"),m(1),u,a.offsetX(-40)),a.fire(a.direction(120,"sequence"),m(1),u,a.offsetX(-40))])])]),top1:a.action([a.repeat(20,[a.fire(a.direction(-210,
"absolute"),m(1),u,a.offsetX(40)),a.fire(a.direction(120,"sequence"),m(1),u,a.offsetX(40)),a.fire(a.direction(120,"sequence"),m(1),u,a.offsetX(40)),a.repeat(57,[g(8),a.fire(a.direction(720/57,"sequence"),m(1),u,a.offsetX(40)),a.fire(a.direction(120,"sequence"),m(1),u,a.offsetX(40)),a.fire(a.direction(120,"sequence"),m(1),u,a.offsetX(40))])])]),top2:a.action([a.repeat(70,[a.fire(a.direction(0),n(0),D,a.offsetX(-110),a.qa(k)),a.repeat(6,[a.wait(1),a.fire(a.direction(0,"sequence"),n(0),D,a.offsetX(-110),
a.qa(k))]),g(10),a.fire(a.direction(0),n(0),D,a.offsetX(110),a.qa(k)),a.repeat(6,[a.wait(1),a.fire(a.direction(0,"sequence"),n(0),D,a.offsetX(110),a.qa(k))]),g(10)])])});gls2.ga["komachi-2"]=new M.ia({top0:a.action([a.repeat(999,[c(n,-0.01,4,function(b){return a.action([d(4,-45,45,b,v,a.offsetX(-45),a.qa(k)),g(4)])}),c(n,-0.01,4,function(b){return a.action([g(4),d(4,-45,45,b,v,a.offsetX(45),a.qa(k))])}),g(90)])]),top1:a.action([a.repeat(999,[g(45),c(q,0.01,22,function(b){return a.action([a.repeat("1 + $rand*6",
[a.fire(a.direction("-5+$rand*10"),b,B)]),g(1)])}),g(180)])])});gls2.ga["komachi-3"]=new M.ia({top0:a.action([a.repeat(999,[c(n,-0.01,4,function(b){return a.action([d(8,-60,60,b,v,a.offsetX(-45),a.qa(k)),g(4)])}),c(n,-0.01,4,function(b){return a.action([g(4),d(8,-60,60,b,v,a.offsetX(45),a.qa(k))])}),g(90)])]),top1:a.action([a.repeat(999,[g(45),c(q,0.01,22,function(b){return a.action([a.repeat("1 + $rand*6",[a.fire(a.direction("-5+$rand*10"),b,B)]),g(1)])}),g(180)])])});gls2.ga["komachi-4"]=new M.ia({top0:a.action([a.repeat(999,
[a.repeat(4,[a.fire(a.direction("220+-1+$rand*2","absolute"),n,H,a.offsetX(-45)),a.fire(a.direction("180+-1+$rand*2","absolute"),n,H,a.offsetX(-45)),a.fire(a.direction("180+-1+$rand*2","absolute"),n,H,a.offsetX(45)),a.fire(a.direction("140+-1+$rand*2","absolute"),n,H,a.offsetX(45)),g(4)]),g(60)])]),top1:a.action([a.repeat(70,[a.fire(a.direction(0),n(5),D,a.offsetX(-110),a.qa(k)),a.repeat(12,[a.wait(1),a.fire(a.direction(0,"sequence"),n(5),D,a.offsetX(-110),a.qa(k))]),g(30),a.fire(a.direction(0),n(5),
D,a.offsetX(110),a.qa(k)),a.repeat(12,[a.wait(1),a.fire(a.direction(0,"sequence"),n(5),D,a.offsetX(110),a.qa(k))]),g(30)])])});gls2.ga["komachi-5"]=new M.ia({top0:a.action([a.repeat(999,[a.fire(a.direction(210,"absolute"),m(1),u,a.offsetX(-40)),a.fire(a.direction(120,"sequence"),m(1),u,a.offsetX(-40)),a.fire(a.direction(120,"sequence"),m(1),u,a.offsetX(-40)),a.repeat(60,[g(4),a.fire(a.direction(-6,"sequence"),m(1),u,a.offsetX(-40)),a.fire(a.direction(120,"sequence"),m(1),u,a.offsetX(-40)),a.fire(a.direction(120,
"sequence"),m(1),u,a.offsetX(-40))])])]),top1:a.action([a.repeat(999,[a.fire(a.direction(-210,"absolute"),m(1),u,a.offsetX(40)),a.fire(a.direction(120,"sequence"),m(1),u,a.offsetX(40)),a.fire(a.direction(120,"sequence"),m(1),u,a.offsetX(40)),a.repeat(60,[g(4),a.fire(a.direction(6,"sequence"),m(1),u,a.offsetX(40)),a.fire(a.direction(120,"sequence"),m(1),u,a.offsetX(40)),a.fire(a.direction(120,"sequence"),m(1),u,a.offsetX(40))])])]),top2:a.action([a.repeat(999,[a.fire(a.direction(-10),r(0),D,a.offsetX(-110),
a.qa(k)),a.fire(a.direction(10,"sequence"),r(0),D,a.offsetX(-110),a.qa(k)),a.fire(a.direction(10,"sequence"),r(0),D,a.offsetX(-110),a.qa(k)),a.repeat(30,[a.wait(1),a.fire(a.direction(-20,"sequence"),r(0),D,a.offsetX(-110),a.qa(k)),a.fire(a.direction(10,"sequence"),r(0),D,a.offsetX(-110),a.qa(k)),a.fire(a.direction(10,"sequence"),r(0),D,a.offsetX(-110),a.qa(k))]),g(5),a.fire(a.direction(-10),r(0),D,a.offsetX(110),a.qa(k)),a.fire(a.direction(10,"sequence"),r(0),D,a.offsetX(110),a.qa(k)),a.fire(a.direction(10,
"sequence"),r(0),D,a.offsetX(110),a.qa(k)),a.repeat(30,[a.wait(1),a.fire(a.direction(-20,"sequence"),r(0),D,a.offsetX(110),a.qa(k)),a.fire(a.direction(10,"sequence"),r(0),D,a.offsetX(110),a.qa(k)),a.fire(a.direction(10,"sequence"),r(0),D,a.offsetX(110),a.qa(k))]),g(5)])])});gls2.ga["nozomi-4"]=new M.ia({top0:a.action([a.wait(60),a.repeat(999,[a.repeat(12,[a.ma("c","2+$loop.index"),d("$c","-4-($c-2)*4","4+($c-2)*4",L("(560-$c*40)*0.03"),F,a.offsetY(-50))]),g(150)])]),top1:a.action([a.wait(20),a.repeat(999,
[a.fire(a.direction(40),t(a.fa("noop"))),c(n,0.03,16,function(b){return a.action([a.fire(a.direction(-5,"sequence"),b,C,a.offsetX(-50)),a.wait(3)])}),g(90),a.fire(a.direction(-40),t(a.fa("noop"))),c(n,0.03,16,function(b){return a.action([a.fire(a.direction(5,"sequence"),b,C,a.offsetX(50)),a.wait(3)])}),g(90)])]),noop:a.action([a.wait(1),a.wa])});gls2.ga["nozomi-5"]=new M.ia({top0:a.action([a.wait(60),a.repeat(999,[a.repeat(6,[a.ma("c","2+$loop.index"),d("$c","-4-($c-2)*2-60","4+($c-2)*2-60",L("(560-$c*40)*0.02"),
F,a.offsetY(-50)),d("$c","-4-($c-2)*2-20","4+($c-2)*2-20",L("(560-$c*40)*0.02"),F,a.offsetY(-50)),d("$c","-4-($c-2)*2+20","4+($c-2)*2+20",L("(560-$c*40)*0.02"),F,a.offsetY(-50)),d("$c","-4-($c-2)*2+60","4+($c-2)*2+60",L("(560-$c*40)*0.02"),F,a.offsetY(-50))]),g(150),a.repeat(6,[a.ma("c","2+$loop.index"),d("$c","-4-($c-2)*2-80","4+($c-2)*2-80",L("(560-$c*40)*0.02"),z,a.offsetY(-50)),d("$c","-4-($c-2)*2-40","4+($c-2)*2-40",L("(560-$c*40)*0.02"),z,a.offsetY(-50)),d("$c","-4-($c-2)*2+ 0","4+($c-2)*2+ 0",
L("(560-$c*40)*0.02"),z,a.offsetY(-50)),d("$c","-4-($c-2)*2+40","4+($c-2)*2+40",L("(560-$c*40)*0.02"),z,a.offsetY(-50)),d("$c","-4-($c-2)*2+80","4+($c-2)*2+80",L("(560-$c*40)*0.02"),z,a.offsetY(-50))]),g(150)])]),top1:a.action([a.repeat(999,[a.wait(20),a.fire(a.direction(5),t(a.fa("noop"))),c(q(1.5),0.05,15,function(b){return a.action([a.fire(a.direction(-1,"sequence"),b,C,a.offsetX(-50)),g(3)])}),a.wait(20),a.fire(a.direction(-5),t(a.fa("noop"))),c(q(1.5),0.05,15,function(b){return a.action([a.fire(a.direction(1,
"sequence"),b,C,a.offsetX(50)),g(3)])})])]),noop:a.action([a.wait(1),a.wa])});gls2.ga["mktn-5"]=new M.ia({top0:a.action([a.repeat(999,[a.fire(a.direction(0),m,t(a.fa("noop"))),a.repeat(20,[a.fire(a.direction(0.5,"sequence"),a.speed(0.08,"sequence"),v),a.repeat(12,[a.fire(a.direction(30,"sequence"),a.speed(0,"sequence"),v)]),g(6)]),a.fire(a.direction(0),m,t(a.fa("noop"))),a.repeat(20,[a.fire(a.direction(-0.5,"sequence"),a.speed(0.08,"sequence"),v),a.repeat(12,[a.fire(a.direction(30,"sequence"),a.speed(0,
"sequence"),v)]),g(6)]),g(60)])]),top1:a.action([a.repeat(999,[a.fire(a.direction(0,"absolute"),n,t(a.fa("noop"))),a.repeat(5,[a.fire(a.direction(-10,"sequence"),a.speed(0.05,"sequence"),J),a.repeat(12,[a.fire(a.direction(30,"sequence"),a.speed(0,"sequence"),J)]),g(5)]),a.fire(a.direction(0,"absolute"),n,t(a.fa("noop"))),a.repeat(5,[a.fire(a.direction(10,"sequence"),a.speed(0.05,"sequence"),J),a.repeat(12,[a.fire(a.direction(30,"sequence"),a.speed(0,"sequence"),J)]),g(5)]),g(40)])]),top2:a.action([a.repeat(999,
[a.ma("gun","[-120, -40, 120, 0, -80, 40, 80][$loop.index%7]"),d(5,-30,30,n(7),G,a.offsetX("$gun"),a.offsetY(20)),a.ma("gun","[-40, -120, 0, 120, 80, 40, -80][$loop.index%7]"),d(5,-30,30,n(7),G,a.offsetX("$gun"),a.offsetY(20)),g(21)])]),noop:a.action([a.wait(1),a.wa])});gls2.ga.akane=new M.ia({top:a.action([a.wait("40"),a.repeat(999,[a.repeat(5,[g(60),d(1,1,1,m,v,a.offsetX(-16),a.offsetY(6),a.qa(k)),d(1,1,1,m,v,a.offsetX(16),a.offsetY(6),a.qa(k))]),g(120)])])});gls2.ga["nao-1"]=new M.ia({top:a.action([a.repeat(999,
[g(30),a.fire(a.direction(0),r,F)])])});gls2.ga["nao-2"]=new M.ia({top:a.action([a.repeat(999,[g(30),d(2,-5,5,r,F,a.offsetX(0),a.offsetY(0),a.qa(k))])])});gls2.ga["nao-3"]=new M.ia({top:a.action([a.repeat(999,[g(30),d(2,-1,1,r,F,a.offsetX(0),a.offsetY(0),a.qa(k))])])});gls2.ga.reika=new M.ia({top:a.action([a.repeat(999,[g(60),a.fire(a.direction(0),n,z)])])});gls2.ga.aguri=new M.ia({top0:a.action([a.repeat(999,[a.repeat(3,[c(n,0.001,4,function(b){return a.action([d(3,-30,30,b,z,a.offsetX(-32),a.offsetY(-20)),
d(2,-30,30,b,z,a.offsetX(-120),a.offsetY(10)),d(2,-30,30,b,z,a.offsetX(-80),a.offsetY(12)),d(3,-30,30,b,z,a.offsetX(32),a.offsetY(-20)),d(2,-30,30,b,z,a.offsetX(120),a.offsetY(10)),d(2,-30,30,b,z,a.offsetX(80),a.offsetY(12)),a.wait(1)])}),g(10)]),g(120)])]),top1:a.action([a.repeat(999,[a.repeat(3,[d(3,-15,15,r,B,a.offsetX(0),a.offsetY(0)),d(3,-15,15,r,B,a.offsetX(0),a.offsetY(30)),d(3,-15,15,r,B,a.offsetX(-10),a.offsetY(-10)),d(3,-15,15,r,B,a.offsetX(-20),a.offsetY(0)),d(3,-15,15,r,B,a.offsetX(-20),
a.offsetY(10)),d(3,-15,15,r,B,a.offsetX(-10),a.offsetY(20)),d(3,-15,15,r,B,a.offsetX(10),a.offsetY(-10)),d(3,-15,15,r,B,a.offsetX(20),a.offsetY(0)),d(3,-15,15,r,B,a.offsetX(20),a.offsetY(10)),d(3,-15,15,r,B,a.offsetX(10),a.offsetY(20)),g(40)]),g(180)])])});gls2.ga.miyuki=new M.ia({top0:a.action([a.wait(300),a.repeat(10,[a.fire(a.direction(210,"absolute"),n,P,a.offsetX(-64),a.offsetY(32)),g(2),a.fire(a.direction(200,"absolute"),n,P,a.offsetX(-64),a.offsetY(32)),g(2),a.fire(a.direction(190,"absolute"),
n,P,a.offsetX(-32),a.offsetY(32)),g(2),a.fire(a.direction(180,"absolute"),n,P,a.offsetX(0),a.offsetY(32)),g(2),a.fire(a.direction(170,"absolute"),n,P,a.offsetX(32),a.offsetY(32)),g(2),a.fire(a.direction(160,"absolute"),n,P,a.offsetX(64),a.offsetY(32)),g(2),a.fire(a.direction(150,"absolute"),n,P,a.offsetX(64),a.offsetY(32)),g(180)])]),top1:a.action([a.wait("40"),a.repeat(999,[g(30),d(3,-45,45,m,I,a.offsetX(-64),a.offsetY(16)),d(3,-45,45,m,I,a.offsetX(0),a.offsetY(16)),d(3,-45,45,m,I,a.offsetX(16),
a.offsetY(16)),d(3,-45,45,m,I,a.offsetX(32),a.offsetY(16)),c(m,0.001,5,function(b){return a.action([d(3,"-45","+45",b,I,a.offsetX(0),a.offsetY(0))])})])])});gls2.ga.alice=new M.ia({top0:a.action([a.fire(a.direction(0),m,C,a.offsetX(0),a.qa(k)),a.repeat(999,[a.fire(a.direction(7,"sequence"),m,I,a.offsetX(0),a.offsetY(-16)),a.fire(a.direction(90,"sequence"),m,I,a.offsetX(0),a.offsetY(-16)),a.fire(a.direction(90,"sequence"),m,I,a.offsetX(0),a.offsetY(-16)),a.fire(a.direction(90,"sequence"),m,I,a.offsetX(0),
a.offsetY(-16)),g(10)])]),top1:a.action([a.fire(a.direction(0),m,C,a.offsetX(0),a.qa(k)),a.repeat(999,[a.fire(a.direction(11,"sequence"),m,E,a.offsetX(0),a.offsetY(-16)),a.fire(a.direction(90,"sequence"),m,E,a.offsetX(0),a.offsetY(-16)),a.fire(a.direction(90,"sequence"),m,E,a.offsetX(0),a.offsetY(-16)),a.fire(a.direction(90,"sequence"),m,E,a.offsetX(0),a.offsetY(-16)),g(10)])]),top2:a.action([a.fire(a.direction(0),m,C,a.offsetX(0),a.qa(k)),a.repeat(999,[a.fire(a.direction(17,"sequence"),m,I,a.offsetX(0),
a.offsetY(-16)),a.fire(a.direction(90,"sequence"),m,I,a.offsetX(0),a.offsetY(-16)),a.fire(a.direction(90,"sequence"),m,I,a.offsetX(0),a.offsetY(-16)),a.fire(a.direction(90,"sequence"),m,I,a.offsetX(0),a.offsetY(-16)),g(10)])]),top3:a.action([a.fire(a.direction(0),m,C,a.offsetX(0),a.qa(k)),a.repeat(999,[a.fire(a.direction(-11,"sequence"),m,I,a.offsetX(0),a.offsetY(-16)),a.fire(a.direction(90,"sequence"),m,I,a.offsetX(0),a.offsetY(-16)),a.fire(a.direction(90,"sequence"),m,I,a.offsetX(0),a.offsetY(-16)),
a.fire(a.direction(90,"sequence"),m,I,a.offsetX(0),a.offsetY(-16)),g(10)])]),top4:a.action([a.fire(a.direction(0),m,C,a.offsetX(0),a.qa(k)),a.repeat(999,[a.fire(a.direction(-9,"sequence"),m,E,a.offsetX(0),a.offsetY(-16)),a.fire(a.direction(90,"sequence"),m,E,a.offsetX(0),a.offsetY(-16)),a.fire(a.direction(90,"sequence"),m,E,a.offsetX(0),a.offsetY(-16)),a.fire(a.direction(90,"sequence"),m,E,a.offsetX(0),a.offsetY(-16)),g(10)])]),top4:a.action([a.fire(a.direction(0),m,C,a.offsetX(0),a.qa(k)),a.repeat(999,
[a.fire(a.direction(-5,"sequence"),m,E,a.offsetX(0),a.offsetY(-16)),a.fire(a.direction(90,"sequence"),m,E,a.offsetX(0),a.offsetY(-16)),a.fire(a.direction(90,"sequence"),m,E,a.offsetX(0),a.offsetY(-16)),a.fire(a.direction(90,"sequence"),m,E,a.offsetX(0),a.offsetY(-16)),g(10)])])});gls2.ga["aliceLeaf-1"]=new M.ia({top0:a.action([a.repeat(999,[a.repeat(1,[d(3,-10,10,r,B,a.offsetX(0),a.offsetY(0)),d(3,-10,10,r,D,a.offsetX(10),a.offsetY(-10)),d(3,-10,10,r,D,a.offsetX(10),a.offsetY(-20)),d(3,-10,10,r,D,
a.offsetX(20),a.offsetY(-10)),d(3,-10,10,r,D,a.offsetX(10),a.offsetY(10)),d(3,-10,10,r,D,a.offsetX(10),a.offsetY(20)),d(3,-10,10,r,D,a.offsetX(20),a.offsetY(10)),d(3,-10,10,r,D,a.offsetX(-10),a.offsetY(-10)),d(3,-10,10,r,D,a.offsetX(-10),a.offsetY(-20)),d(3,-10,10,r,D,a.offsetX(-20),a.offsetY(-10)),d(3,-10,10,r,D,a.offsetX(-10),a.offsetY(10)),d(3,-10,10,r,D,a.offsetX(-10),a.offsetY(20)),d(3,-10,10,r,D,a.offsetX(-20),a.offsetY(10)),g(20)]),g(60)])])});gls2.ga["aliceLeaf-2"]=new M.ia({top0:a.action([a.wait(30),
a.repeat(999,[a.repeat(1,[d(3,-10,10,r,D,a.offsetX(0),a.offsetY(0)),d(3,-10,10,r,B,a.offsetX(10),a.offsetY(-10)),d(3,-10,10,r,B,a.offsetX(10),a.offsetY(-20)),d(3,-10,10,r,B,a.offsetX(20),a.offsetY(-10)),d(3,-10,10,r,B,a.offsetX(10),a.offsetY(10)),d(3,-10,10,r,B,a.offsetX(10),a.offsetY(20)),d(3,-10,10,r,B,a.offsetX(20),a.offsetY(10)),d(3,-10,10,r,B,a.offsetX(-10),a.offsetY(-10)),d(3,-10,10,r,B,a.offsetX(-10),a.offsetY(-20)),d(3,-10,10,r,B,a.offsetX(-20),a.offsetY(-10)),d(3,-10,10,r,B,a.offsetX(-10),
a.offsetY(10)),d(3,-10,10,r,B,a.offsetX(-10),a.offsetY(20)),d(3,-10,10,r,B,a.offsetX(-20),a.offsetY(10)),g(20)]),g(60)])])});gls2.ga["honoka-1"]=new M.ia({top0:a.action([a.wait(60),a.repeat(10,[d(4,-40,40,q,J,a.offsetX(0),a.offsetY(30)),g(30),d(5,-40,40,m,J,a.offsetX(0),a.offsetY(30)),g(30)])]),top1:a.action([a.wait(60),a.repeat(5,[d(2,-2,2,q(0.6),u),d(3,-3,3,q(1),u),d(4,-4,4,q(1.4),u),d(5,-5,5,q(1.8),u),g(110)])]),top2:a.action([a.repeat(20,[b(12,-10,-170,m,D,a.offsetX(-110),a.offsetY(-70)),g(30)])]),
top3:a.action([a.repeat(20,[b(12,10,170,m,D,a.offsetX(110),a.offsetY(-70)),g(30)])])});gls2.ga["nagisa-1-1"]=new M.ia({top0:a.action([g(90),a.repeat(3,[a.ma("way","5 + $loop.index*6"),c(n,0.01,"3 + $loop.index*2",function(b){return a.action([d("$way",-110,110,b,u,a.offsetX(-190),a.offsetY(-20)),d("$way",-110,110,b,u,a.offsetX(190),a.offsetY(-20)),a.wait(10)])}),g(60)]),g(60)])});gls2.ga["nagisa-1-2"]=new M.ia({top0:a.action([a.repeat(12,[d(15,-90,90,m,u),g(40)])]),top1:a.action([a.repeat(3,[a.repeat(3,
[d(5,-65,-55,q,D,a.offsetX(-190),a.offsetY(-20)),d(5,-35,-25,q,D,a.offsetX(-190),a.offsetY(-20)),d(5,-5,5,q,D,a.offsetX(-190),a.offsetY(-20)),d(5,25,35,q,D,a.offsetX(-190),a.offsetY(-20)),d(5,55,65,q,D,a.offsetX(-190),a.offsetY(-20)),a.wait(2)]),g(60),a.repeat(3,[d(5,-65,-55,q,D,a.offsetX(190),a.offsetY(-20)),d(5,-35,-25,q,D,a.offsetX(190),a.offsetY(-20)),d(5,-5,5,q,D,a.offsetX(190),a.offsetY(-20)),d(5,25,35,q,D,a.offsetX(190),a.offsetY(-20)),d(5,55,65,q,D,a.offsetX(190),a.offsetY(-20)),a.wait(2)]),
g(60)])])});gls2.ga["nagisa-1-3"]=new M.ia({top0:a.action([g(60),a.repeat(3,[a.fire(a.direction(-60),q,v,a.offsetX(-190),a.offsetY(-20)),a.repeat(20,[g(15),a.fire(a.direction(6,"sequence"),q,v,a.offsetX(-190),a.offsetY(-20))])])]),top1:a.action([g(80),a.repeat(3,[a.fire(a.direction(60),q,v,a.offsetX(190),a.offsetY(-20)),a.repeat(20,[g(15),a.fire(a.direction(-6,"sequence"),q,v,a.offsetX(190),a.offsetY(-20))])])]),top2:a.action([a.repeat(6,[a.repeat(3,[d(5,-60,-40,q,J,a.offsetX(-190),a.offsetY(-20)),
d(5,-20,-10,q,J,a.offsetX(-190),a.offsetY(-20)),d(5,10,20,q,J,a.offsetX(-190),a.offsetY(-20)),d(5,40,60,q,J,a.offsetX(-190),a.offsetY(-20)),a.wait(4)]),g(60),a.repeat(3,[d(5,-60,-40,q,J,a.offsetX(190),a.offsetY(-20)),d(5,-20,-10,q,J,a.offsetX(190),a.offsetY(-20)),d(5,10,20,q,J,a.offsetX(190),a.offsetY(-20)),d(5,40,60,q,J,a.offsetX(190),a.offsetY(-20)),a.wait(4)]),g(60)])])});gls2.ga["nagisa-2-1"]=new M.ia({top0:a.action([g(120),a.repeat(36,[b(6,"+$loop.index*10","+$loop.index*10 + 360",m,C,a.offsetX(-190),
a.offsetY(-20)),b(6,"-$loop.index*10","-$loop.index*10 + 360",m,C,a.offsetX(190),a.offsetY(-20)),g(10)])]),top1:a.action([g(120),a.repeat(30,[b(3,"+$loop.index*10","+$loop.index * 10 + 360",q,F),b(3,"-$loop.index*14","-$loop.index * 14 + 360",q,F),g(12)])])});gls2.ga["nagisa-2-2"]=new M.ia({top0:a.action([g(120),a.repeat(30,[b(4,"+$loop.index*5","+$loop.index*5 + 270",n,F),g(12)])]),top1:a.action([g(120),a.repeat(6,[b(9,150,130,m(0.8),u),b(9,172,188,m(0.8),u),b(9,210,230,m(0.8),u),g(50),b(9,170,150,
m(0.8),u),b(9,190,210,m(0.8),u),g(50)])])});gls2.ga["nagisa-2-3"]=new M.ia({top:a.action([g(120),a.repeat(12,[b(23,0,360,m,J,a.offsetX(-190),a.offsetY(-20)),b(23,0,360,m,J),b(23,0,360,m,J,a.offsetX(190),a.offsetY(-20)),g(30)])])});gls2.ga["nagisa-3-1"]=new M.ia({top0:a.action([g(50),a.repeat(999,[c(n,0.001,5,function(b){return a.action([d(41,"-180","+180",b,z,a.offsetX(-190),a.offsetY(-20)),d(41,"-180","+180",b,z,a.offsetX(190),a.offsetY(-20))])}),g(50)])]),top1:a.action([a.repeat(999,[d(2,-2,0,r,
u),g(10),d(2,0,2,r,u),g(150)])])});gls2.ga["mai-1"]=new M.ia({top0:a.action([g(50),a.repeat(50,[a.ma("from","+Math.cos($loop.index*0.15)*40-170"),b(3,"$from","$from+60",s,t(a.action([a.wait(8),a.fire(a.direction(0,"relative"),q,C),a.wa]))),a.ma("from","-Math.cos($loop.index*0.15)*40-10"),b(3,"$from","$from-60",s,t(a.action([a.wait(8),a.fire(a.direction(0,"relative"),q,C),a.wa]))),g(8)])]),top1:a.action([g(50),a.repeat(12,[b(5,-50,50,s,t(a.action([a.wait(8),a.fire(a.direction(0,"relative"),q,F),a.wa]))),
b(5,-230,-130,s,t(a.action([a.wait(8),a.fire(a.direction(0,"relative"),q,F),a.wa]))),g(16),b(6,-50,50,s,t(a.action([a.wait(8),a.fire(a.direction(0,"relative"),q,F),a.wa]))),b(6,-230,-130,s,t(a.action([a.wait(8),a.fire(a.direction(0,"relative"),q,F),a.wa]))),g(16)])])});gls2.ga["mai-2"]=new M.ia({top:a.action([g(50),a.repeat(15,[a.fire(a.direction(-10),z(a.fa("fireChild","$loop.index*10"))),g(8)])]),fireChild:a.action([g("40+$1"),c(q,0.1,5,function(b){return a.fire(a.direction(-90,"absolute"),b,v)}),
a.wa])});gls2.ga["saki-1-1"]=new M.ia({top:a.action([g(100),a.repeat(3,[a.fa("oneround","9 + $loop.index * 4","$loop.index > 0 ? 0 : 1")])]),oneround:a.action([a.ma("way","$1"),a.repeat("10",[d("$way","3 * $loop.index*+1","3 * $loop.index*+1 + 360",n,C),d("$way","3 * $loop.index*-1","3 * $loop.index*-1 + 360",n,C),g(12)]),a.repeat("$2",[d(9,-20,20,r,H)])])});gls2.ga["saki-1-2"]=new M.ia({top:a.action([g(100),a.repeat(5,[a.ma("way","5+$loop.index*2"),a.repeat(6,[a.ma("s","$loop.index*0.6"),a.action(function(){for(var b=
[],c=0;5>c;c++)b.push(d("$way",-30,30,n("$s"),F,a.offsetX(-120+60*c)));return b}())]),g(90)])])});gls2.ga["saki-1-3"]=new M.ia({top:a.action([a.ma("dir","$rand < 0.5 ? -1 : 1"),a.repeat(24,[a.fire(a.direction("120*$dir + $loop.index*10*-$dir"),a.speed(2),F(a.fa("seed"))),g(8)]),g(60)]),seed:a.action([a.wait(10),a.Jd(a.speed(0),50),a.wait(90),d(13,0,360-360/13,q,H),a.wa])});gls2.ga["saki-2-1"]=new M.ia({top0:a.action([g(100),a.repeat(4,[d(60,"$loop.index*+5+0","$loop.index*+5+360 - 360/60",q,C,a.offsetX(-40)),
d(60,"$loop.index*-5+0","$loop.index*-5+360 - 360/60",q,C,a.offsetX(40)),g(60),d(59,"$loop.index*+5+0","$loop.index*+5+360 - 360/59",q,C,a.offsetX(-40)),d(59,"$loop.index*-5+0","$loop.index*-5+360 - 360/59",q,C,a.offsetX(40)),g(60)])]),top1:a.action([g(100),a.repeat(4,[a.repeat(7,[a.ma("o","$loop.index*20 - 60"),a.fire(a.direction("$o"),A,H),a.repeat(4,[a.ma("w","$loop.count"),d("$w+1","$w*-0.6 + $o","$w*+0.6 + $o",A("$w*-1.0"),H)])]),g(120)])])});gls2.ga["saki-2-2"]=new M.ia({top:a.action([g(60),
a.ma("dir","$rand < 0.5 ? -1 : 1"),a.repeat(12,[a.fire(a.direction("120*$dir + $loop.index*10*-$dir"),a.speed(2),z(a.fa("seed"))),g(8),a.fire(a.direction("120*-$dir + $loop.index*10*$dir"),a.speed(2),z(a.fa("seed"))),g(8)]),g(60)]),seed:a.action([a.wait(10),a.Jd(a.speed(0),"10 + $rand*15"),a.wait(65),c(n,0.14,6,function(b){return a.action([a.fire(a.direction(-48),b,v)])}),c(n,0.14,6,function(b){return a.action([a.fire(a.direction(-36),b,v)])}),c(n,0.14,6,function(b){return a.action([a.fire(a.direction(-24),
b,v)])}),c(n,0.14,6,function(b){return a.action([a.fire(a.direction(-12),b,v)])}),c(n,0.14,6,function(b){return a.action([a.fire(a.direction(0),b,v)])}),c(n,0.14,6,function(b){return a.action([a.fire(a.direction(12),b,v)])}),c(n,0.14,6,function(b){return a.action([a.fire(a.direction(24),b,v)])}),c(n,0.14,6,function(b){return a.action([a.fire(a.direction(36),b,v)])}),c(n,0.14,6,function(b){return a.action([a.fire(a.direction(48),b,v)])}),g(2),a.wa])});gls2.ga["saki-2-3"]=new M.ia({top:a.action([g(60),
a.ma("dir","$rand < 0.5 ? -1 : 1"),a.repeat(24,[a.fire(a.direction("120*$dir + $loop.index*10*-$dir"),a.speed(2),F(a.fa("seed"))),g(8),a.fire(a.direction("120*-$dir + $loop.index*10*$dir"),a.speed(2),F(a.fa("seed"))),g(8)]),g(60)]),seed:a.action([a.wait(10),a.Jd(a.speed(0),"10 + $rand*20"),a.wait(65),c(n,0.18,7,function(b){return a.action([a.fire(a.direction(180,"absolute"),b,H)])}),g(2),a.wa])});gls2.ga["saki-3-1"]=new M.ia({top:a.action([a.fire(a.direction(180,"absolute"),L,z(a.fa("seed"))),g(60),
a.fire(a.direction(180,"absolute"),L,z(a.fa("seed")),a.offsetX(-80)),a.fire(a.direction(180,"absolute"),L,z(a.fa("seed")),a.offsetX(80)),g(60)]),seed:a.action([a.fire(a.direction(0,"absolute"),n,q,C),a.repeat(999,[a.fire(a.direction(90,"sequence"),q,C),a.fire(a.direction(90,"sequence"),q,C),a.fire(a.direction(90,"sequence"),q,C),g(10),a.fire(a.direction(100,"sequence"),q,C)])])});gls2.ga["saki-3-2"]=new M.ia({top:a.action([a.fire(a.direction(180,"absolute"),L,F(a.fa("seed"))),g(60),a.fire(a.direction(180,
"absolute"),L,F(a.fa("seed")),a.offsetX(-80)),a.fire(a.direction(180,"absolute"),L,F(a.fa("seed")),a.offsetX(80)),g(60)]),seed:a.action([a.fire(a.direction(0,"absolute"),n,q,u),a.repeat(999,[a.fire(a.direction(90,"sequence"),q,u),a.fire(a.direction(90,"sequence"),q,u),a.fire(a.direction(90,"sequence"),q,u),g(10),a.fire(a.direction(80,"sequence"),q,u)])])});gls2.ga["rikka-1"]=new M.ia({top:a.action([a.repeat(5,[a.ma("s","$loop.index*1.5"),g(30),d(41,180/41/2+-180,180-180/41/2+0,v,n("$s"),a.offsetX(-90),
a.offsetY(-20)),d(41,180/41/2+-180,180-180/41/2+0,v,n("$s"),a.offsetX(90),a.offsetY(-20)),g(3),d(41,-180+180/41/2-1,180-180/41/2-1,v,n("$s"),a.offsetX(-90),a.offsetY(-20)),d(41,180/41/2+-179,180-180/41/2+1,v,n("$s"),a.offsetX(-90),a.offsetY(-20)),d(41,-180+180/41/2-1,180-180/41/2-1,v,n("$s"),a.offsetX(90),a.offsetY(-20)),d(41,180/41/2+-179,180-180/41/2+1,v,n("$s"),a.offsetX(90),a.offsetY(-20)),g(3),d(41,180/41/2+-180,180-180/41/2+0,v,n("$s"),a.offsetX(-90),a.offsetY(-20)),d(41,180/41/2+-180,180-180/
41/2+0,v,n("$s"),a.offsetX(90),a.offsetY(-20))])])});gls2.ga["rikka-2"]=new M.ia({top0:a.action([a.repeat(10,[a.fire(z(a.fa("snow")),a.offsetX(-90),a.offsetY(-20)),a.fire(z(a.fa("snow")),a.offsetX(90),a.offsetY(-20)),g(8)]),g(10)]),top1:a.action([a.repeat(35,[a.ma("dir","$loop.index*-20"),a.ma("spd","($loop.index+1)*0.2"),a.repeat(5,[a.fire(a.direction(60,"sequence"),a.speed(1),t(a.fa("ivs1","$dir","$spd")))]),g(5),a.fire(a.direction("360/6 + 30","sequence"),a.speed(1),t(a.fa("ivs1","$dir","$spd")))]),
a.repeat(35,[a.ma("dir","$loop.index*+20"),a.ma("spd","($loop.index+1)*0.2"),a.repeat(5,[a.fire(a.direction(60,"sequence"),a.speed(1),t(a.fa("ivs1","$dir","$spd")))]),g(5),a.fire(a.direction("360/6 - 30","sequence"),a.speed(1),t(a.fa("ivs1","$dir","$spd")))])]),snow:a.action([a.repeat("3+$ex*3",[a.ma("s","$loop.index+1"),a.fire(a.direction(0,"absolute"),a.speed("$s"),t(a.fa("snowArm"))),a.repeat(5,[a.fire(a.direction(60,"sequence"),a.speed("$s"),t(a.fa("snowArm")))])]),a.wa]),snowArm:a.action([a.wait(2),
a.fire(a.direction(0),r,D),a.wa]),ivs1:a.action([a.wait(10),a.fire(a.direction("$1-1","relative"),n("$2"),G),a.fire(a.direction("$1+1","relative"),n("$2"),G),a.wa()])});gls2.ga["rikka-3"]=new M.ia({top0:a.action([g(40),a.fire(a.direction(-10),t(a.fa("dummy")),a.offsetX(-90),a.offsetY(-20)),a.repeat(12,[a.fire(a.direction(10,"sequence"),L("$loop.index*0.5"),v,a.offsetX(-90),a.offsetY(-20)),a.repeat(5,[a.fire(a.direction(60,"sequence"),a.speed(0,"sequence"),v,a.offsetX(-90),a.offsetY(-20))]),g(5)]),
g(40)]),top1:a.action([g(40),a.fire(a.direction(-10),t(a.fa("dummy")),a.offsetX(90),a.offsetY(-20)),a.repeat(12,[a.fire(a.direction(10,"sequence"),L("$loop.index*0.5"),v,a.offsetX(90),a.offsetY(-20)),a.repeat(5,[a.fire(a.direction(60,"sequence"),a.speed(0,"sequence"),v,a.offsetX(90),a.offsetY(-20))]),g(5)]),g(40)]),dummy:a.action([a.wait(1),a.wa])});gls2.ga["mana-1-1"]=new M.ia({top0:a.action([a.fa("winder",-1)]),top1:a.action([a.fa("winder",1)]),winder:a.action([a.wait(60),a.repeat(8,[a.fire(a.direction("(-190+$loop.index*30)*$1"),
n,O,a.offsetX("-145*$1"),a.offsetY(-5))]),a.repeat(50,[g(20),a.ma("a","$loop.index*3"),a.repeat(8,[a.fire(a.direction("(-190+$a+$loop.index*30)*$1"),n,O,a.offsetX("-145*$1"),a.offsetY(-5))])])]),top2:a.action([a.wait(60),g(300),a.repeat(7,[a.ma("s","$loop.index"),a.repeat(5,[a.ma("ss","($s-$loop.index)*0.5"),d(41,-180+360/41/2,180-360/41/2,r("$ss"),H,a.offsetX(-30),a.offsetY(-30))]),g(5),a.repeat(5,[a.ma("ss","($s-$loop.index)*0.5"),d(41,-180+360/41/2,180-360/41/2,r("$ss"),H,a.offsetX(30),a.offsetY(-30))]),
g(20),a.repeat(5,[a.ma("ss","($s-$loop.index)*0.5"),b(42,-180+360/42/2,180-360/42/2,A("$ss"),v,a.offsetX(30),a.offsetY(-30))]),g(5),a.repeat(5,[a.ma("ss","($s-$loop.index)*0.5"),b(42,-180+360/42/2,180-360/42/2,A("$ss"),v,a.offsetX(-30),a.offsetY(-30))]),g(80)])])});gls2.ga["mana-1-2"]=new M.ia({top:a.action([a.repeat(5,[a.ma("i","$loop.index"),a.ma("j","1/($i+1) * 4"),a.ma("k","6+$i*3"),c(n("$k"),0.02,"4+$loop.index*3",function(b){return a.action([a.fire(a.direction("(12-$i)*(-3*$j)"),b,v,a.offsetX(-145),
a.offsetY(-50)),a.fire(a.direction("(12-$i)*(-2*$j)"),b,v,a.offsetX(-145),a.offsetY(-50)),a.fire(a.direction("(12-$i)*(-1*$j)"),b,H,a.offsetX(-145),a.offsetY(-50)),a.fire(a.direction("(12-$i)*( 0*$j)"),b,v,a.offsetX(-145),a.offsetY(-50)),a.fire(a.direction("(12-$i)*(+1*$j)"),b,H,a.offsetX(-145),a.offsetY(-50)),a.fire(a.direction("(12-$i)*(+2*$j)"),b,v,a.offsetX(-145),a.offsetY(-50)),a.fire(a.direction("(12-$i)*(+3*$j)"),b,v,a.offsetX(-145),a.offsetY(-50)),a.fire(a.direction("(12-$i)*(-3*$j)"),b,v,
a.offsetX(145),a.offsetY(-50)),a.fire(a.direction("(12-$i)*(-2*$j)"),b,v,a.offsetX(145),a.offsetY(-50)),a.fire(a.direction("(12-$i)*(-1*$j)"),b,H,a.offsetX(145),a.offsetY(-50)),a.fire(a.direction("(12-$i)*( 0*$j)"),b,v,a.offsetX(145),a.offsetY(-50)),a.fire(a.direction("(12-$i)*(+1*$j)"),b,H,a.offsetX(145),a.offsetY(-50)),a.fire(a.direction("(12-$i)*(+2*$j)"),b,v,a.offsetX(145),a.offsetY(-50)),a.fire(a.direction("(12-$i)*(+3*$j)"),b,v,a.offsetX(145),a.offsetY(-50)),g(5)])}),g(30)])])});gls2.ga["mana-1-3"]=
new M.ia({top0:a.action([g(20),a.fa("fire",-145)]),top1:a.action([g(40),a.fa("fire",145)]),top2:a.action([a.repeat(8,[g(30),a.ma("d","-3*($rand*2-1)"),a.ma("s","$loop.index*2"),a.fire(a.direction("$d"),t(a.fa("dmy"))),a.fire(a.direction(0,"sequence"),A("$s"),O),a.repeat(5,[a.wait(5),a.ma("way","$loop.index+2"),a.fire(a.direction("-$way*0.8*0.5","sequence"),A("$s"),O),a.repeat("$way",[a.fire(a.direction(0.8,"sequence"),A("$s"),O)]),a.fire(a.direction("-$way*0.8*0.5","sequence"),t(a.fa("dmy")))])])]),
fire:a.action([a.repeat(8,[d(72,-177.5,177.5,q,v,a.offsetX("$1"),a.offsetY(-50)),g(50)])]),dmy:a.action([a.wait(1),a.wa()])});gls2.ga["mana-2-1"]=new M.ia({top0:a.action([a.repeat(60,[a.ma("d","Math.sin($loop.index*0.3)*40"),a.ma("s","$loop.index*0.2"),d(7,"-90+$d","+90+$d",n("$s"),F,a.offsetX(-145),a.offsetY(-50)),g(5)]),a.repeat(60,[a.ma("d","Math.sin($loop.index*0.3)*40"),a.ma("s","$loop.index*0.2"),d(7,"-90-$d","+90-$d",n("$s"),F,a.offsetX(145),a.offsetY(-50)),g(5)])])});gls2.ga["mana-2-2"]=new M.ia({top0:a.action([a.repeat(5,
[d(15,-90,90,n(2),v,a.offsetX(-145),a.offsetY(-50)),g(20),d(15,-90,90,n(2),H,a.offsetX(145),a.offsetY(-50)),g(20),d(14,-90,90,n(6),v,a.offsetX(-145),a.offsetY(-50)),g(20),d(14,-90,90,n(6),H,a.offsetX(145),a.offsetY(-50)),g(20)])]),top1:a.action([a.repeat(15,[g(13),d(15,-90,90,r(3),J),g(10),d(16,-90,90,r(1),J),g(11),d(10,-90,90,r(2),J)])]),top2:a.action([a.fire(a.direction(20),s(3),O,a.offsetX(-145),a.offsetY(-50)),a.repeat(100,[a.fire(a.direction(0,"sequence"),s(3),O,a.offsetX(-145),a.offsetY(-50)),
g(5)])]),top3:a.action([a.fire(a.direction(-20),s(3),G,a.offsetX(145),a.offsetY(-50)),a.repeat(100,[a.fire(a.direction(0,"sequence"),s(3),G,a.offsetX(145),a.offsetY(-50)),g(5)])])});gls2.ga["mana-2-3"]=new M.ia({top0:a.action([a.repeat(30,[a.ma("ptn","[41, 35, 27, 15, 11][Math.floor($loop.index/5) % 5]"),a.fire(a.direction(180,"absolute"),a.speed(3),I(a.fa("child","$ptn")),a.offsetX(-145),a.offsetY(-50)),a.fire(a.direction(180,"absolute"),a.speed(3),I(a.fa("child","$ptn")),a.offsetX(145),a.offsetY(-50)),
g(20)])]),child:a.action([a.repeat(999,[a.wait("$1"),a.repeat(8,[a.fire(a.direction("360*$loop.index/8","absolute"),s,t(a.fa("ring"))),a.fire(a.direction("360*$loop.index/8","absolute"),s,t(a.fa("ring")))])])]),ring:a.action([a.wait(3),a.fire(a.direction(90,"absolute"),n,J),a.fire(a.direction(-90,"absolute"),n,J),a.wa])});gls2.ga["mana-3-1"]=new M.ia({top0:a.action([a.repeat(999,[g(20),a.ma("w","5+$rand*15"),d("$w",-90,90,m,J,a.offsetX(-145),a.offsetY(-50)),d("$w",-90,90,m,J,a.offsetX(145),a.offsetY(-50))])]),
top1:a.action([a.repeat(999,[g(43),d(12,-25,-15,r,Q),d(12,-5,5,r,Q),d(12,15,25,r,Q)])])});gls2.ga.kanade=new M.ia({top0:a.action([a.repeat(999,[a.repeat(13,[a.fire(a.direction(360/14,"sequence"),a.speed(2),t(a.fa("ivs0",-110)),a.offsetY(-350))]),g(20),a.fire(a.direction(360/14-3,"sequence"),a.speed(2),t(a.fa("ivs0",-110)),a.offsetY(-350))])]),top1:a.action([a.repeat(999,[a.repeat(11,[a.fire(a.direction(30,"sequence"),a.speed(2),t(a.fa("ivs0",110)),a.offsetY(-350))]),g(20),a.fire(a.direction(36,"sequence"),
a.speed(2),t(a.fa("ivs0",110)),a.offsetY(-350))])]),ivs0:a.action([a.wait(5),a.fire(a.direction("$1","relative"),m,E),a.wa()]),top2:a.action([a.repeat(999,[d(3,-12,12,m,v,a.offsetY(-350)),d(3,78,102,m,v,a.offsetY(-350)),d(3,168,192,m,v,a.offsetY(-350)),d(3,258,282,m,v,a.offsetY(-350)),g(114)])]),top3:a.action([a.repeat(999,[d(3,-3,3,n,O,a.offsetY(-350)),g(91)])])});gls2.ga.rery=new M.ia({top:a.action([g("$rand*120"),a.repeat(999,[g(180),a.repeat(10,[a.fire(a.direction(-90),a.speed(2),t(a.fa("fire",
90,"$loop.index"))),a.fire(a.direction(90),a.speed(2),t(a.fa("fire",-90,"$loop.index")))])])]),fire:a.action([a.wait(3),a.fire(a.direction("$1","relative"),r("$2*0.25"),H),a.wa()])});gls2.ga.fary=new M.ia({top:a.action([g("$rand*120"),a.repeat(999,[g(120),a.repeat(3,[d(3,-30,30,n,u),g(15)])])])});gls2.ga.sory=new M.ia({top:a.action([a.ma("d","$rand<0.5 ? -5 : 5"),a.ma("s","1+$rand*0.5"),a.repeat(999,[a.fire(a.direction("360/8+$d*$s","sequence"),a.speed(2),t(a.fa("fire"))),a.repeat(3,[a.fire(a.direction(90,
"sequence"),a.speed(2),t(a.fa("fire")))]),g(60)])]),fire:a.action([a.wait(2),a.fire(a.direction(0,"relative"),m,J),a.wa()])});gls2.ga.lary=new M.ia({top0:a.action([a.fire(a.direction(0,"absolute"),a.speed(1),t(a.fa("fire"))),a.repeat(999,[g(10),a.fire(a.direction(98,"sequence"),a.speed(1),t(a.fa("fire"))),a.fire(a.direction(90,"sequence"),a.speed(1),t(a.fa("fire"))),a.fire(a.direction(90,"sequence"),a.speed(1),t(a.fa("fire"))),a.fire(a.direction(90,"sequence"),a.speed(1),t(a.fa("fire")))])]),top1:a.action([a.fire(a.direction(47,
"absolute"),a.speed(1),t(a.fa("fire"))),a.repeat(999,[g(10),a.fire(a.direction(76,"sequence"),a.speed(1),t(a.fa("fire"))),a.fire(a.direction(90,"sequence"),a.speed(1),t(a.fa("fire"))),a.fire(a.direction(90,"sequence"),a.speed(1),t(a.fa("fire"))),a.fire(a.direction(90,"sequence"),a.speed(1),t(a.fa("fire")))])]),fire:a.action([a.wait(5),a.fire(a.direction(-1,"relative"),q,G),a.fire(a.direction(1,"relative"),q,G),a.wa()])});gls2.ga.shiry=new M.ia({top0:a.action([a.repeat(999,[a.ma("d","$loop.index*-6"),
a.repeat(23,[a.fire(a.direction(15,"sequence"),a.speed(1),t(a.fa("ivs0","$d")))]),g(30),a.fire(a.direction(16,"sequence"),a.speed(1),t(a.fa("ivs0","$d")))])]),ivs0:a.action([a.wait(5),a.fire(a.direction("$1","relative"),q,F),a.wa()])});gls2.ga.dodory=new M.ia({top:a.action([g("$rand*40"),a.repeat(999,[g(30),c(r,-0.1,3,function(b){return a.action([a.fire(b,C)])})])])});gls2.ga["hibiki-1-1a"]=new M.ia({top0:a.action([g(60),a.repeat(100,[a.ma("d","Math.sin($loop.index*0.3)*30"),a.fire(a.direction(2,
"sequence"),L,t(a.fa("dummy"))),a.repeat(12,[a.fire(a.direction(15,"sequence"),a.speed(5),t(a.fa("ivsR","$d")),a.offsetY(-25)),a.fire(a.direction(15,"sequence"),a.speed(5),t(a.fa("ivsB","$d")),a.offsetY(-25))]),g(4)])]),dummy:a.action([a.wait(1),a.wa()]),ivsR:a.action([a.wait(1),a.fire(a.direction("$1","relative"),n,E),a.wa()]),ivsB:a.action([a.wait(1),a.fire(a.direction("$1","relative"),n,I),a.wa()]),top1:a.action([g(60),g(120),a.repeat(3,[d(5,-45,-35,m(0.8),G,a.offsetY(-25)),d(5,-25,-15,m(0.8),
G,a.offsetY(-25)),d(5,-5,5,m(0.8),G,a.offsetY(-25)),d(5,15,25,m(0.8),G,a.offsetY(-25)),d(5,35,45,m(0.8),G,a.offsetY(-25)),g(40),d(5,-55,-45,m(0.8),G,a.offsetY(-25)),d(5,-35,-25,m(0.8),G,a.offsetY(-25)),d(5,-15,-5,m(0.8),G,a.offsetY(-25)),d(5,5,15,m(0.8),G,a.offsetY(-25)),d(5,25,35,m(0.8),G,a.offsetY(-25)),d(5,45,55,m(0.8),G,a.offsetY(-25)),g(40)])])});gls2.ga["hibiki-1-1b"]=new M.ia({top0:a.action([a.repeat(100,[a.ma("d","Math.sin($loop.index*0.3)*30"),a.fire(a.direction(2,"sequence"),L,t(a.fa("dummy"))),
a.repeat(12,[a.fire(a.direction(15,"sequence"),a.speed(5),t(a.fa("ivsR","$d")),a.offsetY(-25)),a.fire(a.direction(15,"sequence"),a.speed(5),t(a.fa("ivsB","$d")),a.offsetY(-25))]),g(4)])]),dummy:a.action([a.wait(1),a.wa()]),ivsR:a.action([a.wait(1),a.fire(a.direction("$1","relative"),n,E),a.wa()]),ivsB:a.action([a.wait(1),a.fire(a.direction("$1","relative"),n,I),a.wa()]),top1:a.action([g(120),a.repeat(3,[d(5,-45,-35,m(0.8),G,a.offsetX(-110),a.offsetY(-70)),d(5,-25,-15,m(0.8),G,a.offsetX(-110),a.offsetY(-70)),
d(5,-5,5,m(0.8),G,a.offsetX(-110),a.offsetY(-70)),d(5,15,25,m(0.8),G,a.offsetX(-110),a.offsetY(-70)),d(5,35,45,m(0.8),G,a.offsetX(-110),a.offsetY(-70)),g(40),d(5,-45,-35,m(0.8),G,a.offsetX(110),a.offsetY(-70)),d(5,-25,-15,m(0.8),G,a.offsetX(110),a.offsetY(-70)),d(5,-5,5,m(0.8),G,a.offsetX(110),a.offsetY(-70)),d(5,15,25,m(0.8),G,a.offsetX(110),a.offsetY(-70)),d(5,35,45,m(0.8),G,a.offsetX(110),a.offsetY(-70)),g(40)])])});gls2.ga["hibiki-1-2"]=new M.ia({top0:a.action([g(30),a.fire(a.direction(-20),a.speed(5),
t(a.fa("ivs")),a.offsetY(-25)),a.repeat(210,[a.ma("rs","Math.sin(Math.PI*2 * $loop.index/300 * 1.5)*16"),a.repeat(9,[a.fire(a.direction(36,"sequence"),a.speed(8),t(a.fa("ivs")),a.offsetY(-25))]),a.fire(a.direction("360/10+$rs","sequence"),a.speed(8),t(a.fa("ivs")),a.offsetY(-25)),g(8)])]),ivs:a.action([a.wait(1),a.fire(a.direction(90,"relative"),r,F),a.wa()]),top1:a.action([g(120),a.repeat(24,[a.ma("s","$loop.index*0.5"),d(39,-150.74,148.74,q("$s"),G,a.offsetX(-110),a.offsetY(-70)),d(39,-149.74,149.74,
q("$s"),G,a.offsetX(-110),a.offsetY(-70)),d(39,-148.74,150.74,q("$s"),G,a.offsetX(-110),a.offsetY(-70)),d(39,-150.74,148.74,q("$s"),G,a.offsetX(110),a.offsetY(-70)),d(39,-149.74,149.74,q("$s"),G,a.offsetX(110),a.offsetY(-70)),d(39,-148.74,150.74,q("$s"),G,a.offsetX(110),a.offsetY(-70)),g(60)])])});gls2.ga["hibiki-1-3a"]=new M.ia({top0:a.action([g(30),a.repeat(90,[a.ma("d","2+(1-$loop.index/90)*60"),a.ma("s","$loop.index*0.1"),a.fire(a.direction("-$d*2"),r("$s"),u,a.offsetX(-110),a.offsetY(-70)),a.fire(a.direction("-$d*1"),
r("$s"),u,a.offsetX(-110),a.offsetY(-70)),a.fire(a.direction("+$d*1"),r("$s"),u,a.offsetX(-110),a.offsetY(-70)),a.fire(a.direction("+$d*2"),r("$s"),u,a.offsetX(-110),a.offsetY(-70)),g(6)])]),top1:a.action([g(41),a.repeat(80,[a.ma("d","2+(1-$loop.index/80)*60"),a.ma("s","$loop.index*0.1"),a.fire(a.direction("-$d*2"),r("$s"),u,a.offsetX(110),a.offsetY(-70)),a.fire(a.direction("-$d*1"),r("$s"),u,a.offsetX(110),a.offsetY(-70)),a.fire(a.direction("+$d*1"),r("$s"),u,a.offsetX(110),a.offsetY(-70)),a.fire(a.direction("+$d*2"),
r("$s"),u,a.offsetX(110),a.offsetY(-70)),g(6)])]),top2:a.action([g(53),a.repeat(70,[a.ma("d","2+(1-$loop.index/70)*60"),a.ma("s","$loop.index*0.1"),a.fire(a.direction("-$d*2"),r("$s"),u,a.offsetX(-110),a.offsetY(-70)),a.fire(a.direction("-$d*1"),r("$s"),u,a.offsetX(-110),a.offsetY(-70)),a.fire(a.direction("+$d*1"),r("$s"),u,a.offsetX(-110),a.offsetY(-70)),a.fire(a.direction("+$d*2"),r("$s"),u,a.offsetX(-110),a.offsetY(-70)),g(6)])]),top3:a.action([a.repeat(12,[g(23),a.ma("r","Math.floor($rand*5)"),
c(n,0.1,7,function(b){return a.action([a.fire(a.direction(0),b,v,a.offsetX("[-110, -60, 0, 60, -110][$r]"),a.offsetY("[-70, -20, 0, -20, -70][$r]")),g(2)])})])])});gls2.ga["hibiki-1-3b"]=new M.ia({top0:a.action([g(30),a.repeat(45,[a.ma("d","-30+$loop.index*2"),a.ma("s","$loop.index*0.1"),a.fire(a.direction("-$d*2"),n("$s"),u,a.offsetX(-110),a.offsetY(-70)),a.fire(a.direction("-$d*1"),n("$s"),u,a.offsetX(-110),a.offsetY(-70)),a.fire(a.direction("+$d*1"),n("$s"),u,a.offsetX(-110),a.offsetY(-70)),a.fire(a.direction("+$d*2"),
n("$s"),u,a.offsetX(-110),a.offsetY(-70)),g(12)])]),top1:a.action([g(41),a.repeat(40,[a.ma("d","-30+$loop.index*2"),a.ma("s","$loop.index*0.1"),a.fire(a.direction("-$d*2"),n("$s"),u,a.offsetX(110),a.offsetY(-70)),a.fire(a.direction("-$d*1"),n("$s"),u,a.offsetX(110),a.offsetY(-70)),a.fire(a.direction("+$d*1"),n("$s"),u,a.offsetX(110),a.offsetY(-70)),a.fire(a.direction("+$d*2"),n("$s"),u,a.offsetX(110),a.offsetY(-70)),g(12)])]),top3:a.action([a.repeat(12,[g(23),a.ma("r","Math.floor($rand*5)"),c(n,0.1,
7,function(b){return a.action([a.fire(a.direction(0),b,v,a.offsetX("[-110, -60, 0, 60, -110][$r]"),a.offsetY("[-70, -20, 0, -20, -70][$r]")),g(2)])})])])});gls2.ga["hibiki-2-1"]=new M.ia({top0:a.action([g(90),a.repeat(7,[g(40),a.fire(q,t(a.fa("bit","5+$loop.index","$loop.index*2")),a.offsetX(-110),a.offsetY(-70)),g(40)])]),top1:a.action([g(90),a.repeat(7,[g(80),a.fire(q,t(a.fa("bit","5+$loop.index","$loop.index*2")),a.offsetX(110),a.offsetY(-70))])]),bit:a.action([a.wait(5),a.fa("way","$1","$2"),
a.wa()]),way:a.action([a.fire(a.direction(30),n("$2"),t(a.fa("dummy"))),a.repeat(30,[a.fire(a.direction(-60,"sequence"),n("$2"),v),a.repeat("$1-1",[a.fire(a.direction("60/($1-1)","sequence"),n("$2"),v)]),a.wait(1)])]),dummy:a.action([a.wait(1),a.wa()])});gls2.ga["hibiki-2-2"]=new M.ia({top0:a.action([g(90),a.repeat(5,[a.repeat(8,[d(16,-110,110,r,D),g(20)]),a.ma("w","30+$loop.index*10"),d(16,-110,110,r,z(a.fa("bit","$w"))),g(20)])]),bit:a.action([g("$1"),a.fire(n,H)])});gls2.ga["hibiki-2-3"]=new M.ia({top0:a.action([g(40),
a.repeat(30,[a.ma("d","$loop.index+2"),a.ma("s","$loop.index*0.8"),d(19,"-180+180/19+$d","+180-180/19+$d",n("$s"),z),g(17)])]),top1:a.action([g(40),a.repeat(30,[a.ma("d","$loop.index-2"),a.ma("s","$loop.index*0.8"),b(19,"-180+180/19+$d","+180-180/19+$d",n("$s"),F),g(17)])])});gls2.ga["hibiki-3-1"]=new M.ia({top0:a.action([g(41),a.repeat(45,[a.ma("s","$loop.index"),a.repeat(6,[a.fire(a.direction("360/6*$loop.index"),a.speed(5),t(a.fa("ivsB","360/6*$loop.index","$s")),a.offsetY(-25))]),a.repeat(6,[a.fire(a.direction("360/6*$loop.index+180/6"),
a.speed(5),t(a.fa("ivsR","360/6*$loop.index+180/6","$s")),a.offsetY(-25))]),g(1)])]),ivsR:a.action([a.wait(1),a.fire(a.direction("-$1+$rand*10-5","relative"),L("$2"),F),a.wa()]),ivsB:a.action([a.wait(1),a.fire(a.direction("-$1+$rand*10-5","relative"),L("$2"),z),a.wa()])});gls2.ga["hibiki-3-2"]=new M.ia({top0:a.action([g(90),a.repeat(3,[a.fire(a.direction(-10),A,z(a.fa("bit","5")),a.offsetX(-110),a.offsetY(-70)),g(45),a.fire(a.direction(10),A,z(a.fa("bit","7")),a.offsetX(110),a.offsetY(-70)),g(45),
a.fire(a.direction(10),A,z(a.fa("bit","11")),a.offsetX(-110),a.offsetY(-70)),g(45),a.fire(a.direction(-10),A,z(a.fa("bit","13")),a.offsetX(110),a.offsetY(-70)),g(45)]),g(45),a.fire(a.direction(-10),A,z(a.fa("bit","17")),a.offsetX(-110),a.offsetY(-70)),a.fire(a.direction(10),A,z(a.fa("bit","11")),a.offsetX(-110),a.offsetY(-70)),a.fire(a.direction(-10),A,z(a.fa("bit","7")),a.offsetX(110),a.offsetY(-70)),a.fire(a.direction(10),A,z(a.fa("bit","5")),a.offsetX(110),a.offsetY(-70)),g(45),a.fire(a.direction(-10),
A,z(a.fa("bit","17")),a.offsetX(-110),a.offsetY(-70)),a.fire(a.direction(10),A,z(a.fa("bit","11")),a.offsetX(-110),a.offsetY(-70)),a.fire(a.direction(-10),A,z(a.fa("bit","7")),a.offsetX(110),a.offsetY(-70)),a.fire(a.direction(10),A,z(a.fa("bit","5")),a.offsetX(110),a.offsetY(-70)),g(45),a.fire(a.direction(-10),A,z(a.fa("bit","17")),a.offsetX(-110),a.offsetY(-70)),a.fire(a.direction(10),A,z(a.fa("bit","11")),a.offsetX(-110),a.offsetY(-70)),a.fire(a.direction(-10),A,z(a.fa("bit","7")),a.offsetX(110),
a.offsetY(-70)),a.fire(a.direction(10),A,z(a.fa("bit","5")),a.offsetX(110),a.offsetY(-70))]),bit:a.action([a.wait("$1"),a.repeat(999,[g(5),a.fire(a.direction(-90,"relative"),n,C),a.fire(a.direction(90,"relative"),n,C)])])});gls2.ga.dory=new M.ia({top:a.action([a.repeat(999,[g(80),a.fa("attack0"),g(160),a.fa("attack1"),g(80)])]),attack0:a.action([a.fire(a.direction(0),a.speed(5),t(a.fa("ivs"))),a.repeat(20,[a.repeat(4,[g(2),a.fire(a.direction(72,"sequence"),a.speed(5),t(a.fa("ivs")))]),a.fire(a.direction(83,
"sequence"),a.speed(5),t(a.fa("ivs")))])]),attack1:a.action([a.fire(a.direction(0),a.speed(5),t(a.fa("ivs"))),a.repeat(20,[a.repeat(4,[g(2),a.fire(a.direction(72,"sequence"),a.speed(5),t(a.fa("ivs")))]),a.fire(a.direction(61,"sequence"),a.speed(5),t(a.fa("ivs")))])]),ivs:a.action([a.wait(1),a.fire(a.direction(0,"relative"),q,u),a.wa()])});gls2.ga.miry=new M.ia({top:a.action([a.repeat(999,[g(160),a.fa("attack0"),g(160),a.fa("attack1")])]),attack0:a.action([a.fire(a.direction(0),a.speed(5),t(a.fa("ivs"))),
a.repeat(20,[a.repeat(4,[g(2),a.fire(a.direction(72,"sequence"),a.speed(5),t(a.fa("ivs")))]),a.fire(a.direction(83,"sequence"),a.speed(5),t(a.fa("ivs")))])]),attack1:a.action([a.fire(a.direction(0),a.speed(5),t(a.fa("ivs"))),a.repeat(20,[a.repeat(4,[g(2),a.fire(a.direction(72,"sequence"),a.speed(5),t(a.fa("ivs")))]),a.fire(a.direction(61,"sequence"),a.speed(5),t(a.fa("ivs")))])]),ivs:a.action([a.wait(1),a.fire(a.direction(0,"relative"),q,C),a.wa()])});gls2.ga["setsuna-1"]=new M.ia({top0:a.action([a.wait(60),
a.repeat(5,[d(3,-2,2,q(1.8),C,a.offsetX(0),a.offsetX(0)),d(3,-4,4,q(1.4),C,a.offsetX(0),a.offsetX(0)),d(3,-6,6,q(1),C,a.offsetX(0),a.offsetX(0)),d(3,-8,8,q(0.6),C,a.offsetX(0),a.offsetX(0)),g(110)])]),top1:a.action([a.wait(60),a.repeat(10,[d(4,-40,40,n,F,a.offsetX(0),a.offsetY(30)),g(15),d(5,-40,40,q,F,a.offsetX(0),a.offsetY(30)),g(15),d(6,-40,40,m,F,a.offsetX(0),a.offsetY(30)),g(15)])])});gls2.ga["love-1-1"]=new M.ia({top0:a.action([g(30),a.fire(a.direction(-10),t,a.offsetX(0),a.offsetY(0)),a.repeat(90,
[a.fire(a.direction(17,"sequence"),m("$loop.index*0.1"),v,a.offsetX(-105),a.offsetY(0)),g(1)]),g(30),a.fire(a.direction(-10),t,a.offsetX(0),a.offsetY(0)),a.repeat(90,[a.fire(a.direction(-17,"sequence"),m("$loop.index*0.1"),H,a.offsetX(-105),a.offsetY(0)),g(1)]),g(120)]),top1:a.action([a.wait(30),a.fire(a.direction(-10),t,a.offsetX(0),a.offsetY(0)),a.repeat(90,[a.fire(a.direction(11,"sequence"),m("$loop.index*0.1"),v,a.offsetX(-85),a.offsetY(0)),g(1)]),g(30),a.fire(a.direction(-10),t,a.offsetX(0),
a.offsetY(0)),a.repeat(90,[a.fire(a.direction(-11,"sequence"),m("$loop.index*0.1"),H,a.offsetX(-85),a.offsetY(0)),g(1)])]),top2:a.action([a.wait(30),a.fire(a.direction(-10),t,a.offsetX(0),a.offsetY(0)),a.repeat(90,[a.fire(a.direction(-19,"sequence"),m("$loop.index*0.1"),v,a.offsetX(105),a.offsetY(0)),g(1)]),g(30),a.fire(a.direction(-10),t,a.offsetX(0),a.offsetY(0)),a.repeat(90,[a.fire(a.direction(19,"sequence"),m("$loop.index*0.1"),H,a.offsetX(105),a.offsetY(0)),g(1)])]),top3:a.action([a.wait(30),
a.fire(a.direction(-10),t,a.offsetX(0),a.offsetY(0)),a.repeat(90,[a.fire(a.direction(-23,"sequence"),m("$loop.index*0.1"),v,a.offsetX(85),a.offsetY(0)),g(1)]),g(30),a.fire(a.direction(-10),t,a.offsetX(0),a.offsetY(0)),a.repeat(90,[a.fire(a.direction(23,"sequence"),m("$loop.index*0.1"),H,a.offsetX(85),a.offsetY(0)),g(1)])])});gls2.ga["love-1-2"]=new M.ia({top0:a.action([a.wait(30),a.repeat(4,[c(q,0.01,6,function(b){return a.action([d(5,-80,80,b,O,a.offsetX(-85),a.offsetY(0)),d(5,-80,80,b,O,a.offsetX(85),
a.offsetY(0)),a.wait(3)])}),g(90)])]),top1:a.action([a.wait(60),a.repeat(4,[c(q,0.01,6,function(b){return a.action([d(6,-50,50,b,G,a.offsetX(-170),a.offsetY(40)),d(6,-50,50,b,G,a.offsetX(170),a.offsetY(40)),a.wait(3)])}),g(90)])]),top2:a.action([a.wait(60),a.repeat(10,[d(6,-40,40,q,E,a.offsetX(-130),a.offsetY(30)),g(45),d(7,-40,40,m,E,a.offsetX(-130),a.offsetY(30)),g(45)])]),top3:a.action([a.wait(60),a.repeat(10,[d(6,-40,40,q,E,a.offsetX(130),a.offsetY(30)),g(45),d(7,-40,40,m,E,a.offsetX(130),a.offsetY(30)),
g(45)])])});gls2.ga["love-1-3"]=new M.ia({top0:a.action([a.wait(120),a.repeat(2,[a.repeat(5,[a.repeat(10,[a.ma("c","$loop.index*10"),d(2,"-30+$c","30-$c",n(5),Q,a.offsetX(0),a.offsetY(0)),g(6)])]),g(120)])]),top1:a.action([a.wait(60),a.repeat(10,[d(4,-40,40,q,E,a.offsetX(-130),a.offsetY(30)),g(30),d(5,-40,40,m,E,a.offsetX(-130),a.offsetY(30)),g(30)])]),top2:a.action([a.wait(60),a.repeat(10,[d(4,-40,40,q,E,a.offsetX(130),a.offsetY(30)),g(30),d(5,-40,40,m,E,a.offsetX(130),a.offsetY(30)),g(30)])])});
gls2.ga["love-2-1"]=new M.ia({top0:a.action([a.wait(60),a.repeat(2,[a.repeat(5,[a.repeat(36,[a.fire(a.direction(" $loop.index*10"),q,z,a.offsetX(-130),a.offsetY(40)),a.fire(a.direction("-$loop.index*10"),q,z,a.offsetX(130),a.offsetY(40))]),g(12)]),g(120)])]),top1:a.action([a.wait(30),a.repeat(2,[a.repeat(5,[a.repeat(36,[a.fire(a.direction(" $loop.index*10"),m,F,a.offsetX(0),a.offsetY(-30))]),g(12)]),g(120)])])});gls2.ga["love-2-2"]=new M.ia({top0:a.action([a.wait(60),a.fire(a.direction(0),m,C,a.offsetX(0),
a.qa(k)),a.repeat(60,[a.fire(a.direction(21,"sequence"),m,H,a.offsetX(-85),a.offsetY(0)),a.fire(a.direction(90,"sequence"),m,H,a.offsetX(-85),a.offsetY(0)),a.fire(a.direction(90,"sequence"),m,H,a.offsetX(-85),a.offsetY(0)),a.fire(a.direction(90,"sequence"),m,H,a.offsetX(-85),a.offsetY(0)),g(10)])]),top1:a.action([a.wait(60),a.fire(a.direction(0),m,C,a.offsetX(0),a.qa(k)),a.repeat(60,[a.fire(a.direction(-21,"sequence"),m,H,a.offsetX(85),a.offsetY(0)),a.fire(a.direction(90,"sequence"),m,H,a.offsetX(85),
a.offsetY(0)),a.fire(a.direction(90,"sequence"),m,H,a.offsetX(85),a.offsetY(0)),a.fire(a.direction(90,"sequence"),m,H,a.offsetX(85),a.offsetY(0)),g(10)])]),top9:a.action([a.wait(200),a.repeat(5,[a.repeat(36,[a.fire(a.direction("$loop.index*10"),a.speed(1),t(a.fa("seed")))]),g(120)])]),seed:a.action([a.wait(10),a.Jd(a.speed(0),30),a.wait(30),d(5,-40,40,q,Q),a.wa])});gls2.ga["love-2-3"]=new M.ia({top8:a.action([a.wait(120),a.repeat(3,[a.repeat(5,[a.fire(a.direction("-$loop.index*30","absolute"),m,z(a.fa("seed1")),
a.offsetX(-130),a.offsetY(40)),g(6),a.fire(a.direction("-$loop.index*30+15","absolute"),m,F(a.fa("seed2")),a.offsetX(-130),a.offsetY(40)),g(6)]),g(90)])]),top9:a.action([a.wait(120),a.repeat(3,[a.repeat(5,[a.fire(a.direction("$loop.index*30","absolute"),m,z(a.fa("seed1")),a.offsetX(130),a.offsetY(40)),g(6),a.fire(a.direction("$loop.index*30+15","absolute"),m,F(a.fa("seed2")),a.offsetX(130),a.offsetY(40)),g(6)]),g(90)])]),seed1:a.action([a.wait(10),a.Jd(a.speed(0),90),a.wait(60),a.fire(a.direction(0),
n,t),a.repeat(5,[a.fire(a.direction(-30,"sequence"),r,H),a.fire(a.direction(20,"sequence"),r,H),a.fire(a.direction(20,"sequence"),r,H),a.fire(a.direction(20,"sequence"),r,H),a.fire(a.direction(-30,"sequence"),r,t),g(4)]),a.wa]),seed2:a.action([a.wait(10),a.Jd(a.speed(0),90),a.wait(120),a.fire(a.direction(0),n,t),a.repeat(5,[a.fire(a.direction(-30,"sequence"),r,v),a.fire(a.direction(15,"sequence"),r,v),a.fire(a.direction(15,"sequence"),r,v),a.fire(a.direction(15,"sequence"),r,v),a.fire(a.direction(15,
"sequence"),r,v),a.fire(a.direction(-30,"sequence"),r,t),g(4)]),a.wa])});gls2.ga["love-3-1"]=new M.ia({top0:a.action([a.wait(60),a.fire(a.direction(0),m,C,a.offsetX(0),a.qa(k)),a.repeat(5,[a.repeat(30,[a.fire(a.direction(11,"sequence"),m,I,a.offsetX(-85),a.offsetY(0)),a.fire(a.direction(45,"sequence"),m,I,a.offsetX(-85),a.offsetY(0)),a.fire(a.direction(45,"sequence"),m,I,a.offsetX(-85),a.offsetY(0)),a.fire(a.direction(45,"sequence"),m,I,a.offsetX(-85),a.offsetY(0)),a.fire(a.direction(45,"sequence"),
m,I,a.offsetX(-85),a.offsetY(0)),a.fire(a.direction(45,"sequence"),m,I,a.offsetX(-85),a.offsetY(0)),a.fire(a.direction(45,"sequence"),m,I,a.offsetX(-85),a.offsetY(0)),g(3)]),g(10)])]),top1:a.action([a.wait(60),a.fire(a.direction(0),m,C,a.offsetX(0),a.qa(k)),a.repeat(5,[a.repeat(30,[a.fire(a.direction(-11,"sequence"),m,I,a.offsetX(85),a.offsetY(0)),a.fire(a.direction(45,"sequence"),m,I,a.offsetX(85),a.offsetY(0)),a.fire(a.direction(45,"sequence"),m,I,a.offsetX(85),a.offsetY(0)),a.fire(a.direction(45,
"sequence"),m,I,a.offsetX(85),a.offsetY(0)),a.fire(a.direction(45,"sequence"),m,I,a.offsetX(85),a.offsetY(0)),a.fire(a.direction(45,"sequence"),m,I,a.offsetX(85),a.offsetY(0)),a.fire(a.direction(45,"sequence"),m,I,a.offsetX(85),a.offsetY(0)),g(3)])]),g(10)]),top2:a.action([a.wait(120),a.repeat(2,[c(r,0.005,10,function(b){return a.action([d(20,-90,90,b,u,a.offsetX(-85),a.offsetY(0)),d(20,-90,90,b,u,a.offsetX(85),a.offsetY(0))])}),g(240)])])});gls2.ga["love-3-2"]=new M.ia({top0:a.action([a.wait(60),
a.fire(a.direction(0),m,C,a.offsetX(0),a.qa(k)),a.repeat(5,[a.repeat(30,[a.fire(a.direction(-11,"sequence"),m,E,a.offsetX(-85),a.offsetY(0)),a.fire(a.direction(45,"sequence"),m,E,a.offsetX(-85),a.offsetY(0)),a.fire(a.direction(45,"sequence"),m,E,a.offsetX(-85),a.offsetY(0)),a.fire(a.direction(45,"sequence"),m,E,a.offsetX(-85),a.offsetY(0)),a.fire(a.direction(45,"sequence"),m,E,a.offsetX(-85),a.offsetY(0)),a.fire(a.direction(45,"sequence"),m,E,a.offsetX(-85),a.offsetY(0)),a.fire(a.direction(45,"sequence"),
m,E,a.offsetX(-85),a.offsetY(0)),g(3)]),g(10)])]),top1:a.action([a.wait(60),a.fire(a.direction(0),m,C,a.offsetX(0),a.qa(k)),a.repeat(5,[a.repeat(30,[a.fire(a.direction(11,"sequence"),m,E,a.offsetX(85),a.offsetY(0)),a.fire(a.direction(45,"sequence"),m,E,a.offsetX(85),a.offsetY(0)),a.fire(a.direction(45,"sequence"),m,E,a.offsetX(85),a.offsetY(0)),a.fire(a.direction(45,"sequence"),m,E,a.offsetX(85),a.offsetY(0)),a.fire(a.direction(45,"sequence"),m,E,a.offsetX(85),a.offsetY(0)),a.fire(a.direction(45,
"sequence"),m,E,a.offsetX(85),a.offsetY(0)),a.fire(a.direction(45,"sequence"),m,E,a.offsetX(85),a.offsetY(0)),g(3)])]),g(10)]),top2:a.action([a.wait(120),a.repeat(2,[c(r,0.002,10,function(b){return a.action([d(21,-90,90,b,C,a.offsetX(-85),a.offsetY(0)),d(21,-90,90,b,C,a.offsetX(85),a.offsetY(0))])}),g(240)])])});gls2.ga.setup=function(){for(var a=0;2E3>a;a++)U.push(gls2.Oa());a=gls2.ga.Gf=tm.Lb.vd.Ne;a.oh=function(a){return!(a instanceof gls2.Oa)||!(-50>a.x||530<a.x||-50>a.y||690<a.y)};a.Gi=function(a){var b=
U.shift(0);if(b)return b.ra=50,R.push(b),b.setFrameIndex(a.frame===i?1:a.frame),b.blendMode="source-over",a.nc?(b.scaleX=1*(gls2.core.Ab?1.5:1),b.scaleY=1*(gls2.core.Ab?1.5:1),b.sd=w):(a.af?(b.scaleX=0.4*(gls2.core.Ab?1.5:1),b.scaleY=1.5*(gls2.core.Ab?1.5:1)):a.Ub?(b.scaleX=1*(gls2.core.Ab?1.5:1),b.scaleY=10*(gls2.core.Ab?1.5:1),b.blendMode="lighter"):(b.scaleX=0.8*(gls2.core.Ab?1.5:1),b.scaleY=1.5*(gls2.core.Ab?1.5:1)),b.sd=k),b.visible=a.visible===w?w:k,b.nc=!!a.nc,b.af=!!a.af,b.Ub=!!a.Ub,b;console.warn("\u5f3e\u304c\u8db3\u308a\u306a\u3044\uff01")};
a.Ni=function(a){return-0<=a.x&&480>a.x&&-0<=a.y&&640>a.y};a.Vd=3;M.Ua.Bb.$rank=0;M.Ua.Bb.$hyperOff=1;M.Ua.Bb.$bg=0;M.Ua.Bb.$ex=0};gls2.ga.erase=function(a,b,c){for(var d=[].concat(R),f=0,g=d.length;f<g;f++){if(a){var j=gls2.yi(!!b);j.setPosition(d[f].x,d[f].y);c&&(j.Md=k)}d[f].za()}};gls2.ga.Ke=function(){for(var a=[].concat(R),b=0,c=a.length;b<c;b++)a[b].remove()};gls2.Oa=tm.createClass({superClass:tm.display.Sprite,ra:0,nc:w,af:w,init:function(){this.superInit("tex0",20,20);this.boundingRadius=
3;this.addEventListener("removed",function(){this.clearEventListener("enterframe");U.push(this);var a=R.indexOf(this);-1!==a&&R.splice(a,1)})},update:function(){this.nc&&(this.rotation+=15)},za:function(){var a=gls2.Oa.Pe().setScale(0.1,0.1).setPosition(this.x,this.y);a.addEventListener("enterframe",function(){this.scaleX+=0.1;this.scaleY+=0.1});a.addChildTo(this.parent);this.remove()}});gls2.Oa.Pe=function(){gls2.Oa.Pe.Yg===l&&(gls2.Oa.Pe.Yg=gls2.Ra(10,1,0.92,tm.graphics.Canvas().resize(10,10).setFillStyle(tm.graphics.RadialGradient(5,
5,0,5,5,5).addColorStopList([{offset:0,color:"rgba(255,100,100,0.0)"},{offset:0.3,color:"rgba(255,100,100,0.0)"},{offset:0.9,color:"rgba(255,180,180,1.0)"},{offset:1,color:"rgba(255,100,100,0.0)"}]).toStyle()).fillRect(0,0,10,10).element));return gls2.Oa.Pe.Yg.clone()};gls2.Oa.Pe.Yg=l;var U=[],R=gls2.Oa.fb=[]})();gls2.la={};gls2.la.clamp=function(c,b,f){return c<b?b:c>f?f:c};gls2.la.DEG_TO_RAD=Math.PI/180;gls2.la.RAD_TO_DEG=180/Math.PI;gls2.la.degToRad=function(c){return c*gls2.la.DEG_TO_RAD};gls2.la.radToDeg=function(c){return c*gls2.la.RAD_TO_DEG};gls2.la.rand=function(c,b){return window.Math.floor(window.Math.random()*(b-c+1))+c};gls2.la.randf=function(c,b){return window.Math.random()*(b-c)+c};gls2.la.magnitude=function(){return Math.sqrt(gls2.la.magnitudeSq.apply(l,arguments))};
gls2.la.magnitudeSq=function(){for(var c=0,b=0,f=arguments.length;b<f;++b)c+=arguments[b]*arguments[b];return c};gls2.la.inside=function(c,b,f){return c>=b&&c<=f};
